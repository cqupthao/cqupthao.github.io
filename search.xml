<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hexoåšå®¢å®‰è£…å’ŒMateryä¸»é¢˜ä¼˜åŒ–é…ç½®</title>
      <link href="/posts/36738.html"/>
      <url>/posts/36738.html</url>
      
        <content type="html"><![CDATA[<hr><h1>Hexo çš„å®‰è£…</h1><hr><p><a href="https://hexo.io/themes/">Hexo</a> æ˜¯ä¸€æ¬¾åŸºäº Node.js çš„é™æ€åšå®¢æ¡†æ¶ï¼Œä¾èµ–å°‘æ˜“äºå®‰è£…ä½¿ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿çš„ç”Ÿæˆé™æ€ç½‘é¡µæ‰˜ç®¡åœ¨ GitHub ã€Gitee ä¸Šï¼Œæ˜¯æ­å»ºåšå®¢çš„é¦–é€‰æ¡†æ¶ã€‚</p><hr><h2 id="å®‰è£…-Git"><a class="header-anchor" href="#å®‰è£…-Git">Â¶</a>å®‰è£… Git</h2><hr><p>Git æ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥æœ‰æ•ˆã€é«˜é€Ÿçš„å¤„ç†ä»å¾ˆå°åˆ°éå¸¸å¤§çš„é¡¹ç›®ç‰ˆæœ¬ç®¡ç†ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span> <span class="token parameter variable">-y</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="å®‰è£…-Node-js"><a class="header-anchor" href="#å®‰è£…-Node-js">Â¶</a>å®‰è£… Node.js</h2><hr><p>Hexo æ˜¯åŸºäº Node.js ç¼–å†™çš„ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸€ä¸‹ Node.js å’Œ npm å·¥å…·ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt-get</span> <span class="token function">install</span> nodejs <span class="token function">npm</span> <span class="token parameter variable">-y</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…å®Œåï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">node</span> <span class="token parameter variable">-v</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token parameter variable">-v</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å‡çº§ npm åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œæ›´æ¢ npm æºä¸ºæ·˜å®æºã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> <span class="token function">npm</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="å‡çº§-Node-js-ç‰ˆæœ¬"><a class="header-anchor" href="#å‡çº§-Node-js-ç‰ˆæœ¬">Â¶</a>å‡çº§ Node.js ç‰ˆæœ¬</h2><hr><ul><li>æ¸…é™¤ npm ç¼“å­˜</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> cache clean <span class="token parameter variable">-f</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>å®‰è£… Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…· n</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> n <span class="token parameter variable">-g</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>æŸ¥çœ‹ Node.js æ‰€æœ‰ç‰ˆæœ¬</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> view <span class="token function">node</span> versions<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>å‡çº§ Node.js ç‰ˆæœ¬</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å‡çº§åˆ°æŒ‡å®šçš„ç‰ˆæœ¬ï¼šn ç‰ˆæœ¬å·</span>n <span class="token number">16.0</span>.0<span class="token comment"># å‡çº§åˆ°æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬</span>n stable<span class="token comment"># å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¸æ¨è</span>n latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨ <code>node -v</code> æŸ¥çœ‹ Node.js ç‰ˆæœ¬ï¼Œå¦‚æœç‰ˆæœ¬å·æ”¹å˜ä¸ºæƒ³è¦çš„åˆ™å‡çº§æˆåŠŸã€‚å¦‚æœç‰ˆæœ¬å·æ²¡å˜ï¼Œå¯ä»¥é‡å¯æœºå™¨æˆ–è€…å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p><ol><li>æŸ¥çœ‹å®‰è£… Node.js çš„ä½ç½®</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">which</span> <span class="token function">node</span>  /usr/local/n/versions/node/16.0.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="2"><li>è¿›å…¥è¯¥ä½ç½®</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /usr/local/n/versions/node<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>ç¼–è¾‘ <code>/etc/profile</code> ï¼Œå°† Node.js å®‰è£…çš„è·¯å¾„ï¼Œæ·»åŠ åˆ°æ–‡ä»¶æœ«å°¾</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">NODE_HOME</span><span class="token operator">=</span>/usr/local/n/versions/node/16.0.0<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$NODE_HOME</span>/bin:<span class="token environment constant">$PATH</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="4"><li>è¾“å…¥ wq é€€å‡ºä¿å­˜æ–‡ä»¶ï¼Œå†ç¼–è¯‘ <code>/etc/profile</code></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="å®‰è£…-Hexo"><a class="header-anchor" href="#å®‰è£…-Hexo">Â¶</a>å®‰è£… Hexo</h2><hr><p>å‰é¢ Git å’Œ Node.js å®‰è£…å¥½åï¼Œå°±å¯ä»¥æ­£å¼è¿›è¡Œå®‰è£… Hexo ã€‚</p><ol><li>å®‰è£… Hexo</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo <span class="token parameter variable">-v</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0801_1425592747878800930944621.png" alt="hexo ç‰ˆæœ¬ä¿¡æ¯"></p><hr><h2 id="åˆå§‹åŒ–-Hexo"><a class="header-anchor" href="#åˆå§‹åŒ–-Hexo">Â¶</a>åˆå§‹åŒ– Hexo</h2><hr><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo init filenameï¼ˆæ–‡ä»¶åéšæ„å®šä¹‰ï¼‰<span class="token builtin class-name">cd</span> filename //è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹<span class="token function">npm</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200803_1018077824263297184815366.jpg" alt=""></p><hr><ul><li>hexo init</li></ul><blockquote><p>è¯´æ˜ï¼šè‡ªåŠ¨åœ¨æ–‡ä»¶å¤¹ï¼ˆfilenameï¼‰ä¸­åˆ›å»ºé¡¹ç›®æ‰€éœ€çš„æ–‡ä»¶</p></blockquote><ul><li>cd filename</li></ul><blockquote><p>è¯´æ˜ï¼šå°†æ“ä½œä½ç½®è½¬ç§»åˆ°å°†è¦å­˜æ”¾é¡¹ç›®çš„æ–‡ä»¶å¤¹ç›®å½•</p></blockquote><ul><li>npm install</li></ul><blockquote><p>è¯´æ˜ï¼šå®‰è£…ä¾èµ–åŒ…</p></blockquote><p>æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹ç›®å½•ä¸‹æœ‰ï¼š</p><hr><ul><li><code>_config.yml</code> ï¼šç«™ç‚¹çš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦å¤‡ä»½ã€‚</li><li><code>themes</code> ï¼šä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œéœ€è¦å¤‡ä»½ã€‚</li><li><code>source</code> ï¼šåšå®¢æ–‡ç« çš„ .md æ–‡ä»¶ï¼Œéœ€è¦å¤‡ä»½ã€‚</li><li><code>scaffolds</code> ï¼šæ–‡ç« çš„æ¨¡æ¿ï¼Œéœ€è¦å¤‡ä»½ã€‚</li><li><code>package.json</code> ï¼šå®‰è£…åŒ…çš„åç§°ï¼Œéœ€è¦å¤‡ä»½ã€‚</li><li><code>.gitignore</code> ï¼šé™å®šåœ¨ push æ—¶å“ªäº›æ–‡ä»¶å¯ä»¥å¿½ç•¥ï¼Œéœ€è¦å¤‡ä»½ .git ï¼šä¸»é¢˜å’Œç«™ç‚¹éƒ½æœ‰ï¼Œæ ‡å¿—è¿™æ˜¯ä¸€ä¸ª git é¡¹ç›®ï¼Œä¸éœ€è¦å¤‡ä»½ã€‚</li><li><code>node_modules</code> ï¼šæ˜¯å®‰è£…åŒ…çš„ç›®å½•ï¼Œåœ¨æ‰§è¡Œ npm install çš„æ—¶å€™ä¼šé‡æ–°ç”Ÿæˆï¼Œä¸éœ€è¦å¤‡ä»½ã€‚</li><li><code>public</code> ï¼šæ˜¯ hexo g ç”Ÿæˆçš„é™æ€ç½‘é¡µï¼Œä¸éœ€è¦å¤‡ä»½ã€‚</li><li><code>deploy_git</code> ï¼šåŒä¸Šï¼Œhexo g ä¹Ÿä¼šç”Ÿæˆï¼Œä¸éœ€è¦å¤‡ä»½ã€‚</li><li><code>db.json</code> ï¼šæ–‡ä»¶ï¼Œä¸éœ€è¦å¤‡ä»½ã€‚</li></ul><hr><hr><h2 id="å¯åŠ¨-Hexo-æœåŠ¡"><a class="header-anchor" href="#å¯åŠ¨-Hexo-æœåŠ¡">Â¶</a>å¯åŠ¨ Hexo æœåŠ¡</h2><hr><p>æ­£ç¡®å®‰è£…å®Œæˆåä¾¿æŒ‰ç…§ä¸‹é¢æ“ä½œå¯åŠ¨ Hexo åšå®¢ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo generate <span class="token comment"># ç”Ÿæˆé™æ€é¡µé¢è‡³ public ç›®å½•</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo server <span class="token comment"># å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£ 4000 ï¼Œctrl + c å…³é—­ server ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2023/01/03608.png" alt=""></p><hr><p><img src="https://tao7app.files.wordpress.com/2023/01/003.png" alt=""></p><hr><p>æ‰“å¼€æµè§ˆå™¨è¾“å…¥å¯¹åº”çš„ç½‘å€ <strong><a href="http://localhost:4000">http://localhost:4000</a></strong> ï¼Œå°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„åšå®¢ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2023/01/img_20230108_005221.png" alt="hexo åšå®¢é¦–é¡µ"></p><hr><h1>Hexo éƒ¨ç½²åˆ° GitHub</h1><hr><hr><h2 id="åœ¨-GitHub-å®˜ç½‘ä¸Šåˆ›å»ºä¸ªäººä»“åº“"><a class="header-anchor" href="#åœ¨-GitHub-å®˜ç½‘ä¸Šåˆ›å»ºä¸ªäººä»“åº“">Â¶</a>åœ¨ GitHub å®˜ç½‘ä¸Šåˆ›å»ºä¸ªäººä»“åº“</h2><hr><p>æ³¨å†Œç™»å½• <a href="https://github.com/">githubå®˜ç½‘</a>ï¼Œç‚¹å‡»å³ä¸Šè§’åŠ å·ï¼Œç‚¹å‡» New repository ï¼Œæ–°å»ºä»“åº“ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0801_1453048826363041159371369.png" alt=""></p><p>åˆ›å»ºä¸€ä¸ªå’Œç”¨æˆ·åç›¸åŒçš„ä»“åº“ï¼ˆå³ <strong><a href="http://xxxx.github.io">http://xxxx.github.io</a></strong> ï¼Œå…¶ä¸­ <code>xxx</code> æ˜¯ github çš„ç”¨æˆ·åï¼‰ï¼Œç‚¹å‡» Greate Repository ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0801_1456556257341474192203571.png" alt=""></p><hr><h2 id="Git-åˆå§‹åŒ–è®¾ç½®"><a class="header-anchor" href="#Git-åˆå§‹åŒ–è®¾ç½®">Â¶</a>Git åˆå§‹åŒ–è®¾ç½®</h2><hr><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"your name"</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"your email"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ï¼ˆyour name æ˜¯ github ç”¨æˆ·åï¼Œyour email æ˜¯æ³¨å†Œ github çš„é‚®ç®±ï¼‰</p><hr><h2 id="æŸ¥çœ‹è®¾ç½®æ˜¯å¦æ­£ç¡®"><a class="header-anchor" href="#æŸ¥çœ‹è®¾ç½®æ˜¯å¦æ­£ç¡®">Â¶</a>æŸ¥çœ‹è®¾ç½®æ˜¯å¦æ­£ç¡®</h2><hr><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config user.name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config user.email<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="ç”Ÿæˆ-SSH-æ·»åŠ åˆ°-GitHub"><a class="header-anchor" href="#ç”Ÿæˆ-SSH-æ·»åŠ åˆ°-GitHub">Â¶</a>ç”Ÿæˆ SSH æ·»åŠ åˆ° GitHub</h2><hr><ul><li>åˆ›å»º SSH ï¼Œé»˜è®¤å›è½¦</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">"youre mail"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200802_1139583858709568397913356.jpg" alt=""></p><ul><li>æŸ¥çœ‹ SSH KEY</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> ~/.ssh/id_rsa.pub<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200803_0950183625923031218189922.jpg" alt=""></p><ul><li>å¤åˆ¶ <code>id_rsa.pub</code> é‡Œé¢çš„å…¨éƒ¨å†…å®¹ï¼Œåœ¨ GitHub çš„ Setting ä¸­ï¼Œæ‰¾åˆ° SSH keys çš„è®¾ç½®é€‰é¡¹ï¼Œç‚¹å‡» New SSH keyï¼Œç²˜è´´ <code>id_rsa.pub</code> é‡Œé¢çš„å…¨éƒ¨å†…å®¹ã€‚</li></ul><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0801_151404755358037895170688.png" alt=""></p><ul><li>æŸ¥çœ‹æ˜¯å¦è¿æ¥æˆåŠŸ</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200803_0950365347089596365232504.jpg" alt=""></p><ul><li>æ‰“å¼€ç«™ç‚¹é…ç½®æ–‡ä»¶ <code>_config.yml</code> ï¼Œä¿®æ”¹æ·»åŠ ä»¥ä¸‹å†…å®¹</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>     <span class="token key atrule">type</span><span class="token punctuation">:</span> git    <span class="token key atrule">repo</span><span class="token punctuation">:</span>    git@github.com<span class="token punctuation">:</span>yourgithubname/yourgithubname.github.io.git    <span class="token key atrule">branch</span><span class="token punctuation">:</span> master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="Hexo-éƒ¨ç½²åˆ°-GitHub-Pages"><a class="header-anchor" href="#Hexo-éƒ¨ç½²åˆ°-GitHub-Pages">Â¶</a>Hexo éƒ¨ç½²åˆ° GitHub Pages</h2><hr><ul><li>åœ¨éƒ¨ç½²åˆ° GitHub ä¹‹å‰ï¼Œå®‰è£…å¦‚ä¸‹æ‰©å±•</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>éƒ¨ç½²åˆ° GitHub</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo g <span class="token parameter variable">-d</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®Œæˆåæµè§ˆå™¨è®¿é—® <strong><a href="https://xxx.github.io/">https://xxx.github.io/</a></strong> ï¼ˆxxx æ˜¯ github è´¦å·æ˜µç§°ï¼‰å°±å¯ä»¥çœ‹è§å’Œç½‘å€ <strong><a href="http://localhost:4000">http://localhost:4000</a></strong> ä¸€æ ·çš„å†…å®¹äº†ã€‚</p><hr><h1>Hexo éƒ¨ç½²åˆ° Gitee</h1><hr><hr><h2 id="åœ¨-Gitee-å®˜ç½‘ä¸Šåˆ›å»ºä¸ªäººä»“åº“"><a class="header-anchor" href="#åœ¨-Gitee-å®˜ç½‘ä¸Šåˆ›å»ºä¸ªäººä»“åº“">Â¶</a>åœ¨ Gitee å®˜ç½‘ä¸Šåˆ›å»ºä¸ªäººä»“åº“</h2><hr><p>æ‰“å¼€<a href="https://gitee.com/">ç äº‘å®˜ç½‘</a>ï¼Œæ³¨å†Œç™»é™†ï¼Œåˆ›å»ºé¡¹ç›®ï¼Œç‚¹å‡»å³ä¸Šè§’åŠ å·ï¼Œæ–°å»ºä»“åº“ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0802_2310411783559666911033042.png" alt=""></p><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0802_23111427248098453871943831.png" alt=""></p><p>å¼€å¯ Gitee Pages æœåŠ¡ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0802_231221568468301236150357.png" alt=""></p><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200803_0937147843036425501178044.jpg" alt=""></p><p>ç‚¹å‡»å¯åŠ¨ï¼Œå¯åŠ¨åï¼Œç‚¹å‡»è“è‰²é“¾æ¥æ‰“å¼€ç½‘å€ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0802_2314342325756989210353055.png" alt=""></p><hr><h2 id="åˆå§‹åŒ–-Git-è®¾ç½®"><a class="header-anchor" href="#åˆå§‹åŒ–-Git-è®¾ç½®">Â¶</a>åˆå§‹åŒ– Git è®¾ç½®</h2><hr><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name <span class="token string">"è¿™é‡Œè¾“å…¥ä½ çš„ gitee æ³¨å†Œå"</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email <span class="token string">"è¿™é‡Œè¾“ä½ çš„ gitee é‚®ç®±"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="æŸ¥çœ‹è®¾ç½®æ˜¯å¦æ­£ç¡®-v2"><a class="header-anchor" href="#æŸ¥çœ‹è®¾ç½®æ˜¯å¦æ­£ç¡®-v2">Â¶</a>æŸ¥çœ‹è®¾ç½®æ˜¯å¦æ­£ç¡®</h2><hr><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config user.name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config user.email<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="ç”Ÿæˆ-SSH-æ·»åŠ åˆ°-Gitee"><a class="header-anchor" href="#ç”Ÿæˆ-SSH-æ·»åŠ åˆ°-Gitee">Â¶</a>ç”Ÿæˆ SSH æ·»åŠ åˆ° Gitee</h2><hr><ul><li>åˆ›å»º SSH ï¼Œé»˜è®¤å›è½¦</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-C</span> <span class="token string">"your email"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200802_1139583858709568397913356.jpg" alt=""></p><ul><li>æŸ¥çœ‹ SSH KEY</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> ~/.ssh/id_rsa.pub<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200803_0950183625923031218189922.jpg" alt=""></p><ul><li>å¤åˆ¶ <code>id_rsa.pub</code> é‡Œé¢çš„å…¨éƒ¨å†…å®¹ï¼Œåœ¨ gitee çš„ç®¡ç†ä¸­ï¼Œæ‰¾åˆ°æ·»åŠ å…¬é’¥çš„è®¾ç½®é€‰é¡¹ï¼Œç‚¹å‡» New SSH key ï¼Œç²˜è´´ <code>id_rsa.pub</code> é‡Œé¢çš„å…¨éƒ¨å†…å®¹</li></ul><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0802_2316484808107369418949929.png" alt=""></p><ul><li>æŸ¥çœ‹æ˜¯å¦è¿æ¥æˆåŠŸ</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> <span class="token parameter variable">-T</span> git@github.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20200803_0950365347089596365232504.jpg" alt=""></p><hr><h2 id="é…ç½®-config-yml-æ–‡ä»¶"><a class="header-anchor" href="#é…ç½®-config-yml-æ–‡ä»¶">Â¶</a>é…ç½® <code>_config.yml</code> æ–‡ä»¶</h2><hr><p>ï¼ˆç‚¹å‡»å¤åˆ¶å…‹éš†/ä¸‹è½½é‡Œé¢çš„ https çš„å†…å®¹ï¼‰<br>ä¿®æ”¹æ·»åŠ  <code>_config.yml</code> ä»¥ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">url</span><span class="token punctuation">:</span> Gitee Pages æœåŠ¡ç½‘ç«™åœ°å€ï¼š https<span class="token punctuation">:</span>//ç©ºé—´å.gitee.io/ä»“åº“å<span class="token key atrule">root</span><span class="token punctuation">:</span> /ä»“åº“å/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> git      <span class="token key atrule">repo</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//gitee.com/ç©ºé—´å/ä»“åº“å      <span class="token key atrule">branch</span><span class="token punctuation">:</span> master<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/screenshot_2020_0808_2152243527362378310111202.png" alt="é…ç½®åœ°å€"></p><hr><h2 id="Hexo-éƒ¨ç½²åˆ°-Gitee-Pages"><a class="header-anchor" href="#Hexo-éƒ¨ç½²åˆ°-Gitee-Pages">Â¶</a>Hexo éƒ¨ç½²åˆ° Gitee Pages</h2><hr><ul><li>åœ¨éƒ¨ç½²åˆ° Gitee ä¹‹å‰ï¼Œå®‰è£…å¦‚ä¸‹æ‰©å±•</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>éƒ¨ç½²åˆ° Gitee</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo g <span class="token parameter variable">-d</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®Œæˆåæµè§ˆå™¨è®¿é—® <strong><a href="https://xxx.gitee.io/">https://xxx.gitee.io/</a></strong> ï¼ˆxxx æ˜¯ gitee è´¦å·æ˜µç§°ï¼‰å°±å¯ä»¥çœ‹è§å’Œç½‘å€ <strong><a href="http://localhost:4000">http://localhost:4000</a></strong> ä¸€æ ·çš„å†…å®¹äº†ã€‚</p><hr><p>æ›´å¤šåŸºç¡€é…ç½®å¯ä»¥å‚è€ƒ<a href="https://hexo.io/zh-cn/docs/configuration">å®˜æ–¹æ–‡æ¡£</a>çš„é…ç½®è¯´æ˜ã€‚</p><hr><h1>Matery ä¸»é¢˜å®‰è£…åŠä¼˜åŒ–</h1><hr><ul><li><p>Matery ä¸»é¢˜å®‰è£…å‚è€ƒ <a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">Matery å®˜ç½‘æ•™ç¨‹</a></p></li><li><p>Matery ä¼˜åŒ–å‚è€ƒ <a href="https://blog.17lai.site/posts/40300608/">åŸºäº Hexo çš„ Matery ä¸»é¢˜æ­å»ºåšå®¢å¹¶æ·±åº¦ä¼˜åŒ–ä¸€ç«™å¼å®Œå…¨æ•™ç¨‹</a></p></li></ul><hr><h1>Hexo æ’ä»¶å®‰è£…</h1><hr><hr><h2 id="ä»£ç é«˜äº®"><a class="header-anchor" href="#ä»£ç é«˜äº®">Â¶</a>ä»£ç é«˜äº®</h2><hr><p>ä» Hexo5.0 ç‰ˆæœ¬å¼€å§‹è‡ªå¸¦äº† prismjs ä»£ç è¯­æ³•é«˜äº®çš„æ”¯æŒï¼Œå¦‚æœåšå®¢å®‰è£…è¿‡ <code>hexo-prism-plugin</code> çš„æ’ä»¶ï¼Œé¡»æ‰§è¡Œ <code>npm uninstall hexo-prism-plugin</code> æ¥å¸è½½æ‰å®ƒï¼Œå¦åˆ™ç”Ÿæˆçš„ä»£ç ä¸­ä¼šæœ‰ <code>&amp;#123;</code> å’Œ <code>&amp;#125;</code> çš„è½¬ä¹‰å­—ç¬¦ã€‚</p><p>ä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹ <code>_config.yml</code> æ–‡ä»¶ä¸­ highlight.enable çš„å€¼ä¸º false ï¼Œå¹¶å°† prismjs.enable çš„å€¼è®¾ç½®ä¸º true ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">auto_detect</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span>  <span class="token key atrule">wrap</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">hljs</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prismjs</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">preprocess</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">tab_replace</span><span class="token punctuation">:</span> <span class="token string">''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»é¢˜ä¸­é»˜è®¤çš„ prismjs ä¸»é¢˜æ˜¯ Tomorrow Night ï¼Œå¦‚æœæƒ³å®šåˆ¶è‡ªå·±çš„ä¸»é¢˜ï¼Œå¯å‰å¾€ <a href="https://prismjs.com/download.html">prismjs ä¸‹è½½é¡µé¢</a>  å®šåˆ¶ä¸‹è½½è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ <code>css</code> æ–‡ä»¶ï¼Œç„¶åå°†æ­¤ <code>css</code> ä¸»é¢˜æ–‡ä»¶å–åä¸º <code>prism.css</code>ï¼Œæ›¿æ¢æ‰ Matery ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­çš„ <code>source/libs/prism/prism.css</code> æ–‡ä»¶ã€‚</p><hr><h2 id="æœç´¢"><a class="header-anchor" href="#æœç´¢">Â¶</a>æœç´¢</h2><hr><p>ä½¿ç”¨ <code>hexo-generator-search</code> çš„ Hexo æ’ä»¶æ¥å®ç°å†…å®¹æœç´¢ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">search</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> search.xml  <span class="token key atrule">field</span><span class="token punctuation">:</span> post<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><h2 id="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³"><a class="header-anchor" href="#ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³">Â¶</a>ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³</h2><hr><p>ä½¿ç”¨ <code>hexo-permalink-pinyin</code> çš„ Hexo æ’ä»¶ä½¿åœ¨ç”Ÿæˆæ–‡ç« æ—¶ç”Ÿæˆä¸­æ–‡æ‹¼éŸ³çš„æ°¸ä¹…é“¾æ¥ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-permalink-pinyin <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">permalink_pinyin</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">separator</span><span class="token punctuation">:</span> <span class="token string">'-'</span> <span class="token comment"># default: '-'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œå°±å¯ä»¥ç”Ÿæˆæ‹¼éŸ³é“¾æ¥ã€‚</p><hr><h2 id="æ–‡ç« ç”Ÿæˆæ°¸ä¹…é“¾æ¥"><a class="header-anchor" href="#æ–‡ç« ç”Ÿæˆæ°¸ä¹…é“¾æ¥">Â¶</a>æ–‡ç« ç”Ÿæˆæ°¸ä¹…é“¾æ¥</h2><hr><p>ä½¿ç”¨ <code>hexo-abbrlink</code> çš„ Hexo æ’ä»¶æ¥å®ç°æ–‡ç« ç”Ÿæˆæ°¸ä¹…é“¾æ¥ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-abbrlink <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">abbrlink</span><span class="token punctuation">:</span>     <span class="token key atrule">alg</span><span class="token punctuation">:</span> crc16 <span class="token comment">#ç®—æ³•ï¼š</span>    <span class="token key atrule">rep</span><span class="token punctuation">:</span> hex <span class="token comment">#è¾“å‡ºè¿›åˆ¶ï¼šåè¿›åˆ¶å’Œåå…­è¿›åˆ¶ï¼Œé»˜è®¤ä¸º10è¿›åˆ¶ã€‚ä¸¨decä¸ºåè¿›åˆ¶ï¼Œhexä¸ºåå…­è¿›åˆ¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å°† <code>_config.yml</code> æ–‡ä»¶ä¸­çš„ permalink çš„å€¼ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">permalink</span><span class="token punctuation">:</span> posts/<span class="token punctuation">:</span>abbrlink.html  <span class="token comment"># æ­¤å¤„å¯ä»¥è‡ªå·±è®¾ç½®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ :/abbrlink</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œå°±å¯ä»¥ç”Ÿæˆæ°¸ä¹…é“¾æ¥ã€‚ç”Ÿæˆå®Œåï¼ŒåŸ md æ–‡ä»¶çš„ Front-matter å†…ä¼šå¢åŠ  abbrlink å­—æ®µï¼Œå€¼ä¸ºç”Ÿæˆçš„ ID ã€‚</p><hr><h2 id="å¤–é“¾è·³è½¬"><a class="header-anchor" href="#å¤–é“¾è·³è½¬">Â¶</a>å¤–é“¾è·³è½¬</h2><hr><p>ä½¿ç”¨ <code>hexo-external-link</code> çš„ Hexo æ’ä»¶æ¥å®ç°å¤–é“¾è·³è½¬ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-external-link <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">hexo_external_link</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">enable_base64_encode</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">url_param_name</span><span class="token punctuation">:</span> <span class="token string">'u'</span>  <span class="token key atrule">html_file_name</span><span class="token punctuation">:</span> <span class="token string">'go.html'</span>  <span class="token key atrule">target_blank</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">link_rel</span><span class="token punctuation">:</span> <span class="token string">'external nofollow noopener noreferrer'</span>  <span class="token key atrule">domain</span><span class="token punctuation">:</span> <span class="token string">'your_domain'</span> <span class="token comment"># å¦‚æœå¼€å¯äº†é˜²ç›—é“¾ï¼Œå¡«å†™ä½ çš„åŸŸå</span>  <span class="token key atrule">safety_chain</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œå°±å¯ä»¥å®ç°å¤–é“¾è·³è½¬ã€‚</p><hr><h2 id="æ–‡ç« å­—æ•°ç»Ÿè®¡"><a class="header-anchor" href="#æ–‡ç« å­—æ•°ç»Ÿè®¡">Â¶</a>æ–‡ç« å­—æ•°ç»Ÿè®¡</h2><hr><p>ä½¿ç”¨ <code>hexo-wordcount</code> çš„ Hexo æ’ä»¶æ¥å®ç°åœ¨æ–‡ç« ä¸­ç»Ÿè®¡æ˜¾ç¤ºæ–‡ç« å­—æ•°ã€é˜…è¯»æ—¶é•¿ä¿¡æ¯ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i hexo-wordcount <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Matery ä¸»é¢˜ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œå°†å„ä¸ªæ–‡ç« å­—æ•°ç›¸å…³çš„é…ç½®æ¿€æ´»ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">postInfo</span><span class="token punctuation">:</span>  <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">update</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">wordCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è®¾ç½®æ–‡ç« å­—æ•°ç»Ÿè®¡ä¸º true</span>  <span class="token key atrule">totalCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># è®¾ç½®ç«™ç‚¹æ–‡ç« æ€»å­—æ•°ç»Ÿè®¡ä¸º true </span>  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># é˜…è¯»æ—¶é•¿</span>  <span class="token key atrule">readCount</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># é˜…è¯»æ¬¡æ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œå°±å¯ä»¥å®ç°æ–‡ç« å­—æ•°ç»Ÿè®¡ã€‚</p><hr><h2 id="æ·»åŠ -emoji-è¡¨æƒ…æ”¯æŒ"><a class="header-anchor" href="#æ·»åŠ -emoji-è¡¨æƒ…æ”¯æŒ">Â¶</a>æ·»åŠ  emoji è¡¨æƒ…æ”¯æŒ</h2><hr><p>ä½¿ç”¨ <code>hexo-filter-github-emojis</code> çš„ Hexo æ’ä»¶æ¥æ”¯æŒ emoji è¡¨æƒ…çš„ç”Ÿæˆï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-filter-github-emojis <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">githubEmojis</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">className</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>emoji  <span class="token key atrule">inject</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">styles</span><span class="token punctuation">:</span>  customEmojis<span class="token punctuation">:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œç„¶åå°±å¯ä»¥åœ¨æ–‡ç« ä¸­ç”¨ emoji è¯­æ³•å†™è¡¨æƒ…ã€‚</p><hr><h2 id="æ·»åŠ -RSS-è®¢é˜…æ”¯æŒ"><a class="header-anchor" href="#æ·»åŠ -RSS-è®¢é˜…æ”¯æŒ">Â¶</a>æ·»åŠ  RSS è®¢é˜…æ”¯æŒ</h2><hr><p>ä½¿ç”¨ <code>hexo-generator-feed</code> çš„ Hexo æ’ä»¶æ¥åš RSSï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feed</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> atom  <span class="token key atrule">path</span><span class="token punctuation">:</span> atom.xml  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">20</span>  <span class="token key atrule">hub</span><span class="token punctuation">:</span>  <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token key atrule">content_limit</span><span class="token punctuation">:</span> <span class="token number">140</span>  <span class="token key atrule">content_limit_delim</span><span class="token punctuation">:</span> <span class="token string">' '</span>  <span class="token key atrule">order_by</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>date<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œåœ¨ <code>public</code> æ–‡ä»¶å¤¹ä¸­çœ‹åˆ° <code>atom.xml</code> æ–‡ä»¶ï¼Œè¯´æ˜å·²å®‰è£…æˆåŠŸã€‚</p><hr><h2 id="å›¾ç‰‡æ‡’åŠ è½½"><a class="header-anchor" href="#å›¾ç‰‡æ‡’åŠ è½½">Â¶</a>å›¾ç‰‡æ‡’åŠ è½½</h2><hr><p>ä½¿ç”¨ <code>hexo-lazyload-image</code> çš„ Hexo æ’ä»¶æ¥å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-lazyload-image <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">lazyload</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token key atrule">onlypost</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token comment"># æ˜¯å¦åªå¯¹æ–‡ç« çš„å›¾ç‰‡åšæ‡’åŠ è½½</span>  <span class="token key atrule">loadingImg</span><span class="token punctuation">:</span> <span class="token comment"># eg ./images/loading.gif</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ‡’åŠ è½½ä¼šå’Œ gallery æ’ä»¶ä¼šå‘ç”Ÿå†²çªï¼Œç»“æœå¯èƒ½å°±æ˜¯ç‚¹å¼€å›¾ç‰‡ï¼Œå·¦ç¿»å³ç¿»éƒ½æ˜¯ loading image ã€‚è§£å†³æ–¹æ¡ˆæ˜¯ï¼š<br>ä¿®æ”¹ <code>/themes/matery/source/js</code> ä¸­çš„ <code>matery.js</code> æ–‡ä»¶åœ¨ç¬¬ 108 è¡ŒåŠ ä¸Šï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'img[data-original]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"href"</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">"data-original"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åšå®Œè¿™æ­¥ä¹‹åï¼Œè¿˜æœ‰ç‚¹å° Bug ï¼Œé¦–é¡µçš„ logo ç‚¹å‡»ä¼šç›´æ¥æ‰“å¼€ logo å›¾ï¼Œè€Œä¸æ˜¯è·³åˆ°é¦–é¡µã€‚ä¼ªè§£å†³æ–¹æ¡ˆï¼šæ‰“å¼€  <code>/themes/matery/layout/_partial/header.ejs</code> æ–‡ä»¶ï¼Œåœ¨ img å’Œ span çš„ä¸¤ä¸ªå¤´åŠ ä¸ª div ï¼š</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;div class="brand-logo"&gt;    &lt;a href="&lt;%- url_for() %&gt;" class="waves-effect waves-light"&gt;        &lt;div&gt;            &lt;% if (theme.logo !== undefined &amp;&amp; theme.logo.length &gt; 0) { %&gt;            &lt;img src="&lt;%= theme.logo %&gt;" class="logo-img" alt="LOGO"&gt;            &lt;% } %&gt;            &lt;span class="logo-span"&gt;&lt;%- config.title %&gt;&lt;/span&gt;        &lt;/div&gt;    &lt;/a&gt;&lt;/div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œå°±å¯ä»¥å®ç°å›¾ç‰‡æ‡’åŠ è½½ã€‚</p><hr><h2 id="æŠ˜å åŠŸèƒ½"><a class="header-anchor" href="#æŠ˜å åŠŸèƒ½">Â¶</a>æŠ˜å åŠŸèƒ½</h2><hr><p>ä½¿ç”¨ <code>hexo-sliding-spoiler</code> çš„ Hexo æ’ä»¶æ¥å®ç°æŠ˜å åŠŸèƒ½ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-sliding-spoiler <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">plugin</span><span class="token punctuation">:</span><span class="token punctuation">-</span> hexo<span class="token punctuation">-</span>sliding<span class="token punctuation">-</span>spoiler<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œå°±å¯ä»¥å®ç°æŠ˜å åŠŸèƒ½ã€‚</p><hr><h2 id="ä»£ç å‹ç¼©"><a class="header-anchor" href="#ä»£ç å‹ç¼©">Â¶</a>ä»£ç å‹ç¼©</h2><hr><p>ä½¿ç”¨ <code>hexo-neat</code> çš„ Hexo æ’ä»¶æ¥å®ç°ä»£ç å‹ç¼©ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-neat <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#hexo-neat ä¼˜åŒ–æé€Ÿæ’ä»¶ï¼ˆå»æ‰ HTMLã€cssã€js çš„ blankå­—ç¬¦ï¼‰</span><span class="token key atrule">neat_enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">neat_html</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'**/*.md'</span><span class="token key atrule">neat_css</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'**/*.min.css'</span><span class="token key atrule">neat_js</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">mangle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">output</span><span class="token punctuation">:</span>  <span class="token key atrule">compress</span><span class="token punctuation">:</span>  <span class="token key atrule">exclude</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">'**/*.min.js'</span>    <span class="token punctuation">-</span> <span class="token string">'**/**/instantpage.js'</span>    <span class="token punctuation">-</span> <span class="token string">'**/matery.js'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œå°±å¯ä»¥å®ç°ä»£ç å‹ç¼©äº†ã€‚</p><hr><p>æ›´å¤šçš„ Hexo æ’ä»¶å®‰è£…å‚è€ƒ <a href="https://hexo.io/plugins">Hexo å®˜ç½‘</a></p><hr><h1>Hexo æ·»åŠ  Valine è¯„è®ºç³»ç»Ÿ</h1><hr><hr><h2 id="Valine-ç®€ä»‹"><a class="header-anchor" href="#Valine-ç®€ä»‹">Â¶</a>Valine ç®€ä»‹</h2><hr><p><a href="https://valine.js.org/">valine</a>  è¯ç”Ÿäº 2017 å¹´ 8 æœˆ 7 æ—¥ï¼Œæ˜¯ä¸€æ¬¾åŸºäº  <a href="https://www.leancloud.cn/">LeanCloud</a>  çš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„æ— åç«¯è¯„è®ºç³»ç»Ÿã€‚ç†è®ºä¸Šæ”¯æŒä½†ä¸é™äºé™æ€åšå®¢ï¼Œç›®å‰å·²æœ‰ Hexo ã€Jekyll ã€Typecho ã€Hugo ã€Ghost ç­‰åšå®¢ç¨‹åºåœ¨ä½¿ç”¨  <a href="https://valine.js.org/">valine</a> ã€‚</p><p>valine å…·æœ‰å¿«é€Ÿå®‰å…¨ï¼ŒEmoji ğŸ˜‰ï¼Œæ— åç«¯å®ç°ï¼ŒMarkDown å…¨è¯­æ³•æ”¯æŒï¼Œè½»é‡æ˜“ç”¨ï¼Œæ–‡ç« é˜…è¯»é‡ç»Ÿè®¡ç­‰ä¼˜è´¨ç‰¹æ€§ã€‚</p><hr><h2 id="Valine-çš„é…ç½®"><a class="header-anchor" href="#Valine-çš„é…ç½®">Â¶</a>Valine çš„é…ç½®</h2><hr><ul><li>åœ¨ <a href="https://console.leancloud.cn/">LeanCloud å®˜ç½‘</a>æ³¨å†Œç™»å½•ï¼Œåˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼Œç„¶åè¿›å…¥åº”ç”¨ï¼Œç‚¹å‡»è®¾ç½®ï¼Œæ‰¾åˆ°åº”ç”¨å‡­è¯ï¼Œå¤åˆ¶ AppID å’Œ AppKey åˆ° Matery ä¸»é¢˜çš„ <code>config.yml</code> é…ç½®æ–‡ä»¶ä¸­çš„å¯¹åº”ä½ç½®</li></ul><p><img src="https://tao7app.files.wordpress.com/2023/01/02017.png" alt="AppID å’Œ AppKey"></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># valine è¯„è®ºæ¨¡å—çš„é…ç½®ï¼Œé»˜è®¤ä¸ºä¸æ¿€æ´»ï¼Œå¦‚è¦ä½¿ç”¨ï¼Œå°±è¯·æ¿€æ´»è¯¥é…ç½®é¡¹ï¼Œå¹¶è®¾ç½® appId å’Œ appKey ã€‚</span><span class="token key atrule">valine</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">appId</span><span class="token punctuation">:</span>  <span class="token comment"># å°†åº”ç”¨ key çš„ AppID è®¾ç½®åœ¨è¿™é‡Œ</span>  <span class="token key atrule">appKey</span><span class="token punctuation">:</span> <span class="token comment"># å°†åº”ç”¨ key çš„ AppKey è®¾ç½®åœ¨è¿™é‡Œ</span>  <span class="token key atrule">serverURLs</span><span class="token punctuation">:</span>  <span class="token comment"># https://ä½ çš„api</span>  <span class="token key atrule">notify</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># é‚®ç®±é€šçŸ¥</span>  <span class="token key atrule">verify</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># éªŒè¯ç  é»˜è®¤ä¸º false</span>  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># æ˜¯å¦å…è®¸æ¸¸å®¢è¯„è®º</span>  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> <span class="token string">'mm'</span> <span class="token comment"># å¤´åƒé£æ ¼ï¼Œé»˜è®¤ä¸º mm ï¼Œå¯è¿›å…¥ç½‘å€: mm/identicon/monsterid/wavatar/retro/hide</span>  <span class="token key atrule">pageSize</span><span class="token punctuation">:</span> <span class="token number">10</span>  <span class="token key atrule">placeholder</span><span class="token punctuation">:</span> <span class="token string">'just go go'</span> <span class="token comment"># Comment Box placeholder</span>  <span class="token key atrule">background</span><span class="token punctuation">:</span> /medias/comment_bg.png  <span class="token key atrule">coolpushkey</span><span class="token punctuation">:</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å‡çº§ valine ç‰ˆæœ¬</li></ul><p>è¿›å…¥ <a href="https://unpkg.com/valine/dist/">valine å®˜ç½‘</a>ï¼Œ é€‰æ‹© valine ç‰ˆæœ¬åç‚¹å‡» <code>Valine.min.js</code> ï¼Œç‚¹å‡» View Raw åå¤åˆ¶ å…¨éƒ¨å†…å®¹ï¼Œç²˜è´´æ›¿æ¢ Matery ä¸»é¢˜ä¸‹çš„ <code>/source/libs/valine/Valine.min.js</code> æ–‡ä»¶å…¨éƒ¨å†…å®¹ã€‚</p><p><img src="https://tao7app.files.wordpress.com/2023/01/135.png" alt="Valine.min.js æ–‡ä»¶"></p><p>ä¿®æ”¹ Matery  ä¸»é¢˜ä¸‹çš„ <code>_comfig.yml</code> æ–‡ä»¶å¦‚ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">valine</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">appId</span><span class="token punctuation">:</span> iTxfqh5e9IaRfiiVOTbIWoKa<span class="token punctuation">-</span>XXXXXX  <span class="token key atrule">appKey</span><span class="token punctuation">:</span> C5s5xGFErD1EtXXXXXXXX  <span class="token key atrule">verify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># æ˜¯å¦å¯ç”¨é˜²åƒåœ¾éªŒè¯</span>  <span class="token key atrule">notify</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment"># æ˜¯å¦å¼€å¯é‚®ä»¶æé†’(https://valine.js.org/notify.html)</span>  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> monsterid  <span class="token comment"># å¤´åƒæ ·å¼(https://valine.js.org/avatar.html) </span>  <span class="token key atrule">pageSize</span><span class="token punctuation">:</span> <span class="token number">10</span>  <span class="token key atrule">placeholder</span><span class="token punctuation">:</span> <span class="token string">'ãƒ¾ï¾‰â‰§âˆ€â‰¦)oæ¥å•Šï¼Œå¿«æ´»å•Š!'</span> <span class="token comment"># Comment Box placeholder</span>  <span class="token key atrule">background</span><span class="token punctuation">:</span> /medias/comment_bg.png <span class="token comment">#èƒŒæ™¯å›¾</span>  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">enableQQ</span><span class="token punctuation">:</span> <span class="token number">2733443175</span>  <span class="token key atrule">recordIP</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">requiredFields</span><span class="token punctuation">:</span>     <span class="token punctuation">-</span> nick    <span class="token punctuation">-</span> mail  <span class="token key atrule">guest_info</span><span class="token punctuation">:</span>     <span class="token punctuation">-</span> nick    <span class="token punctuation">-</span> mail    <span class="token punctuation">-</span> link  <span class="token key atrule">master</span><span class="token punctuation">:</span>     <span class="token punctuation">-</span> 123abc508165c8eba9a77f872xxxx046  <span class="token comment"># MD5 åŠ å¯†åçš„åšä¸»é‚®ç®±</span>  <span class="token key atrule">metaPlaceholder</span><span class="token punctuation">:</span>  <span class="token comment"># è¾“å…¥æ¡†çš„èƒŒæ™¯æ–‡å­—</span>    <span class="token key atrule">nick</span><span class="token punctuation">:</span> æ˜µç§° / QQ å·ï¼ˆå¿…å¡«ï¼‰    <span class="token key atrule">mail</span><span class="token punctuation">:</span> é‚®ç®±ï¼ˆç”¨äºè·å–é€šçŸ¥ä¿¡æ¯ï¼‰    <span class="token key atrule">link</span><span class="token punctuation">:</span>   <span class="token key atrule">lang</span><span class="token punctuation">:</span> zh<span class="token punctuation">-</span>CN  <span class="token key atrule">tagMeta</span><span class="token punctuation">:</span> <span class="token comment"># The String Array of Words to show Flag ï¼Œ[Just Only xCss Style modle]</span>    <span class="token punctuation">-</span> åšä¸»    <span class="token punctuation">-</span> å°ä¼™ä¼´    <span class="token punctuation">-</span> è®¿å®¢<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ›´å¤š valine é…ç½®å‚æ•°ä¿¡æ¯è¯·å‚è€ƒ <a href="https://valine.js.org/">valine å®˜æ–¹æ–‡æ¡£</a></p><ul><li>ç®¡ç†è¯„è®º</li></ul><p>ç‚¹å‡» <code>å­˜å‚¨ -&gt; ç»“æ„åŒ–æ•°æ®</code> ï¼Œé€‰æ‹©åˆ›å»º Class ï¼Œåç§°  <code>Comment</code> ï¼Œå…¶å®ƒä¿æŒé»˜è®¤ï¼Œä»¥å Hexo åšå®¢çš„è¯„è®ºå°±å¯åœ¨è¿™ä¸ª Class å†…æŸ¥çœ‹ï¼Œåˆ é™¤ç­‰ã€‚</p><p><img src="https://tao7app.files.wordpress.com/2023/01/40522.png" alt="åˆ›å»º Comment"></p><ul><li>æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡</li></ul><p>ç‚¹å‡» <code>å­˜å‚¨ -&gt; ç»“æ„åŒ–æ•°æ®</code> ï¼Œé€‰æ‹©åˆ›å»º Class ï¼Œåç§° <code>Counter</code> ï¼Œå…¶å®ƒä¿æŒé»˜è®¤ï¼Œä»¥åå°±å¯åœ¨è¿™ä¸ª Class å†…æŸ¥çœ‹ã€‚</p><p><img src="https://tao7app.files.wordpress.com/2023/01/40502.png" alt="åˆ›å»º Counter"></p><hr><h2 id="å¢åŠ ç‚¹å‡»è·³è½¬è¯„è®ºæŒ‰é’®"><a class="header-anchor" href="#å¢åŠ ç‚¹å‡»è·³è½¬è¯„è®ºæŒ‰é’®">Â¶</a>å¢åŠ ç‚¹å‡»è·³è½¬è¯„è®ºæŒ‰é’®</h2><hr><p>åœ¨ Matery ä¸»é¢˜ç›®å½• <code>/layout/_partial/</code>  ä¸‹æ–°å»º <code>back-comment.ejs</code> æ–‡ä»¶ , å¤åˆ¶ç²˜è´´å¦‚ä¸‹ä»£ç </p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> ç›´è¾¾è¯„è®º <span class="token operator">--</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"to_comment"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"comment-scroll"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>a <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn-floating btn-large waves-effect waves-light"</span> href<span class="token operator">=</span><span class="token string">"#vcomments"</span> title<span class="token operator">=</span><span class="token string">"ç›´è¾¾è¯„è®º"</span><span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"fas fa-comments"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ Matery ä¸»é¢˜ç›®å½• <code>/layout/_partial/</code>  ä¸‹çš„ <code>valine.ejs</code> æ–‡æœ«æ·»åŠ ä¸€æ¡å¦‚ä¸‹ä»£ç ï¼Œå¼•ç”¨ç¬¬ä¸€æ­¥çš„å†…å®¹ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token function">partial</span><span class="token punctuation">(</span><span class="token string">'_partial/back-comment.ejs'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åªåœ¨ valine å­˜åœ¨çš„é¡µé¢æ‰æ˜¾ç¤ºç›´è¾¾è¯„è®ºï¼Œä¸ºäº†é˜²æ­¢é¦–é¡µå…¶å®ƒåœ°æ–¹ä¹Ÿå‡ºç°æŒ‰é’®ã€‚åœ¨ Matery ä¸»é¢˜ç›®å½• <code>/source/css/</code> ä¸‹çš„ <code>matery.css</code> æ–‡ä»¶æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/*ç›´è¾¾è¯„è®ºæŒ‰é’®æ ·å¼*/</span><span class="token selector">.comment-scroll</span> <span class="token punctuation">{</span>    <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">bottom</span><span class="token punctuation">:</span> 135px<span class="token punctuation">;</span> # bottom ï¼š135px æ˜¯è·ç¦»åº•éƒ¨çš„é«˜åº¦    <span class="token property">padding-top</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 998<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">.comment-scroll .btn-floating</span> <span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to bottom right<span class="token punctuation">,</span> #FF9999 0%<span class="token punctuation">,</span> #ff6666 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">.comment-scroll .btn-floating i</span> <span class="token punctuation">{</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 1.8rem<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h1>å®ç° Valine è¯„è®ºç³»ç»Ÿé€šçŸ¥åŠŸèƒ½</h1><hr><p>Valine-Admin é¡¹ç›®æ˜¯ä¸€ä¸ªå¯¹  <a href="https://valine.js.org/">valine</a>  è¯„è®ºç³»ç»Ÿçš„æ‹“å±•åº”ç”¨ï¼Œå¯ä»¥å¢å¼º valine çš„é‚®ä»¶é€šçŸ¥åŠŸèƒ½ã€‚åŸºäº LeanCloud çš„äº‘å¼•æ“ä¸äº‘å‡½æ•°ï¼Œä¸»è¦å®ç°è¯„è®ºé‚®ä»¶é€šçŸ¥ã€è¯„è®ºç®¡ç†ã€è‡ªå®šä¹‰é‚®ä»¶é€šçŸ¥æ¨¡æ¿ç­‰åŠŸèƒ½ï¼Œè¿˜å¯ä»¥æä¾›é‚®ä»¶ <code>é€šçŸ¥ç«™é•¿</code> å’Œ <code>@é€šçŸ¥</code> çš„åŠŸèƒ½ã€‚å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><ul><li><p>ç¡®ä¿ valine çš„åŸºç¡€åŠŸèƒ½æ˜¯æ˜¯å¦æ­£å¸¸ï¼Œå‚è€ƒ <a href="https://valine.js.org/">valine å®˜æ–¹æ–‡æ¡£</a></p></li><li><p>è¿›å…¥ <a href="https://leancloud.cn/dashboard/applist.html#/apps">LeanCloud</a>  å¯¹åº”çš„ valine åº”ç”¨ä¸­</p></li><li><p>ç‚¹å‡» <code>äº‘å¼•æ“ -&gt; éƒ¨ç½²</code> ï¼Œé€‰æ‹© <code>Git æºç éƒ¨ç½²</code> ï¼Œå¡«å†™ä»£ç  <code>https://github.com/HCLonely/Valine-Admin</code> ï¼Œç‚¹å‡»ä¿å­˜ï¼Œåˆ†æ”¯æˆ–ç‰ˆæœ¬å·è¾“å…¥ <code>master</code> ï¼Œä¸‹è½½æœ€æ–°ä¾èµ–ï¼ˆå¯é€‰ï¼‰ï¼Œéƒ¨ç½²</p></li></ul><p><img src="https://tao7app.files.wordpress.com/2023/01/0547.png" alt=""></p><ul><li>è®¾ç½® <code>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</code> ï¼Œéœ€è¦è®¾ç½®äº‘å¼•æ“çš„ç¯å¢ƒå˜é‡ä»¥æä¾›å¿…è¦çš„ä¿¡æ¯ï¼Œå˜é‡å‚æ•°å‚è€ƒä¸‹é¢çš„ <code>é…ç½®é¡¹è¡¨</code></li></ul><table><thead><tr><th style="text-align:left">å˜é‡</th><th style="text-align:left">ç¤ºä¾‹</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">SITE_NAME</td><td style="text-align:left">blog</td><td style="text-align:left">[å¿…å¡«] ç½‘ç«™åç§°</td></tr><tr><td style="text-align:left">SITE_URL</td><td style="text-align:left"><a href="https://xxx.github.io">https://xxx.github.io</a></td><td style="text-align:left">[å¿…å¡«] ç½‘ç«™åœ°å€ï¼Œæœ€åä¸è¦åŠ  /</td></tr><tr><td style="text-align:left">SMTP_SERVICE</td><td style="text-align:left">QQ</td><td style="text-align:left">[å¿…å¡«] é‚®ä»¶æœåŠ¡æä¾›å•†ï¼Œæ”¯æŒ QQã€163ã€126ã€Gmail ä»¥åŠæ›´å¤š</td></tr><tr><td style="text-align:left">SMTP_USER</td><td style="text-align:left"><a href="mailto:xxxx@qq.com">xxxx@qq.com</a></td><td style="text-align:left">[å¿…å¡«] SMTPç™»å½•ç”¨æˆ·ï¼Œä¸€èˆ¬ä¸ºé‚®ç®±åœ°å€</td></tr><tr><td style="text-align:left">SMTP_PASS</td><td style="text-align:left">xxxx</td><td style="text-align:left">[å¿…å¡«] SMTPç™»å½•å¯†ç ï¼ŒQQ æˆæƒç ,<a href=""></a></td></tr><tr><td style="text-align:left">SENDER_NAME</td><td style="text-align:left">Valine è¯„è®ºæé†’</td><td style="text-align:left">[å¯é€‰] é€šçŸ¥æ¨¡æ¿</td></tr><tr><td style="text-align:left">ADMIN_URL</td><td style="text-align:left"><a href="https://xxx.leanapp.cn/">https://xxx.leanapp.cn/</a></td><td style="text-align:left">[å»ºè®®] Web ä¸»æœºäºŒçº§åŸŸåï¼Œç”¨äºè‡ªåŠ¨å”¤é†’</td></tr><tr><td style="text-align:left">TO_EMAIL</td><td style="text-align:left"><a href="mailto:xxxxx@gmail.com">xxxxx@gmail.com</a></td><td style="text-align:left">[å¯é€‰] æŒ‡å®šç«™é•¿æ”¶ä¿¡é‚®ç®±ï¼Œé»˜è®¤å€¼ä¸º SITE_USER ï¼Œç”¨äº SMTP å‘ä»¶äººä¸ç«™é•¿æ”¶ä»¶äººä¸ä¸€è‡´çš„æƒ…å†µä¸‹ä½¿ç”¨</td></tr><tr><td style="text-align:left">TEMPLATE_NAME</td><td style="text-align:left">rainbow</td><td style="text-align:left">[å¯é€‰] é€šçŸ¥é‚®ä»¶çš„æ¨¡æ¿ï¼ˆdefault å’Œ rainbowï¼‰ï¼Œå‚è€ƒé«˜çº§åŠŸèƒ½</td></tr></tbody></table><p><img src="https://tao7app.files.wordpress.com/2023/01/706.png" alt=""></p><ul><li>è®¾ç½®åå°ç®¡ç†ç™»å½•ä¿¡æ¯ï¼Œç‚¹å‡» <code>å­˜å‚¨ -&gt; ç»“æ„åŒ–æ•°æ®</code> ï¼Œé€‰æ‹© <code>_User -&gt; æ·»åŠ è¡Œ</code> ï¼Œåªéœ€è¦å¡«å†™ <code>password</code> ã€<code>username</code> ã€<code>email</code> è¿™ä¸‰ä¸ªå­—æ®µå³å¯, ä½¿ç”¨ email ä½œä¸ºè´¦å·ç™»é™†ã€password ä½œä¸ºè´¦å·å¯†ç ã€username ä»»æ„å³å¯ã€‚ï¼ˆä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œæ­¤ email å¿…é¡»ä¸ºé…ç½®ä¸­çš„ <code>SMTP_USER</code> æˆ– <code>TO_EMAIL</code> ï¼Œå¦åˆ™ä¸å…è®¸ç™»å½•ï¼‰</li></ul><p><img src="https://tao7app.files.wordpress.com/2023/01/35744.png" alt="valine è¯„è®ºé€šçŸ¥æ•ˆæœ"></p><hr><p>æ›´å¤šå†…å®¹è®¿é—® <a href="https://blog.17lai.site/posts/9b056c86/">åŸºäº Hexo çš„ matery ä¸»é¢˜æ­å»ºåšå®¢ä¸ªæ€§å®šåˆ¶ç¯‡</a></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
          <category> Matery </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> Valine </tag>
            
            <tag> Hexo </tag>
            
            <tag> Gitee </tag>
            
            <tag> Matery </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºçš„ MarkDown ä½¿ç”¨</title>
      <link href="/posts/62652.html"/>
      <url>/posts/62652.html</url>
      
        <content type="html"><![CDATA[<hr><h2 id="MarkDown-æ¦‚è¿°"><a href="#MarkDown-æ¦‚è¿°" class="headerlink" title="MarkDown æ¦‚è¿°"></a>MarkDown æ¦‚è¿°</h2><hr><h3 id="å®—æ—¨"><a href="#å®—æ—¨" class="headerlink" title="å®—æ—¨"></a>å®—æ—¨</h3><p><strong>MarkDown</strong> çš„ç›®æ ‡æ˜¯å®ç°ã€Œæ˜“è¯»æ˜“å†™ã€ã€‚</p><p>ä¸€ä»½ä½¿ç”¨ MarkDown æ ¼å¼æ’°å†™çš„æ–‡ä»¶åº”è¯¥å¯ä»¥ç›´æ¥ä»¥çº¯æ–‡æœ¬å‘å¸ƒï¼Œå¹¶ä¸”çœ‹èµ·æ¥ä¸ä¼šåƒæ˜¯ç”±è®¸å¤šæ ‡ç­¾æˆ–æ˜¯æ ¼å¼æŒ‡ä»¤æ‰€æ„æˆã€‚</p><h3 id="å…¼å®¹-HTML"><a href="#å…¼å®¹-HTML" class="headerlink" title="å…¼å®¹ HTML"></a>å…¼å®¹ HTML</h3><p><strong>MarkDown</strong> è¯­æ³•çš„ç›®æ ‡æ˜¯ï¼šæˆä¸ºä¸€ç§é€‚ç”¨äºç½‘ç»œçš„ä¹¦å†™è¯­è¨€ã€‚</p><p>MarkDown çš„æ„æƒ³ä¸æ˜¯è¦ä½¿å¾— HTML æ–‡æ¡£æ›´å®¹æ˜“ä¹¦å†™ã€‚MarkDown çš„è®¾è®¡ç†å¿µæ˜¯ï¼Œèƒ½è®©æ–‡æ¡£æ›´å®¹æ˜“è¯»ã€å†™å’Œéšæ„æ”¹ã€‚</p><hr><h2 id="æ ‡é¢˜"><a href="#æ ‡é¢˜" class="headerlink" title="æ ‡é¢˜"></a>æ ‡é¢˜</h2><hr><p>MarkDown æ ‡é¢˜æœ‰ä¸¤ç§æ ¼å¼ï¼š</p><ol><li>ä½¿ç”¨ <strong>=</strong> å’Œ <strong>-</strong> æ ‡è®°ä¸€çº§å’ŒäºŒçº§æ ‡é¢˜ã€‚</li></ol><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token title important">æˆ‘å±•ç¤ºçš„æ˜¯ä¸€çº§æ ‡é¢˜<span class="token punctuation">=================</span></span><span class="token title important">æˆ‘å±•ç¤ºçš„æ˜¯äºŒçº§æ ‡é¢˜<span class="token punctuation">-----------------</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>ä½¿ç”¨ <strong>#</strong> å·å¯è¡¨ç¤º 1-6 çº§æ ‡é¢˜ï¼Œä¸€çº§æ ‡é¢˜å¯¹åº”ä¸€ä¸ª # å·ï¼ŒäºŒçº§æ ‡é¢˜å¯¹åº”ä¸¤ä¸ª # å·ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li></ol><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token title important"><span class="token punctuation">#</span> ä¸€çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">##</span> äºŒçº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">###</span> ä¸‰çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">####</span> å››çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">#####</span> äº”çº§æ ‡é¢˜</span><span class="token title important"><span class="token punctuation">######</span> å…­çº§æ ‡é¢˜</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="æ®µè½ä¸æ–‡æœ¬æ¢è¡Œ"><a href="#æ®µè½ä¸æ–‡æœ¬æ¢è¡Œ" class="headerlink" title="æ®µè½ä¸æ–‡æœ¬æ¢è¡Œ"></a>æ®µè½ä¸æ–‡æœ¬æ¢è¡Œ</h2><hr><p>Markdown æ®µè½æ²¡æœ‰ç‰¹æ®Šçš„æ ¼å¼,ç›´æ¥ç¼–å†™æ–‡å­—, æ®µè½æ¢è¡Œæ˜¯ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šçš„ç©ºæ ¼åŠ ä¸Šå›è½¦/ä½¿ç”¨ä¸€ä¸ªç©ºè¡Œé‡æ–°å¼€å§‹ä¸€ä¸ªæ–°çš„æ®µè½/ä½¿ç”¨ HTML æ ‡ç­¾ <code>&lt;br&gt;</code> ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">1.</span> æ®µè½ (ä¸¤ä¸ªç©ºæ ¼+å›è½¦)  <span class="token list punctuation">2.</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span> æ®µè½ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>br</span><span class="token punctuation">&gt;</span></span>ï¼ˆä½¿ç”¨ HTML è¯­è¨€æ¢è¡Œæ ‡ç­¾ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h2 id="æ–‡æœ¬æ·»åŠ ç¼©è¿›"><a href="#æ–‡æœ¬æ·»åŠ ç¼©è¿›" class="headerlink" title="æ–‡æœ¬æ·»åŠ ç¼©è¿›"></a>æ–‡æœ¬æ·»åŠ ç¼©è¿›</h2><hr><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">#ä½¿ç”¨ HTML æ ‡ç­¾ &lt;style&gt; å®ç°&lt;p style="text-indent:1em"&gt;ä½ å¥½å‘€&lt;/p&gt;&lt;p style="text-indent:2em"&gt;ä½ å¥½å‘€&lt;/p&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><p style="text-indent:1em">ä½ å¥½å‘€</p><p style="text-indent:2em">ä½ å¥½å‘€</p><hr><h2 id="å­—ä½“"><a href="#å­—ä½“" class="headerlink" title="å­—ä½“"></a>å­—ä½“</h2><hr><p>MarkDown å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§å­—ä½“ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token italic"><span class="token punctuation">*</span><span class="token content">æ–œä½“æ–‡æœ¬</span><span class="token punctuation">*</span></span><span class="token bold"><span class="token punctuation">**</span><span class="token content">ç²—ä½“æ–‡æœ¬</span><span class="token punctuation">**</span></span><span class="token bold"><span class="token punctuation">**</span><span class="token content"><span class="token italic"><span class="token punctuation">*</span><span class="token content">ç²—æ–œä½“æ–‡æœ¬</span><span class="token punctuation">*</span></span></span><span class="token punctuation">**</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="é«˜äº®"><a href="#é«˜äº®" class="headerlink" title="é«˜äº®"></a>é«˜äº®</h2><hr><p>MarkDown ä½¿ç”¨è¿ç»­ä¸¤ä¸ªå•å·åŒ…æ‹¬é«˜äº®çš„éƒ¨åˆ†å®ç°å†…å®¹çš„é«˜äº®ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">==é«˜äº®å†…å®¹==<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="åˆ†å‰²çº¿"><a href="#åˆ†å‰²çº¿" class="headerlink" title="åˆ†å‰²çº¿"></a>åˆ†å‰²çº¿</h2><hr><p>åœ¨ä¸€è¡Œä¸­ç”¨ä¸‰ä¸ªä»¥ä¸Šçš„ <strong>æ˜Ÿå·</strong>ã€<strong>å‡å·</strong>ã€<strong>åº•çº¿</strong> æ¥å»ºç«‹ä¸€ä¸ªåˆ†éš”çº¿ï¼Œè¡Œå†…ä¸èƒ½æœ‰å…¶ä»–ä¸œè¥¿æˆ–åœ¨æ˜Ÿå·æˆ–æ˜¯å‡å·ä¸­é—´æ’å…¥ç©ºæ ¼ã€‚ä¸‹é¢æ¯ç§å†™æ³•éƒ½å¯ä»¥å»ºç«‹åˆ†éš”çº¿ï¼š</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">-</span> ***<span class="token hr punctuation">- ---</span><span class="token list punctuation">-</span> Â·Â·Â·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><h2 id="åˆ é™¤çº¿"><a href="#åˆ é™¤çº¿" class="headerlink" title="åˆ é™¤çº¿"></a>åˆ é™¤çº¿</h2><hr><p>å¦‚æœæ®µè½ä¸Šçš„æ–‡å­—è¦æ·»åŠ åˆ é™¤çº¿ï¼Œåªéœ€è¦åœ¨æ–‡å­—çš„ä¸¤ç«¯åŠ ä¸Šä¸¤ä¸ªæ³¢æµªçº¿å³å¯ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">~~delete<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="ä¸‹åˆ’çº¿"><a href="#ä¸‹åˆ’çº¿" class="headerlink" title="ä¸‹åˆ’çº¿"></a>ä¸‹åˆ’çº¿</h2><hr><p>ä¸‹åˆ’çº¿å¯ä»¥é€šè¿‡ <strong>HTML</strong> çš„æ ‡ç­¾æ¥å®ç°ã€‚</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;u&gt;å¸¦ä¸‹åˆ’çº¿æ–‡æœ¬&lt;/u&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="æ³¨é‡Š"><a href="#æ³¨é‡Š" class="headerlink" title="æ³¨é‡Š"></a>æ³¨é‡Š</h2><hr><p>ä½¿ç”¨ <strong>HTML</strong> çš„æ³¨é‡Šæ–¹å¼ã€‚</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;!-- æ³¨é‡Š --&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="è„šæ³¨"><a href="#è„šæ³¨" class="headerlink" title="è„šæ³¨"></a>è„šæ³¨</h2><hr><p>è„šæ³¨æ˜¯å¯¹æ–‡æœ¬çš„è¡¥å……è¯´æ˜ï¼ŒMarkDown è„šæ³¨æ ‡è¯†å¯ä»¥ä¸ºå­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼Œä½†æ˜¯æš‚ä¸æ”¯æŒä¸­æ–‡ã€‚è„šæ³¨å†…å®¹å¯ä¸ºä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">åˆ›å»ºè„šæ³¨æ ¼å¼ [^1] [^1] : èœé¸Ÿæ•™ç¨‹ -- å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯ï¼Œæ›´æ˜¯æ¢¦æƒ³!<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h2 id="æ–‡æœ¬å±…ä¸­"><a href="#æ–‡æœ¬å±…ä¸­" class="headerlink" title="æ–‡æœ¬å±…ä¸­"></a>æ–‡æœ¬å±…ä¸­</h2><hr><p>ä½¿ç”¨ <strong>HTML</strong> å¯ä»¥å°†æ–‡æœ¬å±…ä¸­ã€‚</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;center&gt;å±…ä¸­çš„å†…å®¹&lt;/center&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a>åˆ—è¡¨</h2><hr><p>MarkDown æ”¯æŒæœ‰åºåˆ—è¡¨å’Œæ— åºåˆ—è¡¨ã€‚</p><ul><li>æœ‰åºåˆ—è¡¨</li></ul><p>æœ‰åºåˆ—è¡¨ä½¿ç”¨æ•°å­—å¹¶åŠ ä¸Š <strong>.</strong> å·æ¥è¡¨ç¤ºã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">1.</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">2.</span> ç¬¬äºŒé¡¹<span class="token list punctuation">3.</span> ç¬¬ä¸‰é¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>æ— åºåˆ—è¡¨</li></ul><p>æ— åºåˆ—è¡¨ä½¿ç”¨ <strong>æ˜Ÿå·</strong> ï¼ˆ <code>*</code> ï¼‰ã€<strong>åŠ å·</strong> ï¼ˆ <code>+</code> ï¼‰æˆ–æ˜¯ <strong>å‡å·</strong> ï¼ˆ <code>-</code> ï¼‰ä½œä¸ºåˆ—è¡¨æ ‡è®°ã€‚</p> <pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">*</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">*</span> ç¬¬äºŒé¡¹<span class="token list punctuation">*</span> ç¬¬ä¸‰é¡¹------ åˆ†å‰²çº¿ ------<span class="token list punctuation">-</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">-</span> ç¬¬äºŒé¡¹<span class="token list punctuation">-</span> ç¬¬ä¸‰é¡¹------ åˆ†å‰²çº¿ ------<span class="token list punctuation">+</span> ç¬¬ä¸€é¡¹<span class="token list punctuation">+</span> ç¬¬äºŒé¡¹<span class="token list punctuation">+</span> ç¬¬ä¸‰é¡¹  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="åŒºå—"><a href="#åŒºå—" class="headerlink" title="åŒºå—"></a>åŒºå—</h2><hr><ol><li>åŒºå—å¼•ç”¨</li></ol><p>MarkDown åŒºå—å¼•ç”¨æ˜¯åœ¨æ®µè½å¼€å¤´ä½¿ç”¨ <strong>&gt;</strong> ç¬¦å· ï¼Œç„¶ååé¢ç´§è·Ÿ <strong>ä¸€ä¸ªç©ºæ ¼ç¬¦å·</strong> ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token blockquote punctuation">&gt;</span> åŒºå—å¼•ç”¨<span class="token blockquote punctuation">&gt;</span> èœé¸Ÿæ•™ç¨‹<span class="token blockquote punctuation">&gt;</span> å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯æ›´æ˜¯æ¢¦æƒ³<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="2"><li>åŒºå—ä½¿ç”¨åˆ—è¡¨</li></ol><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token blockquote punctuation">&gt;</span> åŒºå—ä¸­ä½¿ç”¨åˆ—è¡¨<span class="token blockquote punctuation">&gt;</span> <span class="token list punctuation">1.</span> ç¬¬ä¸€é¡¹<span class="token blockquote punctuation">&gt;</span> <span class="token list punctuation">2.</span> ç¬¬äºŒé¡¹<span class="token blockquote punctuation">&gt;</span> <span class="token list punctuation">+</span> ç¬¬ä¸€é¡¹<span class="token blockquote punctuation">&gt;</span> <span class="token list punctuation">+</span> ç¬¬äºŒé¡¹<span class="token blockquote punctuation">&gt;</span> <span class="token list punctuation">+</span> ç¬¬ä¸‰é¡¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>åˆ—è¡¨ä¸­ä½¿ç”¨åŒºå—</li></ol><p>å¦‚æœè¦åœ¨åˆ—è¡¨é¡¹ç›®å†…æ”¾è¿›åŒºå—ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ <strong>&gt;</strong> å‰æ·»åŠ å››ä¸ªç©ºæ ¼çš„ç¼©è¿›ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token list punctuation">*</span> ç¬¬ä¸€é¡¹  &gt; èœé¸Ÿæ•™ç¨‹    &gt; å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯æ›´æ˜¯æ¢¦æƒ³<span class="token list punctuation">*</span> ç¬¬äºŒé¡¹     &gt;æ¬¢è¿å…‰ä¸´<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="ä»£ç ä¸ä»£ç å—"><a href="#ä»£ç ä¸ä»£ç å—" class="headerlink" title="ä»£ç ä¸ä»£ç å—"></a>ä»£ç ä¸ä»£ç å—</h2><hr><ol><li>å•è¡Œä»£ç </li></ol><p>å¦‚æœæ˜¯å•è¡Œä»£ç æˆ–æ®µè½ä¸Šçš„ä¸€ä¸ªå‡½æ•°æˆ–ç‰‡æ®µçš„ä»£ç å¯ä»¥ç”¨ <strong>åå¼•å·å¯¹</strong> æŠŠå®ƒæ‹¬èµ·æ¥ã€‚</p><p><code>fmt.Println("Hello Word!)</code></p><ol start="2"><li>ä»£ç åŒºå—</li></ol><p>ä»£ç åŒºå—ä½¿ç”¨ <strong>ä¸‰ä¸ªåå¼•å·å¯¹</strong> åŒ…è£¹ä¸€æ®µä»£ç ï¼Œå¹¶æŒ‡å®šä¸€ç§è¯­è¨€ï¼ˆä¹Ÿå¯ä»¥ä¸æŒ‡å®šï¼‰ã€‚</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"Hello World!\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="ä¸Šæ ‡ä¸ä¸‹æ ‡"><a href="#ä¸Šæ ‡ä¸ä¸‹æ ‡" class="headerlink" title="ä¸Šæ ‡ä¸ä¸‹æ ‡"></a>ä¸Šæ ‡ä¸ä¸‹æ ‡</h2><hr><ol><li>ä¸Šæ ‡ä½¿ç”¨åŒ <strong>^</strong> æ‹¬ä½å†…å®¹</li></ol><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">x^2^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>ä¸‹æ ‡ä½¿ç”¨åŒ <strong>~</strong> æ‹¬ä½å†…å®¹</li></ol><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">H2<span class="token strike"><span class="token punctuation">~</span><span class="token content">0</span><span class="token punctuation">~</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="è¶…é“¾æ¥"><a href="#è¶…é“¾æ¥" class="headerlink" title="è¶…é“¾æ¥"></a>è¶…é“¾æ¥</h2><hr><ul><li>ä¸€ä¸ªæ–¹æ‹¬å· <strong>[]</strong> ï¼Œé‡Œé¢æ”¾ä¸Šé“¾æ¥çš„æ›¿ä»£æ–‡å­—</li><li>æ¥ç€ä¸€ä¸ªæ™®é€šæ‹¬å· <strong>()</strong> ï¼Œé‡Œé¢æ”¾ä¸Šç½‘å€</li></ul><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">é“¾æ¥ä¹Ÿå¯ä»¥ç”¨å˜é‡æ¥ä»£æ›¿ï¼Œæ–‡æ¡£æœ«å°¾é™„å¸¦å˜é‡åœ°å€ï¼šè¿™ä¸ªé“¾æ¥ç”¨ 1 ä½œä¸ºç½‘å€å˜é‡ <span class="token url">[<span class="token content">Google</span>][<span class="token variable">1</span>]</span>è¿™ä¸ªé“¾æ¥ç”¨ baidu ä½œä¸ºç½‘å€å˜é‡ <span class="token url">[<span class="token content">ç™¾åº¦</span>][<span class="token variable">baidu</span>]</span>ç„¶ååœ¨æ–‡æ¡£çš„ç»“å°¾ä¸ºå˜é‡èµ‹å€¼ï¼ˆç½‘å€ï¼‰[1]:http://www.google.com/[baidu]:http://www.baidu.com/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="æ’å…¥å›¾ç‰‡"><a href="#æ’å…¥å›¾ç‰‡" class="headerlink" title="æ’å…¥å›¾ç‰‡"></a>æ’å…¥å›¾ç‰‡</h2><hr><ul><li><p>å¼€å¤´ä¸€ä¸ª æ„Ÿå¹å· <strong>!</strong> </p></li><li><p>æ¥ç€ä¸€ä¸ª æ–¹æ‹¬å· <strong>[]</strong> ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„æ›¿ä»£æ–‡å­—</p></li><li><p>æ¥ç€ä¸€ä¸ª æ™®é€šæ‹¬å· <strong>()</strong> ï¼Œé‡Œé¢æ”¾ä¸Šå›¾ç‰‡çš„ç½‘å€ï¼Œæœ€åè¿˜å¯ä»¥ç”¨ <strong>å¼•å·</strong> åŒ…ä½å¹¶åŠ ä¸Šé€‰æ‹©æ€§çš„ <strong>title</strong> å±æ€§çš„æ–‡å­—</p></li></ul><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token url"><span class="token operator">!</span>[<span class="token content">å›¾ç‰‡</span>](<span class="token url">http://www.baidu.com/img/logo.png</span>)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><img src="https://tao7app.files.wordpress.com/2022/12/img_20221210_145354.jpg" alt="å›¾ç‰‡"></p><hr><h2 id="è®¾ç½®å›¾ç‰‡"><a href="#è®¾ç½®å›¾ç‰‡" class="headerlink" title="è®¾ç½®å›¾ç‰‡"></a>è®¾ç½®å›¾ç‰‡</h2><hr><p>é€šè¿‡ center å±…ä¸­ï¼ŒæŠŠ center æ¢æˆ left å’Œ right å¯ä»¥å®ç°å±…å·¦æˆ–è€…å±…å³ï¼Œwidth å’Œ height è°ƒæ§é«˜åº¦å’Œå®½åº¦ã€‚</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;div align=center&gt;&lt;img src="http://pic11.photophoto.cn/20090626/0036036341009653_b.jpg" width="251" height="350"&gt;&lt;/div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><div align="center"><img src="http://pic11.photophoto.cn/20090626/0036036341009653_b.jpg" width="251" height="350"></div><hr><hr><h2 id="æ’å…¥è§†é¢‘"><a href="#æ’å…¥è§†é¢‘" class="headerlink" title="æ’å…¥è§†é¢‘"></a>æ’å…¥è§†é¢‘</h2><hr><p>æ’å…¥è§†é¢‘å®ç°ä¾èµ–äº <strong>HTML</strong> ã€‚</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;video controls="" autoplay="" name="media"&gt;    &lt;source src="https://www.w3school.com.cn/example/html5/mov_bbb.mp4" type="video/mp4"&gt;&lt;/video&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><p><video controls="" autoplay="" name="media">    <source src="https://www.w3school.com.cn/example/html5/mov_bbb.mp4" type="video/mp4"><br></video></p><hr><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;iframe    width=100%    height=120px    src='//player.bilibili.com/player.html?aid=455564468&amp;bvid=BV1H541147nA&amp;cid=187808769&amp;page=1'    frameborder="0"    allowfullscreen&gt;&lt;/iframe&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><iframe width="100%" height="120px" src="//player.bilibili.com/player.html?aid=455564468&amp;bvid=BV1H541147nA&amp;cid=187808769&amp;page=1" frameborder="0" allowfullscreen=""></iframe><hr><ul><li><p>src é‡Œé¢å¡«è§†é¢‘åŸ URL</p></li><li><p>width æ˜¯è§†é¢‘å®½åº¦ï¼ˆå¯ä»¥å¡«ç™¾åˆ†æ¯”ï¼‰</p></li><li><p>height æ˜¯è§†é¢‘é«˜åº¦ï¼ˆå¯ä»¥å¡«ç™¾åˆ†æ¯”ï¼‰</p></li></ul><hr><h2 id="æ’å…¥éŸ³ä¹"><a href="#æ’å…¥éŸ³ä¹" class="headerlink" title="æ’å…¥éŸ³ä¹"></a>æ’å…¥éŸ³ä¹</h2><hr><p>æ’å…¥éŸ³ä¹å®ç°ä¾èµ–äº <strong>HTML</strong> ã€‚</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;div align=center&gt;&lt;iframe frameborder="no" marginwidth="0" marginheight="0" width=300 height=90 src="https://music.163.com/outchain/player?type=2&amp;id=34341360&amp;auto=0&amp;height=66"&gt;&lt;/iframe&gt;&lt;/div&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><div align="center"><iframe frameborder="no" marginwidth="0" marginheight="0" width="300" height="90" src="https://music.163.com/outchain/player?type=2&amp;id=34341360&amp;auto=0&amp;height=66"></iframe></div><ul><li><p>div ç”¨äºæ§åˆ¶æ ¼å¼ï¼Œè‹¥æ— åˆ™é»˜è®¤ä¸ºå±…å·¦</p></li><li><p>frameborder ç”¨äºè§„å®šæ˜¯å¦æ˜¾ç¤ºæ¡†æ¶å‘¨å›´çš„è¾¹æ¡†ï¼Œ1 ä¸ºæ˜¯ï¼Œ0 ä¸ºå¦</p></li><li><p>marginwidth åŠ marginheight è¡¨ç¤ºè·ç¦»è¾¹ç¼˜çš„åƒç´ å¤§å°</p></li><li><p>width åŠ height è¡¨ç¤ºæ’­æ”¾æ¡çš„é•¿åº¦å’Œå®½åº¦ src ä¸ºæ’­æ”¾é“¾æ¥ï¼Œå¯ä»¥åœ¨å¦‚ç½‘æ˜“äº‘éŸ³ä¹çš„ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨è·å–è¯¥é“¾æ¥ï¼ŒåŒæ—¶ä¹Ÿè·å¾—ä»¥ä¸‹ä»£ç ï¼Œå¹¶å¯ä»¥è‡ªè¡Œæ›´æ”¹ï¼›ä¹Ÿå¯å°†éŸ³é¢‘é“¾æ¥æ”¹ä¸ºè§†é¢‘é“¾æ¥ï¼Œä»è€Œæ’­æ”¾è§†é¢‘</p></li></ul><hr><h2 id="æ’å…¥è¡¨æ ¼"><a href="#æ’å…¥è¡¨æ ¼" class="headerlink" title="æ’å…¥è¡¨æ ¼"></a>æ’å…¥è¡¨æ ¼</h2><hr><p>è¾“å…¥ <code>|</code> è¡¨å¤´1 <code>|</code> è¡¨å¤´2 <code>|</code> å¹¶å›è½¦,å³å¯åˆ›å»ºä¸€ä¸ªåŒ…å« 2 åˆ—è¡¨ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown"><span class="token table"><span class="token table-header-row"><span class="token punctuation">|</span><span class="token table-header important"> å·¦å¯¹é½ </span><span class="token punctuation">|</span><span class="token table-header important"> å³å¯¹é½ </span><span class="token punctuation">|</span><span class="token table-header important"> ä¸­å¯¹é½ </span><span class="token punctuation">|</span></span><span class="token table-line"><span class="token punctuation">|</span> <span class="token punctuation">:----</span> <span class="token punctuation">|</span> <span class="token punctuation">----:</span> <span class="token punctuation">|</span> <span class="token punctuation">:---:</span> <span class="token punctuation">|</span></span><span class="token table-data-rows"><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span><span class="token table-data"> å•å…ƒæ ¼ </span><span class="token punctuation">|</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p>ç¬¬ä¸€è¡Œä¸ºè¡¨å¤´ï¼Œç¬¬äºŒè¡Œä¸ºåˆ†å‰²è¡¨å¤´å’Œä¸»ä½“éƒ¨åˆ†ï¼Œç¬¬ä¸‰è¡Œå¼€å§‹æ¯ä¸€è¡Œä¸ºä¸€ä¸ªè¡¨æ ¼è¡Œã€‚</p></li><li><p>åˆ—ä¸åˆ—ä¹‹é—´ç”¨ç®¡é“ç¬¦å· <code>|</code> éš”å¼€ï¼Œå¦‚æœä¸ä½¿ç”¨å¯¹é½æ ‡è®°ï¼Œå†…å®¹é»˜è®¤å·¦å¯¹é½ï¼Œè¡¨å¤´å±…ä¸­å¯¹é½</p></li></ul><hr><blockquote><p>-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½</p></blockquote><blockquote><p>:- è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½</p></blockquote><blockquote><p>:-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½</p></blockquote><hr><ul><li>ä¸ºäº†ç¾è§‚ï¼Œå¯ä»¥ä½¿ç”¨ç©ºæ ¼å¯¹é½ä¸åŒè¡Œçš„å•å…ƒæ ¼ï¼Œå¹¶åœ¨å·¦å³ä¸¤ä¾§éƒ½ä½¿ç”¨ <code>|</code> æ¥æ ‡è®°å•å…ƒæ ¼è¾¹ç•Œ</li><li>ä¸ºäº†ä½¿ MarkDown æ›´æ¸…æ™°ï¼Œ<code>|</code> å’Œ <code>-</code> ä¸¤ä¾§éœ€è¦è‡³å°‘æœ‰ä¸€ä¸ªç©ºæ ¼ï¼ˆæœ€å·¦ä¾§å’Œæœ€å³ä¾§çš„ <code>|</code> å¤–ä¸éœ€è¦ï¼‰</li></ul><hr><h2 id="MarkDown-ç¼–å†™åšæ–‡çš„æ›´å¤šæŠ€å·§"><a href="#MarkDown-ç¼–å†™åšæ–‡çš„æ›´å¤šæŠ€å·§" class="headerlink" title="MarkDown ç¼–å†™åšæ–‡çš„æ›´å¤šæŠ€å·§"></a>MarkDown ç¼–å†™åšæ–‡çš„æ›´å¤šæŠ€å·§</h2><hr><h3 id="1-æ”¯æŒ-HTML-å…ƒç´ "><a href="#1-æ”¯æŒ-HTML-å…ƒç´ " class="headerlink" title="1. æ”¯æŒ HTML å…ƒç´ "></a>1. æ”¯æŒ HTML å…ƒç´ </h3><p>ä¸åœ¨ MarkDown æ¶µç›–èŒƒå›´ä¹‹å†…çš„æ ‡ç­¾ï¼Œéƒ½å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£é‡Œé¢ç”¨ HTML æ’°å†™ã€‚</p><h3 id="2-è½¬ä¹‰"><a href="#2-è½¬ä¹‰" class="headerlink" title="2. è½¬ä¹‰"></a>2. è½¬ä¹‰</h3><p>MarkDown ä½¿ç”¨äº†å¾ˆå¤šç‰¹æ®Šç¬¦å·æ¥è¡¨ç¤ºç‰¹å®šçš„æ„ä¹‰ï¼Œå¦‚æœéœ€è¦æ˜¾ç¤ºç‰¹å®šçš„ç¬¦å·åˆ™éœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼ŒMarkDown ä½¿ç”¨åæ–œæ è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ã€‚</p><p>MarkDown æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·:</p><hr><ul><li>  <strong>\ åæ–œçº¿</strong></li><li>  <strong>` åå¼•å·</strong></li><li>  <strong>æ˜Ÿå· [*]</strong></li><li>  <strong>ä¸‹åˆ’çº¿</strong></li><li>  <strong>{} èŠ±æ‹¬å·</strong></li><li>  <strong>[] æ–¹æ‹¬å·</strong></li><li>  <strong>() å°æ‹¬å·</strong></li><li>  <strong># äº•å­—å·</strong></li><li>  <strong>+ åŠ å·</strong></li><li>  <strong>- å‡å·</strong></li><li>  <strong>. è‹±æ–‡å¥ç‚¹</strong></li><li>  <strong>! æ„Ÿå¹å·</strong></li></ul><hr><hr><h2 id="æ–‡å­—é¢œè‰²ã€å¤§å°ã€å­—ä½“èƒŒæ™¯è‰²"><a href="#æ–‡å­—é¢œè‰²ã€å¤§å°ã€å­—ä½“èƒŒæ™¯è‰²" class="headerlink" title="æ–‡å­—é¢œè‰²ã€å¤§å°ã€å­—ä½“èƒŒæ™¯è‰²"></a>æ–‡å­—é¢œè‰²ã€å¤§å°ã€å­—ä½“èƒŒæ™¯è‰²</h2><hr><h3 id="1-å­—ä½“å¤§å°"><a href="#1-å­—ä½“å¤§å°" class="headerlink" title="1. å­—ä½“å¤§å°"></a>1. å­—ä½“å¤§å°</h3><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">sizeä¸º1ï¼š&lt;font size="1"&gt;sizeä¸º1&lt;/font&gt;                                     sizeä¸º3ï¼š&lt;font size="3"&gt;sizeä¸º3&lt;/font&gt;sizeä¸º4ï¼š&lt;font size="4"&gt;sizeä¸º4&lt;/font&gt;sizeä¸º6ï¼š&lt;font size="6"&gt;sizeä¸º6&lt;/font&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>sizeä¸º1ï¼š<font size="1">sizeä¸º1</font>  </p><p>sizeä¸º3ï¼š<font size="3">sizeä¸º3</font></p><p>sizeä¸º4ï¼š<font size="4">sizeä¸º4</font></p><p>sizeä¸º6ï¼š<font size="6">sizeä¸º6</font></p><hr><h3 id="2-é¢œè‰²"><a href="#2-é¢œè‰²" class="headerlink" title="2.é¢œè‰²"></a>2.é¢œè‰²</h3><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;font color="#dd0000"&gt;æ–‡å­—é¢œè‰²&lt;/font&gt; <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><p><font color="#dd0000">æ–‡å­—é¢œè‰²</font> </p><hr><h3 id="3-èƒŒæ™¯è‰²"><a href="#3-èƒŒæ™¯è‰²" class="headerlink" title="3.èƒŒæ™¯è‰²"></a>3.èƒŒæ™¯è‰²</h3><p>MarkDown æœ¬èº«ä¸æ”¯æŒèƒŒæ™¯è‰²è®¾ç½®ï¼Œéœ€è¦é‡‡ç”¨å†…ç½® HTMML çš„æ–¹å¼å®ç°ï¼šå€ŸåŠ© <code>table</code> , <code>tr</code> , <code>td</code> ç­‰è¡¨æ ¼æ ‡ç­¾çš„ bgcolor å±æ€§æ¥å®ç°èƒŒæ™¯è‰²çš„åŠŸèƒ½ã€‚</p><pre class="line-numbers language-HTML" data-language="HTML"><code class="language-HTML">&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=orange&gt;èƒŒæ™¯è‰²æ˜¯ï¼šorange&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#FF00FF&gt;èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#7FFFD4&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#FF83FA&gt;èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#FF83FA&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#D1EEEE&gt;èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#D1EEEE&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#C0FF3E&gt;èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#C0FF3E&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;table&gt;&lt;tr&gt;&lt;td bgcolor=#54FF9F&gt;èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#54FF9F&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><table><tbody><tr><td bgcolor="orange">èƒŒæ™¯è‰²æ˜¯ï¼šorange</td></tr></tbody></table><table><tbody><tr><td bgcolor="#FF00FF">èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#7FFFD4</td></tr></tbody></table><table><tbody><tr><td bgcolor="#FF83FA">èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#FF83FA</td></tr></tbody></table><table><tbody><tr><td bgcolor="#D1EEEE">èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#D1EEEE</td></tr></tbody></table><table><tbody><tr><td bgcolor="#C0FF3E">èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#C0FF3E</td></tr></tbody></table><table><tbody><tr><td bgcolor="#54FF9F">èƒŒæ™¯è‰²çš„è®¾ç½®æ˜¯æŒ‰ç…§åå…­è¿›åˆ¶é¢œè‰²å€¼ï¼š#54FF9F</td></tr></tbody></table><hr><hr><h2 id="ä½¿ç”¨-LaTex-æ•°å­¦å…¬å¼"><a href="#ä½¿ç”¨-LaTex-æ•°å­¦å…¬å¼" class="headerlink" title="ä½¿ç”¨ LaTex æ•°å­¦å…¬å¼"></a>ä½¿ç”¨ LaTex æ•°å­¦å…¬å¼</h2><hr><h3 id="1-è¡Œå†…å…¬å¼"><a href="#1-è¡Œå†…å…¬å¼" class="headerlink" title="1.è¡Œå†…å…¬å¼"></a>1.è¡Œå†…å…¬å¼</h3><p>ä½¿ç”¨ä¸¤ä¸ª <strong>$</strong> ç¬¦å·å¼•ç”¨å…¬å¼ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">$å…¬å¼$<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-è¡Œé—´å…¬å¼"><a href="#2-è¡Œé—´å…¬å¼" class="headerlink" title="2.è¡Œé—´å…¬å¼"></a>2.è¡Œé—´å…¬å¼</h3><p>ä½¿ç”¨ä¸¤å¯¹ <strong>$$</strong> ç¬¦å·å¼•ç”¨å…¬å¼ã€‚</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">$$å…¬å¼$$ <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ <a href="https://www.mathjax.org/">MarkDown æ•°å­¦ç¬¦å·å®˜ç½‘</a>ä½¿ç”¨ä¸­ï¼Œè¯¦ç»†ä»‹ç»äº†ä¸€äº›å¸¸ç”¨çš„æ•°å­¦å…¬å¼ã€‚</p><hr><p>æ›´å¤šå†…å®¹å‚è€ƒ <a href="http://markdown.p2hp.com/basic-syntax/">MarkDown ä¸­æ–‡ç½‘</a></p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      
      
      <categories>
          
          <category> MarkDown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MarkDown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go Web ç¼–ç¨‹åŸç†</title>
      <link href="/posts/54137.html"/>
      <url>/posts/54137.html</url>
      
        <content type="html"><![CDATA[<hr><h1 id="WEB-ç¼–ç¨‹åŸç†"><a href="#WEB-ç¼–ç¨‹åŸç†" class="headerlink" title="WEB ç¼–ç¨‹åŸç†"></a>WEB ç¼–ç¨‹åŸç†</h1><hr><hr><h3 id="Web-æœåŠ¡å™¨çš„å·¥ä½œè¿‡ç¨‹"><a href="#Web-æœåŠ¡å™¨çš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="Web æœåŠ¡å™¨çš„å·¥ä½œè¿‡ç¨‹"></a>Web æœåŠ¡å™¨çš„å·¥ä½œè¿‡ç¨‹</h3><hr><p>ä¸€ä¸ª Web æœåŠ¡å™¨ä¹Ÿè¢«ç§°ä¸º HTTP æœåŠ¡å™¨ï¼Œå®ƒé€šè¿‡ HTTP åè®®ä¸å®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯éæŒä¹…è¿æ¥çš„ï¼Œå½“æœåŠ¡å™¨å‘é€äº†åº”ç­”åå°±ä¸å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è¯·æ±‚ã€‚</p><blockquote><p>æµè§ˆå™¨æœ¬èº«æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œæ ¹æ®ç”¨æˆ·è¾“å…¥çš„ URL ï¼Œæµè§ˆå™¨é¦–å…ˆä¼šè¯·æ±‚ DNS æœåŠ¡å™¨ï¼Œé€šè¿‡ DNS è·å–ç›¸åº”åŸŸåå¯¹åº”çš„ IP ã€‚</p></blockquote><blockquote><p>é€šè¿‡ IP åœ°å€æ‰¾åˆ° IP å¯¹åº”çš„æœåŠ¡å™¨åï¼Œå»ºç«‹ TCP è¿æ¥ã€‚</p></blockquote><blockquote><p>æµè§ˆå™¨å‘é€å®Œ HTTP Requestï¼ˆè¯·æ±‚ï¼‰åŒ…ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åŒ…ä¹‹åæ‰å¼€å§‹å¤„ç†è¯·æ±‚åŒ…ï¼ŒæœåŠ¡å™¨è°ƒç”¨è‡ªèº«æœåŠ¡ï¼Œè¿”å› HTTP Responseï¼ˆå“åº”ï¼‰åŒ…</p></blockquote><blockquote><p>å®¢æˆ·ç«¯æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„å“åº”åå¼€å§‹æ¸²æŸ“è¯¥ Response åŒ…é‡Œçš„ä¸»ä½“ï¼ˆbodyï¼‰ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°å…¨éƒ¨çš„å†…å®¹åï¼Œæ–­å¼€ä¸è¯¥æœåŠ¡å™¨ä¹‹é—´çš„TCPè¿æ¥ã€‚</p></blockquote><hr><p><img src="https://tao7app.files.wordpress.com/2023/01/img_20230105_132934.jpg" alt="è®¿é—®ä¸€ä¸ªWebç«™ç‚¹çš„è¿‡ç¨‹"></p><p>è®¿é—®ä¸€ä¸ª Web ç«™ç‚¹çš„è¿‡ç¨‹ï¼š</p><ul><li><p>å®¢æˆ·ç«¯é€šè¿‡ TCP/IP åè®®å»ºç«‹åˆ°æœåŠ¡å™¨çš„ TCP è¿æ¥ã€‚</p></li><li><p>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ HTTP åè®®è¯·æ±‚åŒ…ï¼Œè¯·æ±‚æœåŠ¡å™¨é‡Œçš„èµ„æºæ–‡æ¡£ã€‚</p></li><li><p>æœåŠ¡å™¨å‘å®¢æˆ·æœºå‘é€ HTTP åè®®åº”ç­”åŒ…ï¼Œå¦‚æœè¯·æ±‚çš„èµ„æºåŒ…å«æœ‰åŠ¨æ€è¯­è¨€çš„å†…å®¹ï¼Œé‚£ä¹ˆæœåŠ¡å™¨ä¼šè°ƒç”¨åŠ¨æ€è¯­è¨€çš„è§£é‡Šå¼•æ“è´Ÿè´£å¤„ç†â€œåŠ¨æ€å†…å®¹â€ï¼Œå¹¶å°†å¤„ç†å¾—åˆ°çš„æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p></li><li><p>å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ–­å¼€ï¼Œç”±å®¢æˆ·ç«¯è§£é‡Š HTML æ–‡æ¡£ï¼Œåœ¨å®¢æˆ·ç«¯å±å¹•ä¸Šæ¸²æŸ“å›¾å½¢ç»“æœã€‚</p></li></ul><hr><h2 id="URI-URL-å’Œ-DNS-è§£æ"><a href="#URI-URL-å’Œ-DNS-è§£æ" class="headerlink" title="URI , URL å’Œ DNS è§£æ"></a>URI , URL å’Œ DNS è§£æ</h2><hr><h3 id="URI"><a href="#URI" class="headerlink" title="URI"></a><strong>URI</strong></h3><p>URI (Uniform Resource Identifierï¼Œç»Ÿä¸€èµ„æºæ ‡å¿—ç¬¦)ï¼Œç”¨æ¥æ ‡è¯† Web ä¸Šæ¯ä¸€ç§å¯ç”¨èµ„æºï¼Œä¾‹å¦‚ï¼š HTML æ–‡æ¡£ã€å›¾åƒã€è§†é¢‘ç‰‡æ®µã€ç¨‹åºç­‰éƒ½ç”±ä¸€ä¸ª URI è¿›è¡Œæ ‡è¯†ã€‚</p><p>URI é€šå¸¸ç”±èµ„æºçš„å‘½åæœºåˆ¶ï¼Œæ ‡å‡†å­˜æ”¾èµ„æºçš„ä¸»æœºåï¼Œèµ„æºè‡ªèº«çš„åç§°ç»„æˆã€‚</p><h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a><strong>URL</strong></h3><p>URLï¼ˆUniform Resource Locatorï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰ç”¨äºæè¿°ä¸€ä¸ªç½‘ç»œä¸Šçš„èµ„æºï¼ŒåŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š</p><p><code>scheme://host[:port#]/path/.../[?query-string][#anchor]</code></p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">scheme        // æŒ‡å®šä½å±‚ä½¿ç”¨çš„åè®®ï¼ˆä¾‹å¦‚ï¼šhttp, https, ftpï¼‰host          // HTTP æœåŠ¡å™¨çš„ IP åœ°å€æˆ–è€…åŸŸåport          // HTTP æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£æ˜¯ 80ï¼ˆå¯ä»¥çœç•¥ï¼‰ï¼Œå¦‚æœä½¿ç”¨äº†åˆ«çš„ç«¯å£ï¼Œå¿…é¡»æŒ‡æ˜ï¼Œä¾‹å¦‚ http://cqupt.edu.cn:8080/    path         // è®¿é—®èµ„æºçš„è·¯å¾„ query-string  // å‘é€ç»™ http æœåŠ¡å™¨çš„æ•°æ® anchor        // é”š<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ Go è¯­è¨€ä¸­ï¼ŒURL ç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> URI <span class="token keyword">struct</span> <span class="token punctuation">{</span>Scheme <span class="token builtin">string</span>     <span class="token comment">// æ–¹æ¡ˆ</span>Opaque <span class="token builtin">string</span>     <span class="token comment">// ç¼–ç åçš„ä¸é€æ˜æ•°æ®</span>User <span class="token operator">*</span>Userinfo    <span class="token comment">// åŸºæœ¬éªŒè¯æ–¹å¼ä¸­ username å’Œ password ä¿¡æ¯ </span>Host <span class="token builtin">string</span>       <span class="token comment">// ä¸»æœºå­—æ®µè¯·æ±‚å¤´</span>Path <span class="token builtin">string</span>       <span class="token comment">// è·¯å¾„</span>RawPath <span class="token builtin">string</span>ForceQuery <span class="token builtin">bool</span> RawQuery <span class="token builtin">string</span>   <span class="token comment">// æŸ¥è¯¢å­—æ®µ</span>Fragment <span class="token builtin">string</span>   <span class="token comment">// åˆ†ç‰‡å­—æ®µ </span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="DNS-è§£æ"><a href="#DNS-è§£æ" class="headerlink" title="DNS è§£æ"></a><strong>DNS è§£æ</strong></h3><p>DNSï¼ˆDomain Name Systemï¼‰æ˜¯â€œåŸŸåç³»ç»Ÿâ€çš„è‹±æ–‡ç¼©å†™ï¼Œæ˜¯ä¸€ç§ç»„ç»‡æˆåŸŸå±‚æ¬¡ç»“æ„çš„è®¡ç®—æœºå’Œç½‘ç»œæœåŠ¡å‘½åç³»ç»Ÿï¼Œç”¨äº TCP/IP ç½‘ç»œï¼Œå°†ä¸»æœºåæˆ–åŸŸåè½¬æ¢ä¸ºå®é™… IP åœ°å€ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2023/01/img_20230105_132951.jpg" alt="DNSå·¥ä½œåŸç†"></p><p>DNS è§£æçš„æ•´ä¸ªè¿‡ç¨‹ï¼š</p><hr><p><img src="https://tao7app.files.wordpress.com/2023/01/img_20230105_133012.jpg" alt="DNSè§£æçš„æ•´ä¸ªæµç¨‹"></p><ol><li><p>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ <code>www.qq.com</code> åŸŸåï¼Œæ“ä½œç³»ç»Ÿä¼šå…ˆæ£€æŸ¥è‡ªå·±æœ¬åœ°çš„ <code>hosts</code> æ–‡ä»¶æ˜¯å¦æœ‰è¿™ä¸ªç½‘å€æ˜ å°„å…³ç³»ï¼Œå¦‚æœæœ‰ï¼Œå°±å…ˆè°ƒç”¨è¿™ä¸ª IP åœ°å€æ˜ å°„ï¼Œå®ŒæˆåŸŸåè§£æã€‚</p></li><li><p>å¦‚æœ <code>hosts</code> é‡Œæ²¡æœ‰è¿™ä¸ªåŸŸåçš„æ˜ å°„ï¼Œåˆ™æŸ¥æ‰¾æœ¬åœ° DNS è§£æå™¨ç¼“å­˜ï¼Œæ˜¯å¦æœ‰è¿™ä¸ªç½‘å€æ˜ å°„å…³ç³»ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥è¿”å›ï¼Œå®ŒæˆåŸŸåè§£æã€‚</p></li><li><p>å¦‚æœ <code>hosts</code> ä¸æœ¬åœ° DNS è§£æå™¨ç¼“å­˜éƒ½æ²¡æœ‰ç›¸åº”çš„ç½‘å€æ˜ å°„å…³ç³»ï¼Œé¦–å…ˆä¼šæ‰¾ TCP/IP å‚æ•°ä¸­è®¾ç½®çš„é¦–é€‰ DNS æœåŠ¡å™¨ï¼ˆæœ¬åœ° DNS æœåŠ¡å™¨ï¼‰ï¼Œå½“æ­¤æœåŠ¡å™¨æ”¶åˆ°æŸ¥è¯¢æ—¶ï¼Œå¦‚æœè¦æŸ¥è¯¢çš„åŸŸååŒ…å«åœ¨æœ¬åœ°é…ç½®åŒºåŸŸèµ„æºä¸­ï¼Œåˆ™è¿”å›è§£æç»“æœç»™å®¢æˆ·æœºï¼Œå®ŒæˆåŸŸåè§£æï¼Œæ­¤è§£æå…·æœ‰æƒå¨æ€§ã€‚</p></li><li><p>å¦‚æœè¦æŸ¥è¯¢çš„åŸŸåï¼Œä¸ç”±æœ¬åœ° DNS æœåŠ¡å™¨åŒºåŸŸè§£æï¼Œä½†è¯¥æœåŠ¡å™¨å·²ç¼“å­˜äº†æ­¤ç½‘å€æ˜ å°„å…³ç³»ï¼Œåˆ™è°ƒç”¨è¿™ä¸ª IP åœ°å€æ˜ å°„ï¼Œå®ŒæˆåŸŸåè§£æï¼Œæ­¤è§£æä¸å…·æœ‰æƒå¨æ€§ã€‚</p></li><li><p>å¦‚æœæœ¬åœ° DNS æœåŠ¡å™¨æœ¬åœ°åŒºåŸŸæ–‡ä»¶ä¸ç¼“å­˜è§£æéƒ½å¤±æ•ˆï¼Œåˆ™æ ¹æ®æœ¬åœ° DNS æœåŠ¡å™¨çš„è®¾ç½®ï¼ˆæ˜¯å¦è®¾ç½®è½¬å‘å™¨ï¼‰è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æœæœªç”¨è½¬å‘æ¨¡å¼ï¼Œæœ¬åœ° DNS å°±æŠŠè¯·æ±‚å‘è‡³ â€œæ ¹ DNS æœåŠ¡å™¨â€ï¼Œâ€œæ ¹ DNS æœåŠ¡å™¨â€æ”¶åˆ°è¯·æ±‚åä¼šåˆ¤æ–­è¿™ä¸ªåŸŸåï¼ˆ.comï¼‰ç”±è°æ¥æˆæƒç®¡ç†ï¼Œå¹¶ä¼šè¿”å›ä¸€ä¸ªè´Ÿè´£è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨çš„ä¸€ä¸ª IP ã€‚æœ¬åœ° DNS æœåŠ¡å™¨æ”¶åˆ° IP ä¿¡æ¯åï¼Œå°†ä¼šè”ç³»è´Ÿè´£ <code>.com</code> åŸŸçš„è¿™å°æœåŠ¡å™¨ã€‚è¿™å°è´Ÿè´£ <code>.com</code> åŸŸçš„æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå¦‚æœè‡ªå·±æ— æ³•è§£æï¼Œå®ƒå°±ä¼šæ‰¾ä¸€ä¸ªç®¡ç† <code>.com</code> åŸŸçš„ä¸‹ä¸€çº§ DNS æœåŠ¡å™¨åœ°å€ï¼ˆ<code>qq.com</code>ï¼‰ç»™æœ¬åœ° DNS æœåŠ¡å™¨ã€‚å½“æœ¬åœ° DNS æœåŠ¡å™¨æ”¶åˆ°è¿™ä¸ªåœ°å€åï¼Œå°±ä¼šæ‰¾ <code>qq.com</code> åŸŸæœåŠ¡å™¨ï¼Œé‡å¤ä¸Šé¢çš„åŠ¨ä½œï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œç›´è‡³æ‰¾åˆ° <code>www.qq.com</code> ä¸»æœºã€‚</p></li><li><p>å¦‚æœç”¨çš„æ˜¯è½¬å‘æ¨¡å¼ï¼Œæ­¤ DNS æœåŠ¡å™¨å°±ä¼šæŠŠè¯·æ±‚è½¬å‘è‡³ä¸Šä¸€çº§ DNS æœåŠ¡å™¨ï¼Œç”±ä¸Šä¸€çº§æœåŠ¡å™¨è¿›è¡Œè§£æï¼Œä¸Šä¸€çº§æœåŠ¡å™¨å¦‚æœä¸èƒ½è§£æï¼Œæ‰¾æ ¹ DNS æˆ–æŠŠè½¬è¯·æ±‚è½¬è‡³ä¸Šä¸Šçº§ï¼Œä»¥æ­¤å¾ªç¯ã€‚ä¸ç®¡æ˜¯æœ¬åœ° DNS æœåŠ¡å™¨ç”¨æ˜¯å¦è½¬å‘ï¼Œè¿˜æ˜¯æ ¹æç¤ºï¼Œæœ€åéƒ½æ˜¯æŠŠç»“æœè¿”å›ç»™æœ¬åœ° DNS æœåŠ¡å™¨ï¼Œç”±æ­¤ DNS æœåŠ¡å™¨å†è¿”å›ç»™å®¢æˆ·æœºã€‚</p></li></ol><p>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæœ€åè·å–çš„æ˜¯ IP åœ°å€ï¼Œå°±æ˜¯æµè§ˆå™¨æœ€åå‘èµ·è¯·æ±‚çš„æ—¶å€™æ˜¯åŸºäº IP æ¥å’ŒæœåŠ¡å™¨åšä¿¡æ¯äº¤äº’çš„ã€‚</p><hr><h2 id="HTTP-åè®®è¯¦è§£"><a href="#HTTP-åè®®è¯¦è§£" class="headerlink" title="HTTP åè®®è¯¦è§£"></a>HTTP åè®®è¯¦è§£</h2><hr><h3 id="HTTP-åè®®çš„åŸºæœ¬æ¦‚å¿µ"><a href="#HTTP-åè®®çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="HTTP åè®®çš„åŸºæœ¬æ¦‚å¿µ"></a>HTTP åè®®çš„åŸºæœ¬æ¦‚å¿µ</h3><p>è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTPï¼‰æ˜¯åˆ†å¸ƒå¼ã€åä½œçš„ã€è¶…åª’ä½“ä¿¡æ¯ç³»ç»Ÿçš„åº”ç”¨å±‚åè®®ã€‚HTTP æ˜¯ä¸€ç§è®© WebæœåŠ¡å™¨ä¸æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰é€šè¿‡ Internet å‘é€ä¸æ¥æ”¶æ•°æ®çš„åè®®ï¼Œå®ƒå»ºç«‹åœ¨ TCP åè®®ä¹‹ä¸Šï¼Œä¸€èˆ¬é‡‡ç”¨ TCP çš„ <code>80</code> ç«¯å£ï¼Œæ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„è¯·æ±‚/å“åº”åè®®ã€‚</p><p>åœ¨ HTTP åè®®ä¸­ï¼Œå®¢æˆ·ç«¯æ€»æ˜¯é€šè¿‡å»ºç«‹ä¸€ä¸ªè¿æ¥ä¸å‘é€ä¸€ä¸ª HTTP è¯·æ±‚æ¥å‘èµ·ä¸€ä¸ªäº‹åŠ¡ã€‚æœåŠ¡å™¨ä¸èƒ½ä¸»åŠ¨å»ä¸å®¢æˆ·ç«¯è”ç³»ï¼Œä¹Ÿä¸èƒ½ç»™å®¢æˆ·ç«¯å‘å‡ºä¸€ä¸ªå›è°ƒè¿æ¥ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯éƒ½å¯ä»¥æå‰ä¸­æ–­ä¸€ä¸ªè¿æ¥ã€‚</p><h3 id="HTTP-è¯·æ±‚"><a href="#HTTP-è¯·æ±‚" class="headerlink" title="HTTP è¯·æ±‚"></a>HTTP è¯·æ±‚</h3><p>å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡å™¨ç«¯çš„è¯·æ±‚ä¿¡æ¯ç”±è¯·æ±‚è¡Œï¼ˆRequest Lineï¼‰ï¼Œè¯·æ±‚ï¼ˆRequest Headerï¼‰ï¼Œè¯·æ±‚ä½“ï¼ˆRequest Bodyï¼‰ç»„æˆã€‚ header å’Œ body ä¹‹é—´æœ‰ä¸ªç©ºè¡Œã€‚</p><ul><li>è¯·æ±‚è¡Œ</li></ul><p>è¯·æ±‚è¡Œç”±è¯·æ±‚æ–¹æ³•ï¼ŒURI ã€HTTPåè®®å’Œåè®®ç‰ˆæœ¬ç»„æˆã€‚</p><table><thead><tr><th align="center">è¯·æ±‚æ–¹æ³•</th><th align="left">æ–¹æ³•æè¿°</th></tr></thead><tbody><tr><td align="center">GET</td><td align="left">è¯·æ±‚é¡µé¢ï¼Œå¹¶è¿”å›é¡µé¢å†…å®¹</td></tr><tr><td align="center">HEAD</td><td align="left">ç±»ä¼¼äºGETè¯·æ±‚ï¼Œåªä¸è¿‡è¿”å›çš„å“åº”ä¸­æ²¡æœ‰å…·ä½“çš„å†…å®¹ï¼Œç”¨äºè·å–æŠ¥å¤´</td></tr><tr><td align="center">POST</td><td align="left">å¤§å¤šç”¨äºæäº¤è¡¨å•æˆ–ä¸Šä¼ æ–‡ä»¶ï¼Œæ•°æ®åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­</td></tr><tr><td align="center">PUT</td><td align="left">ä»å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€çš„æ•°æ®å–ä»£æŒ‡å®šæ–‡æ¡£ä¸­çš„å†…å®¹</td></tr><tr><td align="center">DELETE</td><td align="left">è¯·æ±‚æœåŠ¡å™¨åˆ é™¤æŒ‡å®šçš„èµ„æº</td></tr><tr><td align="center">OPTIONS</td><td align="left">å…è®¸å®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½</td></tr><tr><td align="center">CONNECT</td><td align="left">æŠŠæœåŠ¡å™¨å½“ä½œè·³æ¿ï¼Œè®©æœåŠ¡å™¨ä»£æ›¿å®¢æˆ·ç«¯è®¿é—®å…¶ä»–ç½‘é¡µ</td></tr><tr><td align="center">TRACE</td><td align="left">å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­</td></tr></tbody></table><p>ä¸€ä¸ª URL åœ°å€ç”¨äºæè¿°ä¸€ä¸ªç½‘ç»œä¸Šçš„èµ„æºï¼Œè€Œ HTTP ä¸­çš„ GETã€POSTã€PUTã€DELETE å¯¹åº”ç€å¯¹è¿™ä¸ªèµ„æºçš„æŸ¥ã€æ”¹ã€å¢ã€åˆ  4 ä¸ªæ“ä½œã€‚</p><hr><p>GET å’Œ POST çš„åŒºåˆ«ï¼š</p><ol><li><p>GET ä¸€èˆ¬ç”¨äºè·å–/æŸ¥è¯¢èµ„æºä¿¡æ¯ï¼Œè€Œ POST ä¸€èˆ¬ç”¨äºæ›´æ–°èµ„æºä¿¡æ¯ã€‚GETè¯·æ±‚æ¶ˆæ¯ä½“ä¸ºç©ºï¼ŒPOSTè¯·æ±‚å¸¦æœ‰æ¶ˆæ¯ä½“ã€‚</p></li><li><p>GET æäº¤çš„æ•°æ®ä¼šæ”¾åœ¨ URL ä¹‹åï¼Œä»¥ ? åˆ†å‰² URL å’Œä¼ è¾“æ•°æ®ï¼Œå‚æ•°ä¹‹é—´ä»¥ &amp; ç›¸è¿ï¼Œå¦‚<code>EditPosts.aspx?name=test1&amp;id=123456</code> ã€‚POST æ–¹æ³•æ˜¯æŠŠæäº¤çš„æ•°æ®æ”¾åœ¨ HTTP åŒ…çš„ Body ä¸­ã€‚</p></li><li><p>GET æäº¤çš„æ•°æ®å¤§å°æœ‰é™åˆ¶ï¼ˆå› ä¸ºæµè§ˆå™¨å¯¹ URL çš„é•¿åº¦æœ‰é™åˆ¶ï¼‰ï¼Œè€Œ POST æ–¹æ³•æäº¤çš„æ•°æ®æ²¡æœ‰é™åˆ¶ã€‚</p></li><li><p>GET æ–¹å¼æäº¤æ•°æ®ï¼Œä¼šå¸¦æ¥å®‰å…¨é—®é¢˜ï¼Œæ¯”å¦‚ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œé€šè¿‡ GET æ–¹å¼æäº¤æ•°æ®æ—¶ï¼Œç”¨æˆ·åå’Œå¯†ç å°†å‡ºç°åœ¨ URL ä¸Šï¼Œå¦‚æœé¡µé¢å¯ä»¥è¢«ç¼“å­˜æˆ–è€…å…¶ä»–äººå¯ä»¥è®¿é—®è¿™å°æœºå™¨ï¼Œå°±å¯ä»¥ä»å†å²è®°å½•è·å¾—è¯¥ç”¨æˆ·çš„è´¦å·å’Œå¯†ç ã€‚</p></li></ol><hr><ul><li>è¯·æ±‚å¤´</li></ul><p>è¯·æ±‚å¤´åŒ…å«æœåŠ¡å™¨è¦ä½¿ç”¨çš„é™„åŠ ä¿¡æ¯ï¼ˆCookie ã€ Referer ã€ User-Agentç­‰ï¼‰ã€‚</p><table><thead><tr><th align="left">è¯·æ±‚å¤´</th><th align="left">ç¤º ä¾‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">Accept</td><td align="left">Accept: text/plain,text/html</td><td align="left">æŒ‡å®šå®¢æˆ·ç«¯èƒ½å¤Ÿæ¥æ”¶çš„å†…å®¹ç±»å‹</td></tr><tr><td align="left">Accept-Charset</td><td align="left">Accept-Charset: iso-8859-5</td><td align="left">æµè§ˆå™¨å¯ä»¥æ¥å—çš„å­—ç¬¦ç¼–ç é›†</td></tr><tr><td align="left">Accept-Encoding</td><td align="left">Accept-Encoding: compress,gzip</td><td align="left">æŒ‡å®šæµè§ˆå™¨å¯ä»¥æ”¯æŒçš„ Web æœåŠ¡å™¨è¿”å›å†…å®¹å‹ç¼©ç¼–ç ç±»å‹</td></tr><tr><td align="left">Accept-Language</td><td align="left">Accept-Language:en,zh</td><td align="left">æµè§ˆå™¨å¯æ¥å—çš„è¯­è¨€</td></tr><tr><td align="left">Accept-Ranges</td><td align="left">Accept-Ranges: bytes</td><td align="left">å¯ä»¥è¯·æ±‚ç½‘é¡µå®ä½“çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­èŒƒå›´å­—æ®µ</td></tr><tr><td align="left">Authorization</td><td align="left">Authorization: BasicdbxhZGRpbjpvcGVuIHNIc2Ftyd=</td><td align="left">HTTPæˆæƒçš„æˆæƒè¯ä¹¦</td></tr><tr><td align="left">Cache-Control</td><td align="left">Cache-Control:no-cache</td><td align="left">æŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶</td></tr><tr><td align="left">Connection</td><td align="left">Connection: close</td><td align="left">è¡¨ç¤ºæ˜¯å¦éœ€è¦æŒä¹…è¿æ¥ã€‚ï¼ˆHTTP1.1é»˜è®¤è¿›è¡ŒæŒä¹…è¿æ¥ï¼‰</td></tr><tr><td align="left">Cookie</td><td align="left">Cookie: $Version=1; Skin=new;</td><td align="left">åœ¨å‘é€ HTTP è¯·æ±‚æ—¶ï¼Œä¼šæŠŠä¿å­˜åœ¨è¯¥è¯·æ±‚åŸŸåä¸‹çš„æ‰€æœ‰ cookie å€¼ä¸€èµ·å‘é€ç»™ Web æœåŠ¡å™¨</td></tr><tr><td align="left">Content-Length</td><td align="left">Content-Length:348</td><td align="left">è¯·æ±‚çš„å†…å®¹é•¿åº¦</td></tr></tbody></table><ul><li>è¯·æ±‚ä½“</li></ul><p> è¯·æ±‚ä½“æ˜¯æŒ‡åœ¨ HTTP è¯·æ±‚ä¸­ä¼ è¾“æ•°æ®çš„å®ä½“ï¼Œå¸¸ç”¨äº POST ã€ PUT ç­‰è¯·æ±‚ä¸­ã€‚</p><h3 id="HTTP-å“åº”"><a href="#HTTP-å“åº”" class="headerlink" title="HTTP å“åº”"></a>HTTP å“åº”</h3><p>HTTP å“åº”ç”±æœåŠ¡å™¨ç«¯è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œåˆ†ä¸ºå“åº”çŠ¶æ€ç ï¼ˆResponse Status Codeï¼‰,å“åº”å¤´ï¼ˆResponse Headerï¼‰å’Œå“åº”ä½“ï¼ˆResponse Bodyï¼‰ã€‚</p><ul><li>çŠ¶æ€ç </li></ul><p>çŠ¶æ€ç ç”¨æ¥å‘Šè¯‰ HTTP å®¢æˆ·ç«¯ï¼ŒHTTP æœåŠ¡å™¨æ˜¯å¦äº§ç”Ÿäº†é¢„æœŸçš„ Response ã€‚ HTTP/1.1 åè®®ä¸­å®šä¹‰äº† 5 ç±»çŠ¶æ€ç ï¼ŒçŠ¶æ€ç ç”±ä¸‰ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«ã€‚</p><p>å¸¸è§çŠ¶æ€ç ç±»å‹ï¼š</p><blockquote><ul><li>1XX æç¤ºä¿¡æ¯â€”â€”è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ï¼Œç»§ç»­å¤„ç†ã€‚</li><li>2XX æˆåŠŸâ€”â€”è¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥æ”¶ï¼Œç†è§£ï¼Œæ¥å—ã€‚</li><li>3XX é‡å®šå‘â€”â€”è¦å®Œæˆè¯·æ±‚å¿…é¡»è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„å¤„ç†ã€‚</li><li>4XX å®¢æˆ·ç«¯é”™è¯¯â€”â€”è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯æˆ–è¯·æ±‚æ— æ³•å®ç°ã€‚</li><li>5XX æœåŠ¡å™¨ç«¯é”™è¯¯â€”â€”æœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ã€‚</li></ul></blockquote><ul><li>å“åº”å¤´</li></ul><p>å“åº”å¤´åŒ…å«æœåŠ¡å™¨å¯¹è¯·æ±‚çš„åº”ç­”ä¿¡æ¯ï¼Œå¦‚ Content-Type ã€ Server ã€ Set-Cookie ç­‰ã€‚</p><table><thead><tr><th align="center">å“åº”å¤´</th><th align="left">è¯´ æ˜</th></tr></thead><tbody><tr><td align="center">Allow</td><td align="left">æœåŠ¡å™¨æ”¯æŒå“ªäº›è¯·æ±‚æ–¹æ³•ï¼ˆå¦‚ GETã€POST ç­‰ï¼‰</td></tr><tr><td align="center">Content-Encoding</td><td align="left">æ–‡æ¡£çš„ç¼–ç ï¼ˆEncodeï¼‰æ–¹æ³•ã€‚åªæœ‰åœ¨è§£ç ä¹‹åæ‰å¯ä»¥å¾—åˆ°ç”¨ Content-Type å¤´æŒ‡å®šçš„å†…å®¹ç±»å‹ã€‚åˆ©ç”¨ gzip å‹ç¼©æ–‡æ¡£èƒ½å¤Ÿæ˜¾è‘—åœ°å‡å°‘ HTML æ–‡æ¡£çš„ä¸‹è½½æ—¶é—´</td></tr><tr><td align="center">Content-Length</td><td align="left">è¡¨ç¤ºå†…å®¹é•¿åº¦ã€‚åªæœ‰å½“æµè§ˆå™¨ä½¿ç”¨æŒä¹… HTTP è¿æ¥æ—¶æ‰éœ€è¦è¿™ä¸ªæ•°æ®</td></tr><tr><td align="center">Content-Type</td><td align="left">è¡¨ç¤ºåé¢çš„æ–‡æ¡£å±äºä»€ä¹ˆ MIME ç±»å‹</td></tr><tr><td align="center">Date</td><td align="left">å½“å‰çš„ GMT æ—¶é—´</td></tr><tr><td align="center">Expires</td><td align="left">åº”è¯¥åœ¨ä»€ä¹ˆæ—¶å€™è®¤ä¸ºæ–‡æ¡£å·²ç»è¿‡æœŸï¼Œä»è€Œä¸å†ç¼“å­˜å®ƒ</td></tr><tr><td align="center">Last-Modified</td><td align="left">æ–‡æ¡£çš„æœ€åæ”¹åŠ¨æ—¶é—´ã€‚å¯ä»¥é€šè¿‡ If-Modified-Since è¯·æ±‚å¤´æä¾›ä¸€ä¸ªæ—¥æœŸï¼Œè¯¥è¯·æ±‚å°†è¢«è§†ä¸ºä¸€ä¸ªæœ‰æ¡ä»¶çš„ GET è¯·æ±‚ã€‚åªæœ‰æ”¹åŠ¨æ—¶é—´è¿ŸäºæŒ‡å®šæ—¶é—´çš„æ–‡æ¡£æ‰ä¼šè¿”å›ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ª 304ï¼ˆNot Modifiedï¼‰çŠ¶æ€ã€‚</td></tr><tr><td align="center">Last-Modified</td><td align="left">ä¹Ÿå¯ç”¨setDateHeader()æ–¹æ³•æ¥è®¾ç½®</td></tr><tr><td align="center">Location</td><td align="left">è¡¨ç¤ºå®¢æˆ·ç«¯åº”è¯¥å½“åˆ°å“ªé‡Œå»æå–æ–‡æ¡£ï¼Œé€šå¸¸ä¸æ˜¯ç›´æ¥è®¾ç½®çš„</td></tr><tr><td align="center">Refresh</td><td align="left">è¡¨ç¤ºæµè§ˆå™¨åº”è¯¥åœ¨å¤šå°‘æ—¶é—´ä¹‹ååˆ·æ–°æ–‡æ¡£ï¼Œä»¥ç§’è®¡</td></tr><tr><td align="center">Server</td><td align="left">æœåŠ¡å™¨çš„åå­—</td></tr><tr><td align="center">Set-Cookie</td><td align="left">è®¾ç½®å’Œé¡µé¢å…³è”çš„ Cookie</td></tr><tr><td align="center">WWW-Authenticate</td><td align="left">å®¢æˆ·åº”è¯¥åœ¨ Authorization å¤´ä¸­æä¾›çš„æˆæƒä¿¡æ¯ã€‚åœ¨åŒ…å« 401ï¼ˆUnauthorizedï¼‰çŠ¶æ€è¡Œçš„åº”ç­”ä¸­è¿™ä¸ªä¿¡æ¯æ˜¯å¿…éœ€çš„</td></tr></tbody></table><ul><li>å“åº”ä½“</li></ul><p>å“åº”ä½“æ˜¯ HTTP è¯·æ±‚è¿”å›çš„å†…å®¹ï¼Œå“åº”çš„æ­£æ–‡æ•°æ®éƒ½åœ¨å“åº”ä½“ä¸­ã€‚</p><hr><h2 id="æ¥æ”¶å’Œå¤„ç†-Go-Web-è¯·æ±‚"><a href="#æ¥æ”¶å’Œå¤„ç†-Go-Web-è¯·æ±‚" class="headerlink" title="æ¥æ”¶å’Œå¤„ç† Go Web è¯·æ±‚"></a>æ¥æ”¶å’Œå¤„ç† Go Web è¯·æ±‚</h2><hr><h3 id="Go-WebæœåŠ¡å™¨å·¥ä½œæµç¨‹"><a href="#Go-WebæœåŠ¡å™¨å·¥ä½œæµç¨‹" class="headerlink" title="Go WebæœåŠ¡å™¨å·¥ä½œæµç¨‹"></a>Go WebæœåŠ¡å™¨å·¥ä½œæµç¨‹</h3><p>Go Web æœåŠ¡å™¨è¯·æ±‚å’Œå“åº”çš„æµç¨‹å¦‚ä¸‹ï¼š</p><ul><li><p>å®¢æˆ·ç«¯å‘é€è¯·æ±‚</p></li><li><p>æœåŠ¡å™¨ç«¯çš„å¤šè·¯å¤ç”¨å™¨æ”¶åˆ°è¯·æ±‚</p></li><li><p>å¤šè·¯å¤ç”¨å™¨æ ¹æ®è¯·æ±‚çš„URLæ‰¾åˆ°æ³¨å†Œçš„å¤„ç†å™¨ï¼Œå°†è¯·æ±‚äº¤ç”±å¤„ç†å™¨å¤„ç†</p></li><li><p>å¤„ç†å™¨æ‰§è¡Œç¨‹åºé€»è¾‘ï¼Œå¦‚æœå¿…è¦ï¼Œåˆ™ä¸æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œå¾—åˆ°å¤„ç†ç»“æœ</p></li><li><p>å¤„ç†å¯†è°ƒç”¨æ¨¡æ¿å¼•æ“å°†æŒ‡å®šçš„æ¨¡æ¿å’Œä¸Šä¸€æ­¥å¾—åˆ°çš„ç»“æœæ¸²æŸ“æˆå®¢æˆ·ç«¯å¯è¯†åˆ«çš„æ•°æ®æ ¼å¼ï¼ˆé€šå¸¸æ˜¯ HTML æ ¼å¼ï¼‰</p></li><li><p>æœåŠ¡å™¨ç«¯å°†æ•°æ®é€šè¿‡ HTTP å“åº”è¿”å›ç»™å®¢æˆ·ç«¯</p></li><li><p>å®¢æˆ·ç«¯æ‹¿åˆ°æ•°æ®ï¼Œæ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼ˆå¦‚æ¸²æŸ“å‡ºæ¥å‘ˆç°ç»™ç”¨æˆ·ï¼‰</p></li></ul><hr><h3 id="æ¥æ”¶è¯·æ±‚"><a href="#æ¥æ”¶è¯·æ±‚" class="headerlink" title="æ¥æ”¶è¯·æ±‚"></a>æ¥æ”¶è¯·æ±‚</h3><ol><li><strong>ServeMux å’Œ DefultServeMux</strong></li></ol><p>å¤šè·¯å¤ç”¨å™¨ç”¨äºè½¬å‘è¯·æ±‚åˆ°å¤„ç†å™¨,ä¼šåœ¨æ˜ å°„ä¸­æ‰¾å‡ºè¢«è¯·æ±‚ URL æœ€ä¸ºåŒ¹é…çš„URLå°„è‡³ç›¸åº”çš„å¤„ç†å™¨ã€‚å®ƒç„¶åè°ƒç”¨ä¸ä¹‹ç›¸å¯¹åº”çš„å¤„ç†å™¨çš„ ServeHTTP æ–¹æ³•æ¥å¤„ç†è¯·æ±‚ã€‚</p><p>DefaultServeMux æ˜¯ <code>net/http</code> åŒ…ä¸­é»˜è®¤æä¾›çš„ä¸€ä¸ªå¤šè·¯å¤ç”¨å™¨ï¼Œå…¶å®è´¨æ˜¯ ServeMux çš„ä¸€ä¸ªå®ä¾‹ï¼Œå¤šè·¯å¤ç”¨å™¨çš„ä»»åŠ¡æ˜¯â€”â€”æ ¹æ®è¯·æ±‚çš„ URL å°†è¯·æ±‚é‡å®šå‘åˆ°ä¸åŒçš„å¤„ç†å™¨ã€‚å¦‚æœç”¨æˆ·æ²¡æœ‰ä¸º Server å¯¹è±¡æŒ‡å®šå¤„ç†å™¨ï¼Œåˆ™æœåŠ¡å™¨é»˜è®¤ä½¿ç”¨ DefaultServeMux ä½œä¸º ServeMux ç»“æ„ä½“çš„å®ä¾‹ ServeMux ä¹Ÿæ˜¯ä¸€ä¸ªå¤„ç†å™¨ï¼Œå¯ä»¥åœ¨éœ€è¦æ—¶å¯¹å…¶å®ä»ªå®æ–½å¤„ç†å™¨ä¸²è”ã€‚é»˜è®¤çš„å¤šè·¯å¤ç”¨å™¨ DefauliServeMux å…¶å£°æ˜è¯­å¥å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">var</span> DefaultServeMux <span class="token operator">=</span> <span class="token operator">&amp;</span>defaultServeMux<span class="token keyword">var</span> defaultServeMux ServeMux<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>HandleFunc() å‡½æ•°ç”¨äºä¸ºæŒ‡å®šçš„ URL æ³¨å†Œä¸€ä¸ªå¤„ç†å™¨ï¼ŒHandleFunc() å¤„ç†å™¨å‡½æ•°ä¼šåœ¨å†…éƒ¨è°ƒç”¨ DefaultServeMux å¯¹è±¡çš„å¯¹åº”æ–¹æ³•ï¼Œå…¶å†…éƒ¨å®ç°å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">HandleFunc</span><span class="token punctuation">(</span>pattern <span class="token builtin">string</span> <span class="token punctuation">,</span> handler <span class="token keyword">func</span><span class="token punctuation">(</span>ResponseWriter <span class="token punctuation">,</span> <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token punctuation">)</span>DefaultServeMux<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span>pattern <span class="token punctuation">,</span> handler<span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ä¸Šé¢çš„æ–¹æ³•ä½“å¯ä»¥çœ‹å‡ºï¼Œhttp.HandleFunc() å‡½æ•°å°†å¤„ç†å™¨æ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ä¸­ã€‚ç”¨é»˜è®¤å¤šè·¯å¤ç”¨å™¨è¿˜å¯ä»¥æŒ‡å®šå¤šä¸ªå¤„ç†å™¨ï¼Œå…¶ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">"net/http"</span>    <span class="token comment">//å®šä¹‰å¤šä¸ªå¤„ç†å™¨</span>se thanalel <span class="token keyword">struct</span><span class="token punctuation">(</span>j<span class="token keyword">func</span> <span class="token punctuation">(</span>hl <span class="token operator">*</span>handlel<span class="token punctuation">)</span><span class="token function">serveHTTP</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span>ffmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">"hi,handlel"</span><span class="token punctuation">)</span><span class="token keyword">type</span> handle2 <span class="token keyword">struct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token punctuation">(</span>h2 <span class="token operator">*</span>handle2<span class="token punctuation">)</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">"hi,handle2"</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token number">1</span>handlel <span class="token operator">:=</span> <span class="token function">handle1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>handle2 <span class="token operator">:=</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//nilè¡¨æ˜æœåŠ¡å™¨ä½¿ç”¨é»˜è®¤çš„å¤šè·¯å¤ç”¨å™¨DefaultServeMux</span>server<span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">Server</span><span class="token punctuation">(</span>Addr<span class="token punctuation">:</span> â€œ<span class="token number">0.0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">:</span><span class="token number">8085</span>"<span class="token punctuation">,</span>Handler<span class="token punctuation">:</span> ngl<span class="token punctuation">,</span><span class="token comment">//hande()å‡½æ•°è°ƒç”¨çš„æ˜¯å¤šè·¯å¤ç”¨å™¨çš„</span>DefaultServeMux<span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>æ–¹æ³•    http<span class="token punctuation">,</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token string">"/handlel"</span><span class="token punctuation">,</span>shandle1<span class="token punctuation">)</span>http<span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span><span class="token string">"/handle2"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>handle2<span class="token punctuation">)</span>server<span class="token punctuation">.</span><span class="token function">listenAndServe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç›´æ¥ç”¨ http.Handle() å‡½æ•°æ¥æŒ‡å®šå¤šä¸ªå¤„ç†å™¨ã€‚Handle() å‡½æ•°çš„ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">Handle <span class="token punctuation">(</span>pattern <span class="token builtin">string</span><span class="token punctuation">,</span><span class="token function">Func</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> bandler<span class="token punctuation">)</span><span class="token punctuation">]</span> handler Handler<span class="token punctuation">)</span> DefaultServeMux<span class="token punctuation">.</span>Hardle<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ http.Handle() å‡½æ•°ä¸­è°ƒç”¨äº† DefaultServeMux.Handle() æ–¹æ³•æ¥å¤„ç†æ¸…æ±‚æœ å™¨æ”¶åˆ°çš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šè°ƒç”¨å¯¹åº”å¤šè·¯å¤ç”¨å™¨çš„ ServeHTTP( æ–¹æ³•ã€‚è¯¥æ–¹æ³•çš„ä»£ç è¯¦æƒ…å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> handler serverHandler<span class="token punctuation">)</span><span class="token function">SezveHTTP</span><span class="token punctuation">(</span>rw ResponseWriter<span class="token punctuation">,</span> req Request<span class="token punctuation">)</span> <span class="token operator">:=</span>sh<span class="token punctuation">.</span>srv<span class="token punctuation">.</span>Handler<span class="token keyword">if</span> handler sx <span class="token boolean">nil</span>handler <span class="token operator">=</span> DefaultServeMuxhandler<span class="token punctuation">.</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>rw<span class="token punctuation">,</span> req<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ ServeMux å¯¹è±¡çš„ ServeHTTP()æ–¹æ³•ä¸­ï¼Œä¼šæ ¹æ® URL æŸ¥æ‰¾æ³¨å†Œçš„å¤„ç†å™¨ï¼Œç„¶åå°†è¯·æ±‚äº¤ç”±å®ƒå¤„ç†ã€‚<br>è™½ç„¶é»˜è®¤çš„å¤šè·¯å¤ç”¨å™¨ä½¿ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸å»ºè®®ä½¿ç”¨ã€‚å› ä¸º DefaultServeMux æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€æœ‰ä»£ç ï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹ä»£ç ï¼‰éƒ½å¯ä»¥ä¿®æ”¹å®ƒã€‚æœ‰äº›ç¬¬ä¸‰æ–¹ä»£ç ä¼šåœ¨  DefaultServeMux ä¸­æ³¨å†Œä¸€äº›å¤„ç†å™¨ï¼Œè¿™å¯èƒ½ä¸æ³¨å†Œçš„å¤„ç†å™¨å†²çªã€‚æ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯è‡ªå®šä¹‰å¤šè·¯å¤ç”¨å™¨ã€‚<br>è‡ªå®šä¹‰å¤šè·¯å¤ç”¨å™¨ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œç›´æ¥è°ƒç”¨  http.NewServeMux() å‡½æ•°å³å¯ã€‚ç„¶åï¼Œåœ¨æ–°åˆ›å»ºçš„å¤šè·¯å¤ç”¨å™¨ä¸Šæ³¨å†Œå¤„ç†å™¨ï¼›</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">mux <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">NewSeryeMux</span><span class="token punctuation">(</span><span class="token punctuation">)</span>mux<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªè¯»è¶…æ—¶å’Œå†™è¶…æ—¶å‡ä¸º5sçš„æœåŠ¡å™¨ã€‚</p><p>ç®€å•æ€»ç»“ä¸€ä¸‹ ServerMux å®ç°äº† http.Handler æ¥å£çš„ ServeHTTP(ResponseWriter.*Request) æ–¹æ³•ã€‚åœ¨åˆ›å»º  Server æ—¶ï¼Œå¦‚æœè®¾ç½® Handler ä¸ºç©ºï¼Œåˆ™ä½¿ç”¨ DefaultServeMux ä½œä¸ºé»˜è®¤çš„å¤„ç†å™¨ï¼Œè€Œ DefaultServeMux æ˜¯ ServerMux çš„ä¸€ä¸ªå…¨å±€å˜é‡ã€‚</p><ol start="2"><li><strong>ServeMux çš„ URL è·¯ç”±åŒ¹é…</strong></li></ol><p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸€ä¸ª Web æœåŠ¡å™¨å¾€å¾€æœ‰å¾ˆå¤šçš„ URL ç»‘å®šï¼Œä¸åŒçš„URLå¯¹åº”ä¸åŒçš„å¤„ç†å™¨ã€‚æœåŠ¡å™¨æ˜¯å†³å®šä½¿ç”¨å“ªä¸ªå¤„ç†å™¨è¿‡ç¨‹ï¼š<br>å‡å¦‚ç°åœ¨ç»‘å®šäº† 3 ä¸ª URLï¼Œåˆ†åˆ«æ˜¯ /ã€/hi å’Œ /hi/web ï¼š</p><ul><li>å¦‚æœè¯·æ±‚çš„ URLä¸º /ï¼Œåˆ™è°ƒç”¨ / å¯¹åº”çš„å¤„ç†å™¨</li><li>å¦‚æœè¯·æ±‚çš„ URL ä¸º /hi ï¼Œåˆ™è°ƒç”¨ /hi å¯¹åº”çš„å¤„ç†å™¨</li><li>å¦‚æœè¯·æ±‚çš„ URL ä¸º /hi/web ï¼Œåˆ™è°ƒç”¨ /hi/web å¯¹åº”çš„å¤„ç†å™¨ã€‚</li></ul><ol start="3"><li><strong>å¤„ç†å™¨</strong></li></ol><p>æœåŠ¡è·¯åœ¨æ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ ¹æ®å…¶ URL å°†è¯·æ±‚äº¤ç»™ç›¸åº”çš„å¤šè·¯å¤ç”¨å™¨ï¼Œå¤šè·¯å¤ç”¨å™¨å°†è¯·æ±‚è½¬å‘ç»™å¤„ç†å™¨å¤„ç†ã€‚å¤„ç†å™¨æ˜¯å®ç°äº† Handler æ¥å£çš„ç»“æ„ã€‚Handler æ¥å£è¢«å®šä¹‰åœ¨ <code>net/http</code> åŒ…ä¸­ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Handler <span class="token keyword">interface</span><span class="token punctuation">(</span><span class="token keyword">func</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>wResponse<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> r<span class="token operator">*</span>Request<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒHandler æ¥å£ä¸­åªæœ‰ä¸€ä¸ª ServeHTTP() å¤„ç†å™¨æ–¹æ³•ã€‚ä»»ä½•å®ç°äº† Handle æ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥è¢«æ³¨å†Œåˆ°å¤šè·¯å¤ç”¨å™¨ã€‚</p><ol start="4"><li><strong>å¤„ç†å™¨å‡½æ•°</strong></li></ol><p>ä¸‹é¢ä»¥é»˜è®¤çš„å¤„ç†å™¨å‡½æ•° HandleFunc() ä¸ºä¾‹ä»‹ç»å¤„ç†å™¨çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><ul><li>æ³¨å†Œä¸€ä¸ªå¤„ç†å™¨å‡½æ•°</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go">http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> func_name<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªå¤„ç†å™¨å‡½æ•°çš„ç¬¬ 1 ä¸ªå‚æ•°è¡¨ç¤ºåŒ¹é…çš„è·¯ç”±åœ°å€ ç¬¬ 2 ä¸ªå‚æ•°è¡¨ç¤ºä¸€ä¸ªåä¸º func_name çš„æ–¹æ³•ï¼Œç”¨äºå¤„ç†å…·ä½“ä¸šåŠ¡é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œæ³¨å†Œä¸€ä¸ªå¤„ç†å™¨å‡½æ•°ï¼Œå¹¶å°†å¤„ç†å™¨çš„è·¯ç”±åŒ¹é…åˆ° hi å‡½æ•°ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span>hi<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>å®šä¹‰ä¸€ä¸ªåä¸º hi çš„å‡½æ•°ï¼Œç”¨æ¥æ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²åˆ°æµè§ˆå™¨ï¼š</li></ul><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">hi</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">"Hi Web!"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>net/http</code> åŒ…æä¾›äº†ä»¥å‡½æ•°çš„æ–¹å¼æ³¨å†Œå¤„ç†å™¨ï¼Œå³ç”¨HandleFunc() å‡½æ•°æ¥æ³¨å†Œå¤„ç†å™¨ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°å®ç°äº†åŒ¿å¤šå‡½æ•° func(w http.ResponseWriter,r *http.Request) ï¼Œåˆ™è¿™ä¸ªå‡½æ•°è¢«ä¸ºä¸ºâ€œå¤„ç†å™¨å‡½æ•°â€ã€‚ HandleFunc() å‡½æ•°å†…éƒ¨è°ƒç”¨äº† ServeMux å¯¹è±¡çš„ Handlefunc() æ–¹æ³•ã€‚ServeMux å¯¹è±¡çš„ HandleFunc() æ–¹æ³•å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">m Haudlet<span class="token keyword">func</span> <span class="token punctuation">(</span>mux <span class="token operator">*</span>ServeMux<span class="token punctuation">)</span> Hand1eFunc <span class="token punctuation">(</span>pattern <span class="token builtin">string</span><span class="token punctuation">,</span> handler <span class="token keyword">func</span> <span class="token punctuation">(</span>ResponseWriter<span class="token punctuation">,</span> <span class="token operator">*</span>Reguest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">if</span> handler <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">(</span>panichttpiil hanaleå±…å†ihHamalermux<span class="token punctuation">.</span><span class="token function">Handle</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> <span class="token function">HandlerFunc</span><span class="token punctuation">(</span>handlex<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç»§ç»­æŸ¥çœ‹å†…éƒ¨ä»£ç å¯ä»¥å‘ç° HandlerFunc( å‡½æ•°æœ€ç»ˆä¹Ÿå®ç°äº† Handler æ¥å£çš„ ServeHTTP() æ–¹æ³•ã€‚å…¶å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> HandlerFunc <span class="token keyword">func</span><span class="token punctuation">(</span>w <span class="token operator">*</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token punctuation">(</span>f HandlerFunc<span class="token punctuation">)</span>ServeHTTP <span class="token punctuation">(</span>w ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol><li>Handler:å¤„ç†å™¨æ¥å£ã€‚å®šä¹‰åœ¨ <code>net/http</code> åŒ…ä¸­ï¼Œå®ç°äº† Handler æ¥å£çš„å¯¹è±¡ï¼Œå¯ä»¥ç”Ÿåˆ°å¤šè·¯å¤ç”¨å™¨ä¸­ã€‚</li><li>Handle()ï¼šæ³¨å†Œå¤„ç†å™¨è¿‡ç¨‹ä¸­çš„è°ƒç”¨å‡½æ•°ã€‚</li><li>HandleFunc()ï¼šå¤„ç†å™¨å‡½æ•°ã€‚</li><li>HandlerFunc:åº•å±‚ä¸º func (w ResponseWriter,r*Request) åŒ¿åå‡½æ•°ï¼Œå®ç°äº† Handler å¤„ç†å™¨æ¥å£ã€‚å®ƒç”¨æ¥è¿æ¥å¤„ç†å™¨å‡½æ•°ä¸å¤„ç†å™¨ã€‚<br>ç®€è€Œè¨€ä¹‹ HandlerFunc() æ˜¯ä¸€ä¸ªå¤„ç†å™¨å‡½æ•°ï¼Œå…¶å†…éƒ¨é€šè¿‡å¯¹ ServeMux ä¸­ä¸€ç³»åˆ—æ–¹æ³•çš„è°ƒç”¨æœ€ç»ˆåœ¨åº•å±‚å®ç°äº† Handler å¤„ç†å™¨æ¥å£çš„ SepveHTTP) æ–¹æ³•ï¼Œä»è€Œå®ç°å¤„ç†å™¨çš„åŠŸèƒ½ã€‚</li></ol><h3 id="å¤„ç†è¯·æ±‚"><a href="#å¤„ç†è¯·æ±‚" class="headerlink" title="å¤„ç†è¯·æ±‚"></a>å¤„ç†è¯·æ±‚</h3><ol><li><strong>Request</strong></li></ol><p>Request æ˜¯ http è¯·æ±‚ï¼Œç”¨äºè¿”å› HTTP è¯·æ±‚çš„æŠ¥æ–‡ï¼Œé‡Œé¢åŒ…å«äº†æµè§ˆå™¨ç«¯çš„ç›¸å…³ä¿¡æ¯ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Request <span class="token keyword">struct</span> <span class="token punctuation">{</span>Method <span class="token builtin">string</span> <span class="token comment">//è¯·æ±‚çš„æ–¹æ³•</span>URL <span class="token operator">*</span>url<span class="token punctuation">.</span>URL <span class="token comment">//è¯·æ±‚æŠ¥æ–‡ä¸­çš„ URL åœ°å€ï¼Œæ˜¯æŒ‡é’ˆç±»å‹Proto string //å½¢å¦‚ï¼š"HTTP/1.0â€</span>ProtoMajorint <span class="token comment">//1</span>ProtoMinorint <span class="token comment">//0</span>Header Header <span class="token comment">// è¯·æ±‚å¤´å­—æ®µ</span>Bodyio<span class="token punctuation">.</span>ReadCloser <span class="token comment">// è¯·æ±‚ä½“</span>GetBody <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>io<span class="token punctuation">.</span>ReadCloser<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>ContentLength <span class="token builtin">int64</span>TransferEncoding <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token comment">//</span>Close <span class="token builtin">bool</span>Host <span class="token builtin">string</span>è¯·æ±‚æŠ¥æ–‡ä¸­çš„ä¸€äº›å‚æ•°ï¼ŒåŒ…æ‹¬è¡¨å•å­—æ®µç­‰Form url<span class="token punctuation">.</span>ValuesPostForm url<span class="token punctuation">.</span>ValuesMultipartForm <span class="token operator">*</span>multipart<span class="token punctuation">.</span>FormTrailer HeaderRemoteAddr <span class="token builtin">string</span>RequestURI <span class="token builtin">string</span>TLS <span class="token operator">*</span>tls<span class="token punctuation">.</span>ConnectionStateCancel <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>Response <span class="token operator">*</span>Responsectx context<span class="token punctuation">.</span>Context<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Reauest ç»“æ„ä½“ä¸»è¦ç”¨äºè¿”å›.è¯åŒçš„åº”ï¼Œåªæœ‰æ­£ç¡®ä¹Ÿè§£è¡ŒçœŸè¶Šæ•°å±ã€æ‰èƒ½å†…å®¢æˆ·ç«¯è¿”å›å“åº”ã€‚æ¥ä¸‹æ¥é€šè¿‡ç®€å•ç¤ºä¾‹æ¥æµ‹è¿‡ä¸€ä¸‹ã€‚ä¸‹æ–¹æ˜¯ Go æœåŠ¡å™¨ç«¯çš„ä»£ç ï¼Œç”¨äºè§£æ Request ç»“æ„ä½“ä¸­å„æˆå‘˜(æˆ–è€…è¯´æ˜¯å±æ€§)ã€‚ä»£ç : </p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span>ï¼ˆ<span class="token string">"fmt"</span><span class="token string">"log"</span><span class="token string">"net/http"</span><span class="token string">"strings"</span><span class="token keyword">func</span> <span class="token function">request</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token comment">//è¿™äº›ä¿¡æ¯æ˜¯è¾“å‡ºåˆ°æœåŠ¡å™¨ç«¯çš„æ‰“å°ä¿¡æ¯</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Requestè§£æ"</span><span class="token punctuation">)</span><span class="token comment">//HTTPæ–¹æ³•</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"method"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Method<span class="token punctuation">)</span><span class="token comment">//RequestURIæ˜¯è¢«å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡å™¨ç«¯çš„è¯·æ±‚è¡Œä¸­æœªä¿®æ”¹çš„è¯·æ±‚</span>URIfmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"RequestURI:"</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>RequestURI<span class="token punctuation">)</span><span class="token comment">//URL ç±»å‹ï¼Œä¸‹æ–¹åˆ†åˆ«åˆ—å‡ºURLçš„å„æˆå‘˜</span>fnt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"URL_path"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>fnt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"URL RawQuery"</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>RawQuery<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"URL_Fragment"</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Fragment<span class="token punctuation">)</span><span class="token comment">//åè®®ç‰ˆæœ¬</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"proto"</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>Proto<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"protomajor"</span><span class="token punctuation">,</span>r<span class="token punctuation">.</span>ProtoMajor<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"protominor"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>ProtoMinor<span class="token punctuation">)</span><span class="token comment">//HTTPè¯·æ±‚å¤´</span><span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> r<span class="token punctuation">.</span>Headerä¸€<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> vv <span class="token operator">:=</span> <span class="token keyword">range</span> v <span class="token punctuation">(</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"header key:"</span><span class="token operator">+</span> k<span class="token operator">+</span><span class="token string">"value:"</span><span class="token operator">+</span> vv<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//åˆ¤æ–­æ˜¯å¦ä¸ºmultipartæ–¹å¼</span>isMultipart<span class="token operator">:=</span> <span class="token boolean">false</span><span class="token keyword">for</span> <span class="token punctuation">,</span> v<span class="token operator">:=</span><span class="token keyword">range</span> r<span class="token punctuation">.</span>Header<span class="token punctuation">[</span><span class="token string">"Content-Type"</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">if</span> strings<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token string">"multipart/form-data"</span><span class="token punctuation">)</span> ï¼<span class="token operator">=</span><span class="token operator">-</span><span class="token function">1</span><span class="token punctuation">(</span>isMultipart <span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">(</span>è§£æ Formè¡¨å•<span class="token keyword">if</span> isMultipart <span class="token operator">==</span> <span class="token boolean">true</span> r<span class="token punctuation">.</span><span class="token function">ParseMultipartForm</span><span class="token punctuation">(</span><span class="token number">128</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è§£ææ–¹å¼:ParseMultipartForm"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">else</span> ï¼ˆr<span class="token punctuation">.</span><span class="token function">ParseForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"è§£ææ–¹å¼ï¼šParseForm"</span><span class="token punctuation">)</span><span class="token comment">//HTTP Body å†…å®¹é•¿åº¦</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"ContentLength"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>ContentLength<span class="token punctuation">)</span><span class="token comment">//æ˜¯å¦åœ¨å›å¤è¯·æ±‚åå…³é—­è¿æ¥</span>fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Close"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>Close<span class="token punctuation">)</span><span class="token comment">//HOST</span>fmt<span class="token punctuation">.</span>Prin host"<span class="token punctuation">,</span>r<span class="token punctuation">.</span>Host<span class="token punctuation">)</span><span class="token comment">//è¯¥è¯·æ±‚çš„æ¥æºåœ°ç­</span>fmt<span class="token punctuation">.</span><span class="token function">PrintIn</span><span class="token punctuation">(</span><span class="token string">"RemoteAddr"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>RemoteAddr<span class="token punctuation">)</span>fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">"hello, let's go!"</span><span class="token punctuation">)</span> <span class="token comment">//è¿™ä¸ªæ˜¯è¾“å‡ºåˆ°å®¢æˆ·ç«¯çš„</span><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/hello"</span><span class="token punctuation">,</span>request<span class="token punctuation">)</span>err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">":8081"</span><span class="token punctuation">,</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token keyword">if</span> err<span class="token operator">!=</span><span class="token boolean">nil</span> log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">"ListenAndServe:"</span><span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯·æ±‚å¤´å’Œå“åº”å¤´ä½¿ç”¨ Header ç±»å‹è¡¨ç¤ºã€‚Header ç±»å‹æ˜¯ä¸€ä¸ªæ˜ å°„(map)ç±»å‹ï¼Œè¡¨ç¤º HTTP è¯·æ±‚å¤´ä¸­çš„å¤šä¸ªé”®å€¼å¯¹ã€‚å…¶å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Header <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é€šè¿‡è¯·æ±‚å¯¹è±¡çš„ Header å±æ€§å¯ä»¥è®¿é—®åˆ°è¯·æ±‚å¤´ä¿¡æ¯ã€‚Header å±æ€§æ˜¯æ˜ å°„ç»“æ„ï¼Œæä¾›äº† Get() æ–¹æ³•ä»¥è·å– key å¯¹åº”çš„ç¬¬ä¸€ä¸ªå€¼ã€‚Get() æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>h Header<span class="token punctuation">)</span> <span class="token function">Get</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Header ç»“æ„ä½“çš„å…¶ä»–å¸¸ç”¨æ–¹æ³•çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>h Header<span class="token punctuation">)</span><span class="token function">Set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token comment">// è®¾ç½®å¤´ä¿¡æ¯</span><span class="token keyword">func</span> <span class="token punctuation">(</span>h Header<span class="token punctuation">)</span><span class="token function">Add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token comment">//æ·»åŠ å¤´ä¿¡æ¯</span><span class="token keyword">func</span> <span class="token punctuation">(</span>h Header<span class="token punctuation">)</span> <span class="token function">Del</span><span class="token punctuation">(</span>key <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token comment">//åˆ é™¤å¤´ä¿¡æ¯</span><span class="token keyword">func</span><span class="token punctuation">(</span>h Header<span class="token punctuation">)</span> <span class="token function">Write</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token comment">//ä½¿ç”¨çº¿æ¨¡å¼(in wire format)å†™å¤´ä¿¡æ¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯·æ±‚ä½“å’Œå“åº”ä½“éƒ½ç”± Request ç»“æ„ä¸­çš„ Body å­—æ®µè¡¨ç¤ºã€‚ Body å­—æ®µæ˜¯ä¸€ä¸ª <code>io.ReadCloser</code> æ¥å£ã€‚<code>ReadCloser</code> æ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> ReadCloser <span class="token keyword">interface</span> <span class="token punctuation">{</span>ReaderCloser<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>Body å­—æ®µæ˜¯ <code>Reader</code> æ¥å£å’Œ <code>Closer</code> æ¥å£çš„ç»“<br>åˆã€‚<code>Reader</code> æ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Reader <span class="token keyword">interface</span> <span class="token punctuation">{</span><span class="token function">Read</span><span class="token punctuation">(</span>P <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ Reader æ¥å£å¯ä»¥çœ‹åˆ°ï¼ŒRead() æ–¹æ³•å®ç°äº† ReadCloser æ¥å£ã€‚æ‰€ä»¥ï¼Œå¯ä»¥é€šè¿‡ Body.Read() æ–¹æ³•æ¥è¯»å–è¯·æ±‚ä½“ä¿¡æ¯æ¥ä¸‹æ¥é€šè¿‡ç¤ºä¾‹æ¥åŠ æ·±å¯¹ Body.Read() æ–¹æ³•çš„ç†è§£ã€‚</p><ul><li><strong>Response</strong></li></ul><p>Response æ˜¯ http è¯·æ±‚çš„å“åº”ï¼ŒåŒ…å«è¿”å›ç»™æµè§ˆå™¨ç«¯çš„æ•°æ®ã€‚</p><p>å…±ç»“æ„ä½“å®šä¹‰ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Response <span class="token keyword">struct</span> <span class="token punctuation">{</span>Status <span class="token builtin">string</span> <span class="token comment">// e.g. "200OK"</span>StatusCode <span class="token builtin">int</span> <span class="token comment">// e.g. 200</span>Proto <span class="token builtin">string</span> <span class="token comment">// e.g. "HTTP/1.0"</span>ProtoMajor <span class="token builtin">int</span> <span class="token comment">// e.g. 1</span>ProtoMinor <span class="token builtin">int</span> e<span class="token punctuation">.</span>g<span class="token punctuation">.</span> <span class="token number">0</span>Header HeaderBody io<span class="token punctuation">.</span>ReadCloserContentLength <span class="token builtin">int64</span>TransferEncoding<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>Close <span class="token builtin">bool</span>Uncompressed <span class="token builtin">bool</span>Trailer HeaderRequest <span class="token operator">*</span>RequestTLS <span class="token operator">*</span>tls<span class="token punctuation">.</span>ConnectionState<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li><strong>ResponseWriter åŸç†</strong></li></ol><p>Co è¯­è¨€å¯¹æ¥å£çš„å®ç°ï¼Œä¸éœ€è¦æ˜¾å¼çš„å£°æ˜ï¼Œåªè¦å®è¿äº†è¢«å£å®šä¹‰çš„æ–¹æ³•ï¼Œé‚£å°±å®ç°äº†ç›¸åº”çš„æ¥å£ã€‚<br> <code>io.Wrter</code> æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ã€‚å¦‚æœè¦ä½¿ç”¨ <code>io.Writer</code>  æ¥å£çš„ Write() æ–¹æ³•ï¼Œåˆ™éœ€è¦å®ç° Wrte([]byte) (n int, err error) æ–¹æ³•ã€‚<br>åœ¨ Go è¯­è¨€ä¸­ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ä¿¡æ¯éƒ½è¢«å°è£…åœ¨ Request å¯¹è±¡ä¸­ã€‚ä½†æ˜¯å‘é€ç»™å®¢æˆ·ç«¯çš„å“åº”å¹¶ä¸æ˜¯ Response å¯¹è±¡ï¼Œè€Œæ˜¯ ResponseWriter æ¥å£ã€‚ResponseWriter æ¥å£æ˜¯å¤„ç†å™¨ç”¨æ¥åˆ›å»º HTTP å“åº”çš„æ¥å£çš„ã€‚ResponseWriter æ¥å£çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> ResponseWriter <span class="token keyword">interface</span> <span class="token operator">/</span><span class="token number">1</span> ç”¨äºè®¾ç½®æˆ–è€…è·å–æ‰€æœ‰å“åº”å¤´ä¿¡æ¯Header <span class="token punctuation">(</span><span class="token punctuation">)</span> Header<span class="token comment">// ç”¨äºå†™å…¥æ•°æ®åˆ°å“åº”ä½“ä¸­</span><span class="token function">Write</span><span class="token punctuation">(</span>lJbyte<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1</span> ç”¨äºè®¾ç½®å“åº”çŠ¶æ€ç <span class="token function">WriteHeader</span><span class="token punctuation">(</span>statusCode <span class="token builtin">int</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®é™…ä¸Šï¼Œåœ¨åº•å±‚æ”¯æ’‘ ResponseWriter æ¥å£çš„æ˜¯http.response ç»“æ„ä½“ã€‚åœ¨è°ƒç”¨å¤„ç†å™¨å¤„ç† HTTP è¯·æ±‚æ—¶ï¼Œä¼šè°ƒç”¨ readRequest() æ–¹æ³• readRequest() æ–¹æ³•ä¼šå£°æ˜responseç»“æ„ä½“ï¼Œå¹¶ä¸”å…¶è¿”å›å€¼æ˜¯ response æŒ‡é’ˆè¿™ä¹Ÿæ˜¯åœ¨å¤„ç†å™¨æ–¹æ³•å£°æ˜æ—¶ï¼ŒReqyest æ˜¯æŒ‡é’ˆç±»å‹ï¼Œè€Œ ResponseWriter ä¸æ˜¯æŒ‡é’ˆç±»å‹çš„åŸå› ã€‚å®é™…ä¸Šï¼Œå“åº”å¯¹è±¡ä¹Ÿæ˜¯æŒ‡é’ˆç±»å‹ã€‚<br>æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š readRequest()æ–¹æ³•çš„</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>conn<span class="token punctuation">)</span> <span class="token function">readRequest</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">)</span><span class="token punctuation">(</span>w <span class="token operator">*</span>response<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token comment">//æ­¤å¤„çœç•¥è‹¥å¹²ä»£ç </span>w<span class="token operator">=</span> <span class="token operator">&amp;</span>responsef èµ°æ˜C<span class="token punctuation">.</span>conn<span class="token punctuation">:</span>cancelCtx<span class="token punctuation">:</span> cancelCtx<span class="token punctuation">,</span>req<span class="token punctuation">:</span> req<span class="token punctuation">,</span>regBody<span class="token punctuation">:</span> req<span class="token punctuation">.</span>Body<span class="token punctuation">,</span>handlerHeader<span class="token punctuation">:</span><span class="token builtin">make</span> <span class="token punctuation">(</span>Header<span class="token punctuation">)</span><span class="token punctuation">,</span>contentLength<span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>closeNotifyCh<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>wants10KeepAlive<span class="token punctuation">:</span> req<span class="token punctuation">.</span><span class="token function">wantsHttp10KeepAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>wantsClose<span class="token punctuation">:</span> req<span class="token punctuation">.</span><span class="token function">wantsClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">if</span> isH2Upgradefw<span class="token punctuation">.</span>closeAfterReply <span class="token operator">=</span> <span class="token boolean">true</span>w<span class="token punctuation">.</span>cw<span class="token punctuation">.</span>res <span class="token operator">=</span>ww<span class="token punctuation">.</span>w <span class="token operator">=</span> <span class="token function">newBufioWriterSize</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>w<span class="token punctuation">.</span>cw<span class="token punctuation">,</span> bufferBeforeChunkingSize<span class="token punctuation">)</span><span class="token keyword">return</span> w<span class="token punctuation">,</span> <span class="token boolean">nil</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>response ç»“æ„ä½“çš„å®šä¹‰å’Œ ResponseWriter æ¥å£éƒ½ä½äº server.go æ–‡ä»¶ä¸­ã€‚ä¸è¿‡ç”±äº response ç»“æ„ä½“æ˜¯ç§æœ‰çš„ï¼Œå¯¹å¤–ä¸å¯è§ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡ ResponseWriter æ¥å£è®¿é—®å®ƒã€‚ä¸¤è€…ä¹‹é—´çš„å…³ç³»æ˜¯ï¼šResponseWriter æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€Œ response ç»“æ„ä½“å®ç°äº†ã€‚æˆ‘ä»¬å¼•ç”¨ ResponseWriter æ¥å£ï¼Œå®é™…ä¸Šå¼•ç”¨çš„æ˜¯ response ç»“æ„ä½“çš„å®ä¾‹ã€‚</p><p>ResponseWriter æ¥å£åŒ…å« WriteHeader()ã€Header()ã€Write() ä¸‰ä¸ªæ–¹æ³•æ¥è®¾ç½®å“åº”çŠ¶æ€ç ã€‚</p><ul><li><p>WriteHeader() æ–¹æ³•<br>WrteHeader()æ–¹æ³•æ”¯æŒä¼ å…¥ä¸€ä¸ªæ•´å‹æ•°æ®æ¥è¡¨ç¤ºå“åº”çŠ¶æ€ç ã€‚å¦‚æœä¸è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™é»˜è®¤å“åº”çŠ¶æ€ç æ˜¯200ã€‚ WriteHeader() æ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯åœ¨ API æ¥å£ä¸­è¿”å›é”™è¯¯ç ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªå¤„ç†å™¨æ–¹æ³• noAuth()ï¼Œå¹¶é€šè¿‡w.WriteHeader()æ–¹æ³•è¿”å›ä¸€ä¸ª401æœªè®¤è¯çŠ¶æ€ç (æ³¨æ„ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œwä»£è¡¨çš„æ˜¯å¯¹åº”çš„responseå¯¹è±¡å®ä¾‹ï¼Œè€Œä¸æ˜¯æ¥å£)ã€‚</p></li><li><p>Header()æ–¹æ³•<br>Header()æ–¹æ³•ç”¨äºè®¾ç½®å“åº”å¤´ã€‚å¯ä»¥é€šè¿‡wHeader().Set()æ–¹æ³•è®¾ç½®å“åº”å¤´ã€‚w.Header()æ–¹æ³•è¿”å›çš„æ˜¯Header å“åº”å¤´å¯¹è±¡ï¼Œå®ƒå’Œè¯·æ±‚å¤´å…±ç”¨ä¸€ä¸ªç»“æ„ä½“ã€‚å› æ­¤åœ¨è¯·æ±‚å¤´ä¸­æ”¯æŒçš„æ–¹æ³•è¿™é‡Œéƒ½æ”¯æŒï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡w.Header().Add(æ–¹æ³•æ–°å¢å“åº”å¤´ã€‚<br>ä¾‹å¦‚ï¼Œå¦‚æœè¦è®¾ç½®ä¸€ä¸ª301é‡å®šå‘å“åº”ï¼Œåˆ™åªéœ€è¦é€šè¿‡w.WriteHeader()æ–¹æ³•å°†å“åº”çŠ¶æ€ç è®¾ç½®ä¸º301ï¼Œå†é€šè¿‡w.Header().Set()æ–¹æ³•å°†â€œLocationâ€è®¾ç½®ä¸ºä¸€ä¸ªå¯è®¿é—®åŸŸåå³å¯ã€‚</p></li></ul><p>æç¤º<br>w.Header(.Set(æ–¹æ³•åº”åœ¨ w.WriteHeader(æ–¹æ³•ä¹‹å‰è¢«è°ƒç”¨ï¼Œå› ä¸ºä¸€æ—¦è°ƒç”¨äº†w.WriteHeaderOæ–¹æ³•ï¼Œå°±ä¸èƒ½å¯¹å“åº”å¤´è¿›è¡Œè®¾ç½®äº†ã€‚</p><ul><li>Wite() æ–¹æ³•<br>Write() æ–¹æ³•ç”¨äºå°†æ•°æ®å†™å…¥ HTTP å“åº”ä½“ä¸­ã€‚å¦‚æœåœ¨è°ƒç”¨Write() æ–¹æ³•æ—¶è¿˜ä¸çŸ¥é“ Coment-Te çœŸå‹ï¼Œåˆ™å¯ä»¥é€šè¿‡æ•°æ®çš„å‰512ä¸ª byte è¿›è¡Œåˆ¤æ–­ã€‚ç”¨ Write()æ–¹æ³•å¯ä»¥è¿”å›å­—ç¬¦æ¯«æ•°æ®ä¹Ÿå¯ä»¥è¿”å› HTML æ–‡æ¡£å’Œ JSON ç­‰å¸¸è§çš„æ–‡æœ¬æ ¼å¼ã€‚</li></ul><ul><li>Conn</li></ul><p>Connæ˜¯httpçš„è¯·æ±‚è¿æ¥ã€‚</p><ul><li>Handler</li></ul><p>Handleræ˜¯æ¥æ”¶è¯·æ±‚åé€»è¾‘å¤„ç†å’Œç”Ÿæˆè¿”å›ä¿¡æ¯çš„é€»è¾‘ã€‚</p><hr><h2 id="httpåŒ…è¿è¡Œæœºåˆ¶"><a href="#httpåŒ…è¿è¡Œæœºåˆ¶" class="headerlink" title="httpåŒ…è¿è¡Œæœºåˆ¶"></a>httpåŒ…è¿è¡Œæœºåˆ¶</h2><hr><p>1.åˆ›å»ºListen Socketï¼Œç›‘å¬æŒ‡å®šçš„ç«¯å£ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚åˆ°æ¥ã€‚<br>2.Listen Socketæ¥å—å®¢æˆ·ç«¯çš„è¯·æ±‚, å¾—åˆ°Client Socketï¼Œæ¥ä¸‹æ¥é€šè¿‡Client Socketä¸å®¢æˆ·ç«¯é€šä¿¡ã€‚<br>3.å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œé¦–å…ˆä»Client Socketè¯»å–HTTPè¯·æ±‚çš„åè®®å¤´ï¼Œå¦‚æœæ˜¯POSTæ–¹æ³•ï¼Œè¿˜å¯èƒ½è¦è¯»å–å®¢æˆ·ç«¯æäº¤çš„æ•°æ®ï¼Œç„¶åäº¤ç»™ç›¸åº”çš„handlerå¤„ç†è¯·æ±‚ï¼Œhandlerå¤„ç†å®Œæ¯•å‡†å¤‡å¥½å®¢æˆ·ç«¯éœ€è¦çš„æ•°æ®ï¼Œé€šè¿‡Client Socketå†™ç»™å®¢æˆ·ç«¯ã€‚</p><hr><p><img src="https://tao7app.files.wordpress.com/2023/01/img_20230105_133058.jpg" alt="Goè¯­è¨€ä¸­httpåŒ…çš„è¿è¡Œç¤ºæ„å›¾"></p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token number">1.</span> <span class="token keyword">func</span><span class="token punctuation">(</span>srv <span class="token operator">*</span>Server<span class="token punctuation">)</span><span class="token function">Serve</span><span class="token punctuation">(</span><span class="token number">1</span> net<span class="token punctuation">.</span>Listener<span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token punctuation">{</span><span class="token number">2.</span><span class="token keyword">defer</span> <span class="token number">1.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">3.</span> <span class="token keyword">var</span> tempDelay time<span class="token punctuation">.</span>Duration<span class="token comment">// how long to sleep on accept failure</span><span class="token number">4.</span> <span class="token keyword">for</span><span class="token punctuation">{</span><span class="token number">5.</span> rw<span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token number">1.</span><span class="token function">Accept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">6.</span> <span class="token keyword">if</span> e ï¼<span class="token operator">=</span><span class="token boolean">nil</span> <span class="token punctuation">(</span><span class="token number">7.</span> <span class="token keyword">if</span> ne<span class="token punctuation">,</span> ok <span class="token operator">:=</span> e<span class="token punctuation">.</span><span class="token punctuation">(</span>net<span class="token punctuation">.</span>Error<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token operator">&amp;&amp;</span> ne<span class="token punctuation">.</span><span class="token function">Temporary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">8.</span><span class="token keyword">if</span> tempDelay<span class="token operator">=</span><span class="token number">5</span><span class="token operator">*</span>time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span><span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token number">10.</span> tempDelay<span class="token operator">*=</span><span class="token number">2</span><span class="token number">11.</span> <span class="token punctuation">)</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">;</span> tempDelay <span class="token operator">&gt;</span> maxï¼š<span class="token operator">=</span><span class="token number">1</span><span class="token number">12.</span> <span class="token number">13.</span> <span class="token keyword">if</span> max tempDelay <span class="token operator">=</span> max ã€<span class="token number">14.</span> <span class="token punctuation">)</span><span class="token number">15.</span> log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"http: Accept error: 8v; retrying in Bv"</span><span class="token punctuation">,</span> e<span class="token punctuation">,</span> tempDelay<span class="token punctuation">)</span><span class="token number">16.</span> time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>tempDelay<span class="token punctuation">)</span><span class="token number">17.</span> <span class="token keyword">continue</span><span class="token number">18.</span><span class="token number">19.</span> <span class="token keyword">return</span> e<span class="token number">21.</span> <span class="token number">20.</span> tempDelay <span class="token operator">=</span><span class="token number">0</span><span class="token number">22.</span><span class="token number">23.</span> c<span class="token punctuation">,</span> errï¼š<span class="token operator">=</span>srv<span class="token punctuation">.</span><span class="token function">newConn</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token keyword">if</span> err <span class="token operator">!=</span><span class="token boolean">nil</span> <span class="token punctuation">(</span><span class="token number">24.</span><span class="token keyword">continue</span><span class="token number">25.</span><span class="token number">26.</span><span class="token number">27.</span> <span class="token keyword">go</span> c<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">28.</span> <span class="token punctuation">}</span><span class="token number">29.</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡è¿™æ®µæºç å¯ä»¥çœ‹åˆ° Go è¯­è¨€å¯¹äºæ•´ä¸ª http è¯·æ±‚çš„å¤„ç†è¿‡ç¨‹ã€‚<br>Serverçš„Serve(l net.Listener)æ–¹æ³•å°±æ˜¯ç”¨äºç›‘å¬å’Œå¤„ç†httpè¯·æ±‚çš„ã€‚ä»ç¬¬4è¡Œå¼€å§‹ï¼Œå‡½æ•°ä¸­å°±å¼€å§‹äº†ä¸€ä¸ªforå¾ªç¯ï¼Œç¬¬5è¡Œé€šè¿‡å‚æ•°Listenerçš„Acceptæ¥æ”¶è¯·æ±‚ï¼Œç„¶ååœ¨ç¬¬23è¡ŒåŸºäºæ¥æ”¶çš„ä¿¡æ¯æ–°å»ºä¸€ä¸ªConnï¼Œæœ€åç¬¬27è¡Œå¯åŠ¨ä¸€ä¸ªgoroutineæ¥å•ç‹¬ä¸ºä¸€ä¸ªConnæœåŠ¡ï¼Œä¸å½±å“å…¶ä»–çš„Connæ˜¯å¹¶å‘çš„ä½“ç°ã€‚</p><p>æ•´ä¸ªçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªè¦äº†è§£æ¸…æ¥šä¸‹é¢ä¸‰ä¸ªé—®é¢˜ï¼Œä¹Ÿå°±çŸ¥é“Goè¯­è¨€æ˜¯å¦‚ä½•è®©Webè¿è¡Œèµ·æ¥äº†ã€‚</p><p>â— å¦‚ä½•ç›‘å¬ç«¯å£ï¼Ÿâ— å¦‚ä½•æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Ÿâ— å¦‚ä½•åˆ†é…handlerï¼Ÿä»å‰é¢å°èŠ‚çš„ä»£ç é‡Œé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒGo è¯­è¨€æ˜¯é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥æ“ä½œè¿™ä¸ªäº‹æƒ…çš„ListenAndServeæ¥ç›‘å¬çš„ï¼Œè¿™ä¸ªåº•å±‚å…¶å®è¿™æ ·å¤„ç†çš„ï¼šåˆå§‹åŒ–ä¸€ä¸ªserverå¯¹è±¡ï¼Œè°ƒç”¨net. Listen(â€œtcpâ€, addr)ï¼Œä¹Ÿå°±æ˜¯åº•å±‚ç”¨TCPåè®®æ­å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œç„¶åç›‘æ§æˆ‘ä»¬è®¾ç½®çš„ç«¯å£ã€‚<br>ç›‘æ§ä¹‹åå¦‚ä½•æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚å‘¢ï¼Ÿä¸Šé¢ä»£ç æ‰§è¡Œç›‘æ§ç«¯å£ä¹‹åï¼Œè°ƒç”¨äº†srv.Serve(net.Listener)å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å°±æ˜¯å¤„ç†æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ä¿¡æ¯ã€‚è¿™ä¸ªå‡½æ•°é‡Œé¢èµ·äº†ä¸€ä¸ª for{}ï¼Œé¦–å…ˆé€šè¿‡ Listener æ¥æ”¶è¯·æ±‚ï¼Œå…¶æ¬¡åˆ›å»ºä¸€ä¸ª Connï¼Œæœ€åå•ç‹¬å¼€äº†ä¸€ä¸ªgoroutineï¼ŒæŠŠè¿™ä¸ªè¯·æ±‚çš„æ•°æ®å½“åšå‚æ•°æ‰”ç»™è¿™ä¸ªconnå»æœåŠ¡ï¼šgo c.serve()ã€‚å³æˆé«˜å¹¶å‘ä½“ç°ï¼Œç”¨æˆ·çš„æ¯ä¸€æ¬¡è¯·æ±‚éƒ½æ˜¯åœ¨ä¸€ä¸ªæ–°çš„goroutineå»æœåŠ¡ï¼Œç›¸äº’ä¸å½±å“ã€‚<br>é‚£ä¹ˆå¦‚ä½•å…·ä½“åˆ†é…åˆ°ç›¸åº”çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚å‘¢ï¼Ÿconn é¦–å…ˆä¼šè§£ærequest:c.readRequest()ï¼Œç„¶åè·å–ç›¸åº”çš„handler:handler := c.server.Handlerï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åˆšæ‰åœ¨è°ƒç”¨å‡½æ•° ListenAndServe æ—¶å€™çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å‰é¢ä¾‹å­ä¼ é€’çš„æ˜¯ nilï¼Œä¹Ÿå°±æ˜¯ä¸ºç©ºï¼Œé»˜è®¤è·å–handler = DefaultServeMuxï¼Œé‚£ä¹ˆç”¨è¿™ä¸ªå˜é‡åšä»€ä¹ˆçš„å‘¢ï¼Ÿå¯¹ï¼Œè¿™ä¸ªå˜é‡å°±æ˜¯ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå®ƒç”¨æ¥åŒ¹é…urlè·³è½¬åˆ°å…¶ç›¸åº”çš„handleå‡½æ•°ã€‚æˆ‘ä»¬è°ƒç”¨çš„ä»£ç é‡Œé¢ç¬¬ä¸€å¥å°±è°ƒç”¨äº†http.HandleFunc(â€œ/â€œ, sayhelloName)ã€‚è¿™ä¸ªä½œç”¨å°±æ˜¯æ³¨å†Œäº†è¯·æ±‚/çš„è·¯ç”±è§„åˆ™ï¼Œå½“è¯·æ±‚ uri ä¸ºâ€/â€œï¼Œè·¯ç”±å°±ä¼šè½¬åˆ°å‡½æ•° sayhelloNameï¼ŒDefaultServeMux ä¼šè°ƒç”¨ServeHTTPæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å†…éƒ¨å…¶å®å°±æ˜¯è°ƒç”¨sayhelloNameæœ¬èº«ï¼Œæœ€åé€šè¿‡å†™å…¥responseçš„ä¿¡æ¯åé¦ˆåˆ°å®¢æˆ·ç«¯ã€‚è¯¦ç»†çš„æµç¨‹å¦‚å›¾3.10æ‰€ç¤ºã€‚</p><p><img src="https://tao7app.files.wordpress.com/2023/01/weread_image_87940054354055.jpeg"></p><p>è‡³æ­¤ï¼Œä¸‰ä¸ªé—®é¢˜å·²ç»å…¨éƒ¨å¾—åˆ°äº†è§£ç­”ï¼Œä½ ç°åœ¨å¯¹äºGoè¯­è¨€å¦‚ä½•è®©Webè·‘èµ·æ¥æ˜¯å¦å·²ç»æœ‰åŸºæœ¬äº†è§£ï¼Ÿ</p><hr><h2 id="Goè¯­è¨€çš„httpåŒ…è¯¦è§£"><a href="#Goè¯­è¨€çš„httpåŒ…è¯¦è§£" class="headerlink" title="Goè¯­è¨€çš„httpåŒ…è¯¦è§£"></a>Goè¯­è¨€çš„httpåŒ…è¯¦è§£</h2><hr><ol><li><strong>Handler</strong></li></ol><p>net/httpåŒ…çš„Handleå’ŒHandleFuncè¿™ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯pattern(è¯·æ±‚è·¯å¾„)ï¼Œå› ä¸ºå…¶æ•ˆæœéƒ½æ˜¯ç»™è·¯å¾„ç»‘å®šå¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼›å¯¹äºç¬¬äºŒä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯Handleræ¥å£ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦å®ç°äº†è¯¥æ¥å£çš„å‡½æ•°éƒ½å¯ä»¥ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ äººï¼›å¦ä¸€ä¸ªåˆ™æ˜¯ä»¥å‡½æ•°ç±»å‹ä½œä¸ºå‚æ•°ï¼Œåªè¦ä¼ å…¥çš„å‡½æ•°ä»¥func(http.ResponseWriterï¼Œ*http.Request)å½¢å¼å£°æ˜å°±å¯ä»¥ã€‚å› ä¸ºServeHttpçš„å£°æ˜æ»¡è¶³HandleFuncç¬¬äºŒä¸ªå‚æ•°çš„è¦æ±‚ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­ç¬¬6è¡Œå¯ä»¥æ”¹ä¸ºï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">th <span class="token operator">:=</span> <span class="token function">ThisHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span>th<span class="token punctuation">.</span>ServeHttp<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è™½ç„¶ä¸Šé¢çš„ä¸¤ä¸ªå‡½æ•°åœ¨ä½¿ç”¨çš„æ—¶å€™æœ‰äº›åŒºåˆ«ï¼Œä½†æ˜¯å¯¹äºCoè¯­è¨€çš„åº•å±‚å®ç°æ¥è¯´å¹¶æ— äºŒ.ï¼Œéƒ½æ˜¯äº¤ç»™DcfaultServeMuxæ¥å®Œæˆå¤„ç†å‡½æ•°å’Œè·¯ç”±çš„ç»‘å®šã€‚</p><ol start="3"><li><strong>ServerMux</strong></li></ol><p>DefualtSeveMuxä¹Ÿæä¾›äº†DefaultServeMux handleå’ŒDefaulterveMux handleFuncè¿™ä¸¤ä¸ªå‡½æ•°ã€‚å¯ç”¨å®ƒä»¬æŠŠhttp Handleå’Œhttp.andleFuncçš„paternå’ŒHandlerå‡½æ•°ç»‘å®šåˆ°ServerMuxä¸Šã€‚DefaultServeMuxæ˜¯ServerMuxçš„å®ä¾‹å¯¹è±¡ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹ServerMuxçš„ç»“æ„ä½“å®šä¹‰ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> ServeMux <span class="token keyword">struct</span><span class="token punctuation">(</span>mu sync<span class="token punctuation">.</span>RWMutex<span class="token comment">// è¯»å†™é”</span>m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>muxEntry<span class="token comment">//è·¯ç”± map, pattern-&gt;HandleFunc</span>hosts <span class="token builtin">bool</span><span class="token comment">// æ˜¯å¦åŒ…å« hosts</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> muxEntry <span class="token keyword">struct</span><span class="token punctuation">(</span>explicit <span class="token builtin">bool</span><span class="token comment">//æ˜¯å¦ç²¾ç¡®åŒ¹é…ï¼ŒhttpåŒ…å†…éƒ½ä½¿ç”¨ture</span>h Handler <span class="token comment">// è·¯ç”±å¯¹åº”çš„Handler</span>pattern <span class="token builtin">string</span><span class="token comment">// è·¯ç”±</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€æœ‰çš„è·¯ç”±å’Œhandlerçš„ç»‘å®šæœ€ç»ˆéƒ½å­˜å‚¨åˆ°è¿™é‡Œã€‚å› ä¸ºhttpåŒ…å†…ä»…æ”¯æŒç²¾ç¡®åŒ¹é…ï¼Œæ‰€ä»¥ä½¿ç”¨æ ‡å‡†çš„net/httpåŒ…ä¸èƒ½ç›´æ¥é…ç½®å¸¦å‚æ•°çš„è·¯ç”±ï¼Œåªèƒ½é…ç½®å‚æ•°å‰é¢çš„è·¯å¾„ï¼Œç„¶ååœ¨handlerå†…éƒ¨å†å¤„ç†ã€‚ä¹Ÿå¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹åŒ…ï¼Œæ¯”å¦‚httprouterã€‚</p><ol start="3"><li><strong>Server</strong></li></ol><p>åœ¨é…ç½®å¥½è·¯ç”±ã€å¤„ç†å‡½æ•°ä»¥åï¼Œæ¥ä¸‹æ¥å°±è¦å¯åŠ¨æœåŠ¡ï¼Œå¯ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span>"<span class="token punctuation">:</span><span class="token number">8080</span>Â°<span class="token punctuation">,</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›‘å¬çš„ç«¯å£ï¼Œä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ é€’ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯handlerï¼Œä¼ å…¥çš„æ˜¯ilè¯¥è¯­å¥æ‰§è¡Œå®Œæ¯•åå°±å¼€å§‹ç›‘å¬8080ç«¯å£ï¼Œæ¥çœ‹ä¸€ä¸‹è¯¥å‡½æ•°çš„æºç ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">LiatenAndserve</span><span class="token punctuation">(</span>addrstringrhandler Handler<span class="token punctuation">)</span><span class="token builtin">error</span><span class="token punctuation">[</span>server te <span class="token function">aServer</span><span class="token punctuation">(</span>Addr<span class="token punctuation">:</span>addr<span class="token punctuation">:</span>Handler<span class="token punctuation">:</span> handler<span class="token punctuation">)</span><span class="token keyword">return</span> server<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥æ–¹æ³•é¦–å…ˆè¦åšçš„å°±æ˜¯åˆ›å»º Server çš„å®ä¾‹ï¼Œå¹¶ä¸”è°ƒç”¨å…¶ ListenAndServeæ–¹ã€‚å¯è§Serveréå¸¸é‡è¦ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹Serverçš„ç»“æ„ä½“ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token number">1.</span> <span class="token keyword">type</span> Server atructç›‘å¬çš„åœ°å€å’Œå©šå£Addr <span class="token builtin">string</span><span class="token number">3.</span> <span class="token number">2.</span> Bandler Bandler <span class="token comment">// handlerto invoke, http.DefaultServeMuxif nil</span>TLSContig<span class="token operator">*</span>tls<span class="token punctuation">.</span>Config <span class="token operator">/</span><span class="token number">1</span> è¯»è¶…æ—¶æ—¶é—´<span class="token number">5.</span> ieadTineouttime<span class="token punctuation">.</span>Durationtime<span class="token punctuation">.</span>Doration <span class="token comment">// è¯»å…³æ–‡ä»¶è¶…æ—¶æ—¶é—´</span><span class="token number">6.</span> ReadieaderTineout<span class="token number">7.</span> writeTimeouttime<span class="token punctuation">.</span>Duration <span class="token comment">//å†™è¶…æ—¶æ—¶é—´</span><span class="token number">8.</span> IdleTimoout time<span class="token punctuation">.</span>Duration<span class="token number">9.</span> HaxlleaderBytesint<span class="token number">10.</span> TLSNextProtonap<span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>Server<span class="token punctuation">,</span> <span class="token operator">*</span>tls<span class="token punctuation">.</span>Conn<span class="token punctuation">,</span> Handler<span class="token punctuation">)</span><span class="token number">12.</span> ConnState <span class="token keyword">func</span> <span class="token punctuation">(</span>net<span class="token punctuation">.</span>Conn<span class="token punctuation">,</span> ConnState<span class="token punctuation">)</span><span class="token number">12.</span> ErrorLog Â·log<span class="token punctuation">.</span>Logger<span class="token number">13.</span><span class="token number">14.</span> BaseContextfunc <span class="token punctuation">(</span>net<span class="token punctuation">.</span>Listener<span class="token punctuation">)</span> context<span class="token punctuation">.</span>ContextConnContext <span class="token keyword">func</span><span class="token punctuation">(</span>ctx context<span class="token punctuation">.</span>Context<span class="token punctuation">,</span> c net<span class="token punctuation">.</span>Conn<span class="token punctuation">)</span> context<span class="token punctuation">.</span>Context<span class="token number">25.</span><span class="token number">16.</span> disableKeepAlivesint32 accessed atomically<span class="token punctuation">.</span><span class="token number">17.</span> inShut<span class="token punctuation">.</span>dowm <span class="token builtin">int</span> <span class="token number">32</span> accessedatomically <span class="token punctuation">(</span>non<span class="token operator">-</span>zero means we're in<span class="token number">18.</span><span class="token number">19.</span> nextProtoonce sync<span class="token punctuation">.</span>Once <span class="token comment">// guards setupHTTP2</span>init<span class="token number">11</span> http2<span class="token punctuation">.</span>ConfigureServerShutdown<span class="token punctuation">)</span><span class="token number">20.</span> nextProtoErr erTor result of <span class="token keyword">if</span> used<span class="token number">21.</span> mu sync<span class="token punctuation">,</span>Mutex<span class="token number">22.</span><span class="token number">23.</span> 1isteners <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token operator">*</span>net<span class="token punctuation">.</span>Listener<span class="token punctuation">]</span><span class="token keyword">struct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">24.</span> activeConndoneChan <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token operator">*</span>conn<span class="token punctuation">)</span><span class="token keyword">struct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">struct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">25.</span> onShutdownchan<span class="token punctuation">(</span><span class="token function">lfunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token number">26.</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†æ¥çœ‹ä¸€ä¸‹Serverçš„ä¸‰ä¸ªæ–¹æ³•ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span><span class="token punctuation">(</span>srv <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token function">Serve</span><span class="token punctuation">(</span><span class="token number">1</span> net<span class="token punctuation">.</span>Listener<span class="token punctuation">)</span> <span class="token builtin">error</span><span class="token keyword">func</span><span class="token punctuation">(</span>srv <span class="token operator">*</span>Server<span class="token punctuation">)</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">func</span><span class="token punctuation">(</span>srv<span class="token operator">*</span>Server<span class="token punctuation">)</span><span class="token function">ListenAndServeTLS</span><span class="token punctuation">(</span>certFile<span class="token punctuation">,</span> keyFile <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token builtin">error</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­Serveæ–¹æ³•åœ¨9.1.1èŠ‚å·²ç»è¯¦ç»†ä»‹ç»è¿‡ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚<br>ListenAndServeæ–¹æ³•çš„ä½œç”¨æ˜¯å¼€å¯http ServeræœåŠ¡ã€‚ListenAndServeTLSæ–¹æ³•çš„ä½œç”¨æ˜¯å¼€å¯https ServeræœåŠ¡ã€‚</p><p>RespomseWriter:ç”Ÿæˆ Responseçš„æ¥å£ã€‚<br>ServerMuxï¼šè·¯ç”±å¤„ç†å‡½æ•°ï¼Œè¿™ä¸ªåˆšåˆšä»‹ç»è¿‡ã€‚<br>åœ¨Serveæ–¹æ³•æ‰§è¡Œå®Œæˆåï¼Œå°±æ‰§è¡ŒConn(è¿æ¥)çš„Serveæ–¹æ³•ï¼Œç„¶åå†é€šè¿‡Connçš„readRequestæ–¹æ³•è·å–Responseã€‚ä»é€»è¾‘ä¸Šæ¥è¯´ï¼Œc.serveæ–¹æ³•å°±æ˜¯å®Œæˆè¿™ä¸ªåŠŸèƒ½çš„ï¼Œæ­¤å¤„æˆ‘ä»¬éœ€å…³æ³¨ä»¥ä¸‹ä¸‰ä¸ªæ¥å£ã€‚</p><p>(1)ResponseWriteræ¥å£</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> ResponseWriter <span class="token keyword">interface</span><span class="token comment">// Beader æ–¹æ³•è¿”å› Response è¿”å›çš„ Header ä¾›è¯»å†™</span>Header <span class="token punctuation">(</span><span class="token punctuation">)</span> Header<span class="token comment">// Write æ–¹æ³•å†™ Response çš„ Body</span><span class="token function">Write</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token builtin">byte</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token comment">// WriteHeader æ–¹æ³•æ ¹æ® HTTPçŠ¶æ€ç æ¥å†™ Responseçš„Header</span><span class="token function">WriteHeader</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯¥æ¥å£çš„ä¸»è¦ä½œç”¨æ˜¯ä¾›Handlerå‡½æ•°è°ƒç”¨ï¼Œç”¨æ¥ç”Ÿæˆè¦è¿”å›çš„Responseã€‚<br>(2)Flusheræ¥å£</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Flusher <span class="token keyword">interface</span> t<span class="token number">1</span><span class="token operator">/</span>åˆ·æ–°ç¼“å­˜åŒºCotter <span class="token function">Flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¯¥æ¥å£çš„ä¸»è¦ä½œç”¨æ˜¯ä¾›Handlerè°ƒç”¨ï¼Œå°†å†™ç¼“å­˜ä¸­çš„æ•°æ®åˆ·æ–°åˆ°å®¢æˆ·ç«¯ã€‚<br>(3)Hijackeræ¥å£</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Hijacker <span class="token keyword">interface</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> Hijacker <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>net<span class="token punctuation">.</span>Conn<span class="token punctuation">,</span> <span class="token operator">*</span>bufio<span class="token punctuation">.</span>ReadWriter<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¯¥æ¥å£çš„ä¸»è¦ä½œç”¨æ˜¯ä¾›Handlerè°ƒç”¨ï¼Œç”¨ä»¥å…³é—­è¿æ¥ã€‚<br>ä»¥ä¸Šæ˜¯Handleråœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æœ€å¸¸ç”¨ã€æœ€é‡è¦çš„ä¸‰ä¸ªæ¥å£ï¼Œæ­£æ˜¯è¿™ä¸‰ä¸ªæ¥å£ä½¿Handlerå¯ä»¥åœ¨å¤„ç†å®Œé€»è¾‘åæŠŠç»“æœå†™å›å®¢æˆ·ç«¯ï¼Œç¨åä¼šä»‹ç»å®ç°è¿™ä¸‰ä¸ªæ¥å£çš„å¯¹è±¡ã€‚<br>é€šè¿‡å¯¹Serverçš„ä»‹ç»ï¼Œè¯»è€…å¯ä»¥çŸ¥é“å¦‚ä½•åœ¨æ¥å—è¯·æ±‚åè°ƒç”¨Handlerå¹¶ä¸”ç”Ÿæˆresponseã€‚ responseç”Ÿæˆä»¥åæ•°æ®æ˜¯å¦‚ä½•å†™åˆ°å®¢æˆ·ç«¯çš„å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹äº†è§£responseã€‚<br>4.response<br>ä¸‹é¢çš„æ–¹æ³•ç”¨äºæŠŠæ•°æ®å†™ç»™å®¢æˆ·ç«¯ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token function">serverHandler</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>Server<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span>w<span class="token punctuation">.</span>req<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¯¥è¯­å¥æœ€ç»ˆè§¦å‘äº†è·¯ç”±ç»‘å®šï¼Œwæ˜¯responseçš„å®ä¾‹å¯¹è±¡(æ­¤å¤„çš„wæ˜¯ResponseWriteræ¥å£)ï¼Œresponseå®ç°äº† ResponseWriterã€Flusherã€Hijackeræ¥å£ã€‚<br>æ¥çœ‹ä¸€ä¸‹responseç»“æ„ä½“çš„å®šä¹‰ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token number">1.</span> <span class="token keyword">type</span> response <span class="token keyword">struct</span>conn <span class="token operator">*</span>conn <span class="token comment">//ä¿å­˜æ­¤æ¬¡HTTPè¿æ¥çš„ä¿¡æ¯</span><span class="token comment">//å¯¹åº”è¯·æ±‚ä¿¡æ¯</span><span class="token operator">*</span>Request<span class="token number">4.</span> <span class="token number">2.</span> <span class="token number">3.</span> regchunking <span class="token builtin">bool</span> <span class="token comment">//æ˜¯å¦ä½¿ç”¨chunk</span><span class="token number">5.</span> wroteHeaderbool <span class="token comment">// headeræ˜¯å¦å·²ç»æ‰§è¡Œè¿‡å†™æ“ä½œ</span><span class="token number">6.</span> wroteContinuebool <span class="token comment">//100 Continue response was written</span><span class="token number">7.</span> header Header <span class="token operator">/</span> <span class="token operator">/</span> è¿”å›çš„ HTTPçš„Header<span class="token number">8.</span> written <span class="token builtin">int64</span> <span class="token comment">// Bodyçš„å­—èŠ‚æ•°</span><span class="token number">9.</span> contentLength <span class="token builtin">int64</span> <span class="token comment">// Content é•¿åº¦</span>HTTPçŠ¶æ€<span class="token number">10.</span>status<span class="token comment">//</span><span class="token number">11.</span> needSniffboolint<span class="token number">1</span><span class="token operator">/</span>æ˜¯å¦å¼€å¯sniffã€‚è‹¥ä¸è®¾ç½®Content<span class="token operator">-</span>Typeï¼Œå¼€å¯sniffèƒ½è‡ªåŠ¨ç¡®å®šContent<span class="token operator">-</span>Type <span class="token operator">/</span><span class="token number">1</span> æ˜¯å¦ä¿æŒé•¿é“¾æ¥ã€‚è‹¥requestæœ‰keep<span class="token operator">-</span>aliveï¼Œè¯¥å­—<span class="token number">12.</span> closeAfterReplyboolæ®µå°±è®¾ç½®ä¸º<span class="token boolean">false</span>ã€‚ æ˜¯å¦requestBodyå¤ªå¤§ã€‚å½“requestBodyå¤ªå¤§æ—¶ï¼Œ<span class="token number">13.</span> requestBodyLimitHitbool <span class="token comment">//</span>response è¿”å› <span class="token number">411</span><span class="token number">14.</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœåŠ¡å™¨ç«¯éœ€è¦è¿”å›ç»™å®¢æˆ·ç«¯çš„æ‰€æœ‰ä¿¡æ¯éƒ½åŒ…å«åœ¨responseä¸­ã€‚<br>å†æ¥çœ‹ä¸€ä¸‹responseçš„ä¸»è¦æ–¹æ³•ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span><span class="token punctuation">(</span>w <span class="token operator">*</span>response<span class="token punctuation">)</span> <span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Header<span class="token keyword">func</span><span class="token punctuation">(</span>w<span class="token operator">*</span>response<span class="token punctuation">)</span><span class="token function">WriteHeader</span><span class="token punctuation">(</span>code <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token keyword">func</span><span class="token punctuation">(</span>w<span class="token operator">*</span>response<span class="token punctuation">)</span><span class="token function">Write</span><span class="token punctuation">(</span>data <span class="token punctuation">(</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token keyword">func</span><span class="token punctuation">(</span>w<span class="token operator">*</span>response<span class="token punctuation">)</span><span class="token function">WriteString</span><span class="token punctuation">(</span>data <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token comment">// either dataB or dataS is non-zero.</span><span class="token keyword">func</span><span class="token punctuation">(</span>w <span class="token operator">*</span>response<span class="token punctuation">)</span> <span class="token function">write</span><span class="token punctuation">(</span>lenDataint<span class="token punctuation">,</span> dataB <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> dataS <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>w <span class="token operator">*</span>response<span class="token punctuation">)</span> <span class="token function">finishRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">func</span><span class="token punctuation">(</span>w <span class="token operator">*</span>response<span class="token punctuation">)</span> <span class="token function">Flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">func</span><span class="token punctuation">(</span>w <span class="token operator">*</span>response<span class="token punctuation">)</span> <span class="token function">Hijack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>rwcnet<span class="token punctuation">.</span>Conn<span class="token punctuation">,</span> buf <span class="token operator">*</span>bufio<span class="token punctuation">.</span>ReadWriter<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œresponseç¡®å®å®ç°äº†ResponseWriterã€Flusherã€Hijackerä¸‰ä¸ªæ¥å£ï¼Œæœ‰äº†è¿™ä¸‰ä¸ªæ¥å£ï¼Œresponseå°±å¯ä»¥æŠŠå¤„ç†ç»“æœå†™å›å®¢æˆ·ç«¯ã€‚</p><ol start="5"><li> ServeHTTP(w,w.req)<br>å‰é¢ä»‹ç»äº†å¦‚ä½•é€šè¿‡ responseæŠŠæ•°æ®å†™å›å®¢æˆ·ç«¯ï¼Œä¸è¿‡Handlerå¦‚ä½•ç”Ÿæˆresponseç›®å‰è¿˜æ²¡æœ‰ä»‹ç»ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œæ¥çœ‹Handleræ¥å£ï¼š</li></ol><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Handler <span class="token keyword">interface</span><span class="token punctuation">(</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>ResponseWriter<span class="token punctuation">,</span> <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token operator">/</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…·ä½“çš„é€»è¾‘å‡½æ•°<br>åœ¨å®ç°Handleræ¥å£çš„æ—¶å€™ï¼Œå°±æ„å‘³ç€å·²ç»æœ‰å¤„ç†è¯·æ±‚é€»è¾‘çš„å‡½æ•°äº†ã€‚serverHandleé€šè¿‡ServeHTTPæ¥é€‰æ‹©è§¦å‘HandleFuncï¼Œæ­¤å¤„æœ‰ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰çš„Handlerå‡½æ•°å°±è°ƒç”¨è‡ªå·±çš„ï¼Œå¦‚æœæ˜¯nilåˆ™ä½¿ç”¨é»˜è®¤çš„DefaultServeMuxã€‚ä¸‹é¢æ¥æ¢³ç†è¿™ä¸ªæµç¨‹ã€‚<br>DefaultServeMux.ServeHttpçš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">i<span class="token punctuation">.</span> h<span class="token punctuation">,</span> <span class="token operator">:=</span> mux<span class="token punctuation">.</span><span class="token function">Handler</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>ii<span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è€…å¯¹è¿™äº›å†…å®¹çš„ç†è§£ï¼Œæ­¤å¤„å†ä»æ‰§è¡Œæµç¨‹ä¸Šæ¢³ç†ä¸€ä¸‹ï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ã€‚<br>ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨http.HandleFuncæ³¨å†Œè·¯ç”±å’Œå¯¹åº”å¤„ç†å‡½æ•°ã€‚<br>ç¬¬äºŒæ­¥ï¼šå…ˆåè°ƒç”¨DefaultServeMuxçš„HandleFuncå’ŒHandleï¼Œå¹¶ä¸”å‘handler(ä¹Ÿå°±æ˜¯map[string]muxEntry)ä¸­æ³¨å†Œè·¯ç”±å’Œå¯¹è±¡çš„å‡½æ•°ã€‚<br>ç¬¬ä¸‰æ­¥ï¼šå®ä¾‹åŒ– Serverï¼Œå¹¶è°ƒç”¨ListenAndServeã€‚<br>ç¬¬å››æ­¥ï¼šè°ƒç”¨net.Listen(â€œtcpâ€ï¼Œaddr)ï¼Œç­‰å¾…è¯·æ±‚ï¼Œæ¯ä¸€ä¸ªè¯·æ±‚åˆ›å»ºä¸€ä¸ªConmï¼Œå¹¶ä¸”å¯åŠ¨ä¸€ä¸ªgoroutineå¤„ç†è¯·æ±‚ã€‚<br>ç¬¬äº”æ­¥ï¼šé€šè¿‡readRequestæ–¹æ³•è¯»å–è¯·æ±‚å†…å®¹ï¼Œæˆ–è€…è¯´responseçš„å–å€¼è¿‡ç¨‹ã€‚<br>ç¬¬å…­æ­¥ï¼šè¿›å…¥serveHandler.ServeHTTPï¼ŒServeHTTPæ–¹æ³•å†…ä¼šåˆ¤æ–­æœ‰æ²¡æœ‰è‡ªå®šä¹‰çš„handlerï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨é»˜è®¤çš„DefaultServeMuxã€‚<br>ç¬¬ä¸ƒæ­¥ï¼šè°ƒç”¨handler(æˆ–DefaultServeMux)çš„ServeHTTPæ–¹æ³•ã€‚<br>ç¬¬å…«æ­¥ï¼šé€šè¿‡requesté€‰æ‹©åŒ¹é…çš„handlerï¼Œéå†muxEntryï¼Œå¯»æ‰¾æ»¡è¶³è¿™ä¸ªRequestçš„è·¯ç”±ã€‚å¦‚æœæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„è·¯ç”±ï¼Œè°ƒç”¨å¯¹è±¡handlerçš„ServeHTTPï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„è·¯ç”±ï¼Œè°ƒç”¨NotFoundHandlerçš„ServeHTTPã€‚<br>ä»¥ä¸Šå°±æ˜¯httpåŒ…çš„å¤§è‡´å·¥ä½œæµç¨‹ã€‚ä¸ºä¾¿äºè¯»è€…æ¸…æ™°ç†è§£ï¼Œè¿™é‡ŒæŠŠæ ¸å¿ƒæºç æŒ‰ç…§åŠŸèƒ½æ•´ç†å¦‚ä¸‹ã€‚<br>(1)è·¯ç”±æ³¨å†Œå¯¹åº”çš„æºç </p><pre class="line-numbers language-go" data-language="go"><code class="language-go">http<span class="token punctuation">.</span>HandlerFunc<span class="token punctuation">:</span><span class="token keyword">type</span> HandlerFunc <span class="token keyword">func</span><span class="token punctuation">(</span>ResponseWriter<span class="token punctuation">,</span> <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token keyword">func</span><span class="token punctuation">(</span>f HandlerFunc<span class="token punctuation">)</span> ServeHTTP <span class="token punctuation">(</span>w ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token keyword">func</span> HandleFunc <span class="token punctuation">(</span>pattern <span class="token builtin">string</span><span class="token punctuation">,</span> handler <span class="token keyword">func</span><span class="token punctuation">(</span>ResponseWriter<span class="token punctuation">,</span> <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">func</span><span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token punctuation">)</span>accern <span class="token builtin">string</span><span class="token punctuation">,</span> handler <span class="token keyword">func</span><span class="token punctuation">(</span>ResponseWriter<span class="token punctuation">,</span> http<span class="token punctuation">.</span>Handle<span class="token punctuation">:</span><span class="token keyword">func</span> <span class="token punctuation">(</span>mux <span class="token operator">*</span>ServeMux<span class="token punctuation">)</span> <span class="token function">Handle</span><span class="token punctuation">(</span>pattern <span class="token builtin">string</span><span class="token punctuation">,</span> handler Handler<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>(2)æ¥å£ç›‘å¬ç›¸å…³æºç </p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">ListenAndServe</span><span class="token punctuation">(</span>addr <span class="token builtin">string</span><span class="token punctuation">,</span> handler Handler<span class="token punctuation">)</span><span class="token builtin">error</span><span class="token keyword">func</span> <span class="token punctuation">(</span>srv <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token builtin">error</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>(3)æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚<br>Serverçš„Serveæ–¹æ³•ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>srv <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token function">Serve</span><span class="token punctuation">(</span><span class="token number">1</span> net<span class="token punctuation">.</span>Listener<span class="token punctuation">)</span> <span class="token builtin">error</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>Serverçš„newConnæ–¹æ³•ï¼š</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>srv <span class="token operator">*</span>Server<span class="token punctuation">)</span> <span class="token function">newConn</span><span class="token punctuation">(</span>rwc net<span class="token punctuation">.</span>Conn<span class="token punctuation">)</span>conn<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>(4)åˆ†é…Handler</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">c<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>fune <span class="token punctuation">(</span>c <span class="token operator">*</span>conn<span class="token punctuation">)</span>serve <span class="token punctuation">(</span><span class="token punctuation">)</span>c<span class="token punctuation">.</span><span class="token function">readRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">readRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>w <span class="token operator">*</span>response<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token punctuation">(</span>c <span class="token operator">*</span>conn<span class="token punctuation">)</span><span class="token function">ServeHTTP</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> w<span class="token punctuation">.</span>req<span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token punctuation">(</span>sh serverHandler<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>rw ResponseWriter<span class="token punctuation">,</span> req Request<span class="token punctuation">)</span>DefaultServeMux<span class="token keyword">type</span> ServeMux <span class="token keyword">struct</span><span class="token keyword">type</span> muxEntry <span class="token keyword">struct</span>Handleræ¥å£çš„å®šä¹‰ï¼š<span class="token keyword">type</span> Handler <span class="token keyword">interface</span>ServeMux<span class="token punctuation">.</span>ServeHTTP<span class="token keyword">func</span> <span class="token punctuation">(</span>mux <span class="token operator">*</span>ServeMux<span class="token punctuation">)</span><span class="token function">ServelITTP</span><span class="token punctuation">(</span>w ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>Request<span class="token punctuation">)</span>mux<span class="token punctuation">.</span><span class="token function">Handler</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token keyword">func</span> <span class="token punctuation">(</span>mux <span class="token operator">*</span>ServeMux<span class="token punctuation">)</span><span class="token function">Handler</span><span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span><span class="token punctuation">(</span>h Handler<span class="token punctuation">,</span> pattern <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token keyword">func</span> <span class="token punctuation">(</span>mux <span class="token operator">*</span>ServeMux<span class="token punctuation">)</span> handler <span class="token punctuation">(</span>host<span class="token punctuation">,</span> path <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span>h Handler<span class="token punctuation">,</span> pattern <span class="token builtin">string</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Goè¯­è¨€çš„httpæœ‰ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼šConnå’ŒServeMuxã€‚</p><h3 id="Connçš„goroutine"><a href="#Connçš„goroutine" class="headerlink" title="Connçš„goroutine"></a>Connçš„goroutine</h3><p>Go è¯­è¨€ä¸ºäº†å®ç°é«˜å¹¶å‘å’Œé«˜æ€§èƒ½, ä½¿ç”¨goroutineså¤„ç†Connçš„è¯»å†™äº‹ä»¶ï¼Œè¿™æ ·æ¯ä¸ªè¯·æ±‚éƒ½èƒ½ä¿æŒç‹¬ç«‹ï¼Œç›¸äº’ä¸ä¼šé˜»å¡ï¼Œä»¥é«˜æ•ˆå“åº”ç½‘ç»œäº‹ä»¶ã€‚</p><p>Goè¯­è¨€åœ¨ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚æ—¶å†™ä¸‹å¦‚ä¸‹ä»£ç ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go">c<span class="token punctuation">,</span> err <span class="token operator">:=</span> srv<span class="token punctuation">.</span><span class="token function">newConn</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span>        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>            <span class="token keyword">continue</span>        <span class="token punctuation">}</span>        <span class="token keyword">go</span> c<span class="token punctuation">.</span><span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªConnï¼Œè¿™ä¸ªConné‡Œé¢ä¿å­˜äº†è¯¥æ¬¡è¯·æ±‚çš„ä¿¡æ¯ï¼Œç„¶åå†ä¼ é€’åˆ°å¯¹åº”çš„handlerï¼Œè¯¥handlerä¸­ä¾¿å¯ä»¥è¯»å–åˆ°ç›¸åº”çš„headerä¿¡æ¯ï¼Œä»¥ä¿è¯äº†æ¯ä¸ªè¯·æ±‚çš„ç‹¬ç«‹æ€§ã€‚</p><h3 id="ServeMuxçš„è‡ªå®šä¹‰"><a href="#ServeMuxçš„è‡ªå®šä¹‰" class="headerlink" title="ServeMuxçš„è‡ªå®šä¹‰"></a>ServeMuxçš„è‡ªå®šä¹‰</h3><p>conn.serverå†…éƒ¨è°ƒç”¨äº†httpåŒ…é»˜è®¤çš„è·¯ç”±å™¨ï¼Œé€šè¿‡è·¯ç”±å™¨æŠŠæœ¬æ¬¡è¯·æ±‚çš„ä¿¡æ¯ä¼ é€’åˆ°äº†åç«¯çš„å¤„ç†å‡½æ•°ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> ServeMux <span class="token keyword">struct</span> <span class="token punctuation">{</span>            mu sync<span class="token punctuation">.</span>RWMutex   <span class="token comment">//é”ï¼Œç”±äºè¯·æ±‚æ¶‰åŠåˆ°å¹¶å‘å¤„ç†ï¼Œå› æ­¤è¿™é‡Œéœ€è¦ä¸€ä¸ªé”æœºåˆ¶</span>            m  <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span>muxEntry  <span class="token comment">// è·¯ç”±è§„åˆ™ï¼Œä¸€ä¸ª string å¯¹åº”ä¸€ä¸ª mux å®ä½“ï¼Œè¿™é‡Œçš„stringå°±æ˜¯æ³¨å†Œçš„è·¯ç”±è¡¨è¾¾å¼</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>muxEntryç»“æ„ä½“å®šä¹‰ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> muxEntry <span class="token keyword">struct</span> <span class="token punctuation">{</span>            explicit <span class="token builtin">bool</span>   <span class="token comment">// æ˜¯å¦ç²¾ç¡®åŒ¹é…</span>            h       Handler <span class="token comment">// è¿™ä¸ªè·¯ç”±è¡¨è¾¾å¼å¯¹åº”å“ªä¸ªhandler</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Handlerçš„å®šä¹‰ï¼ŒHandleræ˜¯æ¥æ”¶è¯·æ±‚åé€»è¾‘å¤„ç†å’Œç”Ÿæˆè¿”å›ä¿¡æ¯çš„é€»è¾‘ã€‚ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> Handler <span class="token keyword">interface</span> <span class="token punctuation">{</span>            <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>ResponseWriter<span class="token punctuation">,</span> <span class="token operator">*</span>Request<span class="token punctuation">)</span>  <span class="token comment">// è·¯ç”±å®ç°å™¨</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨äº† HandlerFunc(f)ï¼Œç±»ä¼¼å¼ºåˆ¶ç±»å‹è½¬æ¢ f æˆä¸ºHandlerFuncç±»å‹ï¼Œè¿™æ ·få°±æ‹¥æœ‰äº†ServHTTPæ–¹æ³•ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">type</span> HandlerFunc <span class="token keyword">func</span><span class="token punctuation">(</span>ResponseWriter<span class="token punctuation">,</span> <span class="token operator">*</span>Request<span class="token punctuation">)</span>        <span class="token comment">// ServeHTTP calls f(w, r).</span>        <span class="token keyword">func</span> <span class="token punctuation">(</span>f HandlerFunc<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>w ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">f</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·¯ç”±å™¨æ¥æ”¶åˆ°è¯·æ±‚ä¹‹åè°ƒç”¨mux.handler(r).ServeHTTP(w, r)ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨å¯¹åº”è·¯ç”±çš„handlerçš„ServerHTTPæ¥å£ï¼Œé‚£ä¹ˆmux.handler(r)æ€ä¹ˆå¤„ç†çš„å‘¢ï¼Ÿæ ¹æ®ç”¨æˆ·è¯·æ±‚çš„URLå’Œè·¯ç”±å™¨é‡Œé¢å­˜å‚¨çš„mapå»åŒ¹é…çš„ï¼Œå½“åŒ¹é…åˆ°ä¹‹åè¿”å›å­˜å‚¨çš„handlerï¼Œè°ƒç”¨è¿™ä¸ªhandlerçš„ServHTTPæ¥å£å°±å¯ä»¥æ‰§è¡Œåˆ°ç›¸åº”çš„å‡½æ•°äº†ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">func</span> <span class="token punctuation">(</span>mux <span class="token operator">*</span>ServeMux<span class="token punctuation">)</span> <span class="token function">handler</span><span class="token punctuation">(</span>r <span class="token operator">*</span>Request<span class="token punctuation">)</span> Handler <span class="token punctuation">{</span>            mux<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">RLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">defer</span> mux<span class="token punctuation">.</span>mu<span class="token punctuation">.</span><span class="token function">RUnlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">// Host-specific pattern takes precedence over generic ones</span>            h <span class="token operator">:=</span> mux<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>Host <span class="token operator">+</span> r<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>            <span class="token keyword">if</span> h <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>                h <span class="token operator">=</span> mux<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Path<span class="token punctuation">)</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> h <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>                h <span class="token operator">=</span> <span class="token function">NotFoundHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> h        <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Go è¯­è¨€å…¶å®æ”¯æŒå¤–éƒ¨å®ç°çš„è·¯ç”±å™¨ ListenAndServeçš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ç”¨ä»¥é…ç½®å¤–éƒ¨è·¯ç”±å™¨çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªHandleræ¥å£ï¼Œå³å¤–éƒ¨è·¯ç”±å™¨åªè¦å®ç°äº† Handler æ¥å£å°±å¯ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è‡ªå·±å®ç°çš„è·¯ç”±å™¨çš„ServHTTPé‡Œé¢å®ç°è‡ªå®šä¹‰è·¯ç”±åŠŸèƒ½ã€‚</p><pre class="line-numbers language-go" data-language="go"><code class="language-go"><span class="token keyword">package</span> main<span class="token keyword">import</span> <span class="token punctuation">(</span>            <span class="token string">"fmt"</span>            <span class="token string">"net/http"</span>        <span class="token punctuation">)</span>        <span class="token keyword">type</span> MyMux <span class="token keyword">struct</span> <span class="token punctuation">{</span>        <span class="token punctuation">}</span>        <span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>MyMux<span class="token punctuation">)</span> <span class="token function">ServeHTTP</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> r<span class="token punctuation">.</span>URL<span class="token punctuation">.</span>Path <span class="token operator">==</span> <span class="token string">"/"</span> <span class="token punctuation">{</span>                <span class="token function">sayhelloName</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> r<span class="token punctuation">)</span>                <span class="token keyword">return</span>            <span class="token punctuation">}</span>            http<span class="token punctuation">.</span><span class="token function">NotFound</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> r<span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">func</span> <span class="token function">sayhelloName</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>            fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">"Hello myroute!"</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            mux <span class="token operator">:=</span> <span class="token operator">&amp;</span>MyMux<span class="token punctuation">{</span><span class="token punctuation">}</span>            http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">":9090"</span><span class="token punctuation">,</span> mux<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Goè¯­è¨€ä»£ç çš„æ‰§è¡Œæµç¨‹<br>é€šè¿‡å¯¹httpåŒ…çš„åˆ†æä¹‹åï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹æ•´ä¸ªçš„ä»£ç æ‰§è¡Œè¿‡ç¨‹ã€‚<br>1.é¦–å…ˆè°ƒç”¨Http.HandleFuncï¼ŒæŒ‰é¡ºåºåšå¦‚ä¸‹æ“ä½œã€‚<br>â— è°ƒç”¨äº†DefaultServerMuxçš„HandleFuncã€‚<br>â— è°ƒç”¨äº†DefaultServerMuxçš„Handleã€‚<br>â— å¾€DefaultServeMuxçš„map[string]muxEntryä¸­å¢åŠ å¯¹åº”çš„handlerå’Œè·¯ç”±è§„åˆ™ã€‚<br>2.å…¶æ¬¡è°ƒç”¨http.ListenAndServe(â€œ:9090â€, nil)ï¼ŒæŒ‰é¡ºåºåšå¦‚ä¸‹æ“ä½œã€‚<br>â— å®ä¾‹åŒ–Serverã€‚<br>â— è°ƒç”¨Serverçš„ListenAndServe()ã€‚<br>â— è°ƒç”¨net.Listen(â€œtcpâ€, addr)ç›‘å¬ç«¯å£ã€‚<br>â— å¯åŠ¨ä¸€ä¸ªforå¾ªç¯ï¼Œåœ¨å¾ªç¯ä½“ä¸­Acceptè¯·æ±‚ã€‚<br>â— å¯¹æ¯ä¸ªè¯·æ±‚å®ä¾‹åŒ–ä¸€ä¸ª Connï¼Œå¹¶ä¸”å¼€å¯ä¸€ä¸ª goroutine ä¸ºè¿™ä¸ªè¯·æ±‚è¿›è¡ŒæœåŠ¡ go c.serve()ã€‚<br>â— è¯»å–æ¯ä¸ªè¯·æ±‚çš„å†…å®¹w, err := c.readRequest()ã€‚<br>â— åˆ¤æ–­handleræ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®handlerï¼ˆè¿™ä¸ªä¾‹å­å°±æ²¡æœ‰è®¾ç½®handlerï¼‰ï¼Œ handlerå°±è®¾ç½®ä¸ºDefaultServeMuxã€‚<br>â— è°ƒç”¨handlerçš„ServeHttpã€‚<br>â— åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸‹é¢å°±è¿›å…¥åˆ°DefaultServerMux.ServeHttpã€‚<br>â— æ ¹æ®requesté€‰æ‹©handlerï¼Œå¹¶ä¸”è¿›å…¥åˆ°è¿™ä¸ªhandlerçš„ServeHTTPï¼Œ<br>        <code>mux.handler(r).ServeHTTP(w, r)</code><br>â— é€‰æ‹©handlerï¼š<br>a.åˆ¤æ–­æ˜¯å¦æœ‰è·¯ç”±èƒ½æ»¡è¶³è¿™ä¸ªrequestï¼ˆå¾ªç¯éå†ServerMuxçš„muxEntryï¼‰ã€‚<br>b.å¦‚æœæœ‰è·¯ç”±æ»¡è¶³ï¼Œè°ƒç”¨è¿™ä¸ªè·¯ç”±handlerçš„ServeHttpã€‚<br>c.å¦‚æœæ²¡æœ‰è·¯ç”±æ»¡è¶³ï¼Œè°ƒç”¨NotFoundHandlerçš„ServeHttpã€‚</p><link rel="stylesheet" href="/css/spoiler.css" type="text/css"><script src="/js/spoiler.js" type="text/javascript" async></script>]]></content>
      
      
      <categories>
          
          <category> Golang </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Go </tag>
            
            <tag> Web </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
